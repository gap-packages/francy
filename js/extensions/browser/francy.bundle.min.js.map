{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b35901799fe1e69d4d67","webpack:///./src/render/renderer.js","webpack:///./src/util/data-decorator.js","webpack:///./src/util/initialize-decorator.js","webpack:///./src/render/chart.js","webpack:///./src/render/composite.js","webpack:///./src/render/base.js","webpack:///./src/util/logger.js","webpack:///./src/render/graph.js","webpack:///./src/render/mathjax-wrapper.js","webpack:///./src/render/menu.js","webpack:///./src/render/callback.js","webpack:///./src/render/modal.js","webpack:///./src/util/component.js","webpack:///./src/render/tooltip.js","webpack:///./src/francy.js","webpack:///./src/render/frame.js","webpack:///./src/util/json-utils.js","webpack:///./src/render/canvas.js","webpack:///./src/render/graph-factory.js","webpack:///./src/render/graph-tree.js","webpack:///./src/render/menu-context.js","webpack:///./src/render/modal-required.js","webpack:///./src/render/graph-generic.js","webpack:///./src/render/chart-factory.js","webpack:///./src/render/chart-bar.js","webpack:///./src/render/chart-line.js","webpack:///./src/render/chart-scatter.js","webpack:///./src/render/menu-main.js","webpack:///./src/render/modal-about.js","webpack:///./node_modules/save-svg-as-png/saveSvgAsPng.js","webpack:///./src/render/message.js"],"names":["Renderer","verbose","appendTo","callbackHandler","options","new","target","TypeError","render","undefined","unrender","logger","debug","element","transitionDuration","node","tagName","toLowerCase","d3","select","parentNode","top","right","bottom","left","width","parent","attr","getBoundingClientRect","margin","height","requires","enabled","props","decorator","name","descriptor","oldValue","value","hasData","getProperty","data","apply","arguments","obj","propertyPath","tmp","properties","split","property","hasOwnProperty","Array","length","Object","values","initialize","key","_initialize","Chart","axis","yScale","xScale","datasets","datasetNames","tooltip","canvas","chart","keys","scaleLinear","range","domain","x","y","allValues","forEach","concat","max","d","xAxisGroup","selectAll","append","remove","call","axisBottom","style","text","title","yAxisGroup","axisLeft","showLegend","legendGroup","legend","slice","exit","enter","i","merge","colors","dataset","from","_","map","scaleSequential","interpolator","interpolateRainbow","Composite","renderers","renderer","push","settings","load","Base","log","Error","json","partial","parse","Logger","console","message","_format","info","error","level","Date","toISOString","Graph","contextMenu","callback","mathjax","on","executeCallback","messages","event","callbacks","cb","trigger","execute","type","symbolCross","symbolDiamond","symbolSquare","symbolTriangle","symbolStar","symbolWye","symbolCircle","MathJaxWrapper","MathJax","Hub","Config","showMathMenu","skipStartupTypeset","tex2jax","inlineMath","processEscapes","font","linebreaks","automatic","Register","MessageHook","id","mathJaxElement","svgMathJaxElement","setTimeout","bound","svgElement","Queue","Configured","e","warn","Menu","menusIterator","hasNext","menuItem","next","entry","action","html","menus","content","subMenusIterator","iterator","traverse","array","nextIndex","CallbackHandler","requiredArgs","callbackObj","_execute","calbackObj","JSON","stringify","Modal","overlay","holder","RegisterJupyterKeyboardEvents","syntaxHighlight","classes","c","Jupyter","keyboard_manager","register_events","replace","match","cls","test","Tooltip","HTMLParent","pos","mouse","SVGParent","table","self","row","ALL_CANVAS","Francy","frame","exports","window","oldResize","onresize","zoomToFit","Frame","menu","add","frameId","renderChildren","JsonUtils","input","jsonRegex","exec","mime","MIME","Canvas","graph","chartFactory","zoom","updateZoom","translateX","translateY","scale","transform","zoomIdentity","translate","zoomed","stopped","defaultPrevented","stopPropagation","bounds","getBBox","clientBounds","fullWidth","fullHeight","midX","midY","Math","transition","duration","canvasId","TreeGraph","root","hierarchy","treeData","children","x0","y0","levelWidth","childCount","n","newHeight","treemap","tree","size","collapsed","collapse","update","_children","source","nodes","descendants","links","depth","linkGroup","link","linkEnter","o","diagonal","s","nodeGroup","nodeEnter","symbol","getSymbol","nodeUpdate","layer","_applyEvents","nodeOnClick","click","canvasNodes","dataMap","reduce","ContextMenu","preventDefault","RequiredArgsModal","modalId","form","header","headerTitle","arg","onchange","checked","footer","checkValidity","inputElement","focus","GenericGraph","simulationActive","simulation","canvasLinks","linksToAdd","_filterNewElements","nodesToAdd","highlight","drag","dragstarted","dragged","dragended","empty","showNeighbours","connectedNodes","radius","each","manyForce","forceManyBody","strength","linkForce","forceLink","distance","collideForce","forceCollide","iterations","forceX","forceY","forceSimulation","force","ticked","restart","toggle","linkedByIndex","index","neighboring","a","b","__data__","active","alphaTarget","fx","fy","canvasObjects","d3Element","newElements","find","ChartFactory","BarChart","scaleBand","padding","domainRange","barsGroup","bar","barEnter","bandwidth","_renderAxis","_renderLegend","LineChart","linesGroup","valueLine","line","lineEnter","ScatterChart","scatterGroup","scatter","scatterEnter","SvgToPng","MainMenu","aboutModal","menuId","saveSvgAsPng","AboutModal","version","out$","doctype","isElement","HTMLElement","SVGElement","requireDomNode","el","isExternal","url","lastIndexOf","location","host","inlineImages","images","querySelectorAll","checkDone","image","href","getAttributeNS","document","createElement","ctx","getContext","img","Image","crossOrigin","getAttribute","src","onload","drawImage","setAttributeNS","toDataURL","onerror","styles","cssLoadedCallback","selectorRemap","modifyStyle","css","fontsQueue","sheets","styleSheets","rules","cssRules","j","rule","selectorText","err","querySelector","selector","cssText","fontUrlRegexp","fontUrlMatch","externalFontUrl","fontUrlIsDataURI","startsWith","format","getFontMimeTypeFromUrl","processFontQueue","fontUrl","supportedFormats","extensions","extension","indexOf","queue","pop","processNext","oReq","XMLHttpRequest","addEventListener","fontLoaded","transferFailed","open","responseType","send","fontBits","response","fontInBase64","arrayBufferToBase64","updateFontStyle","dataUrl","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","getDimension","clone","dim","v","viewBox","baseVal","parseInt","getComputedStyle","getPropertyValue","isNaN","parseFloat","reEncode","encodeURIComponent","p1","decodeURIComponent","prepareSvg","responsive","xmlns","outer","cloneNode","box","setAttribute","svg","createElementNS","appendChild","removeAttribute","join","fos","innerHTML","defs","insertBefore","firstChild","outHtml","svgAsDataUri","uri","svgAsPngUri","encoderType","encoderOptions","convertToPng","w","h","context","canvg","backgroundColor","globalCompositeOperation","fillStyle","fillRect","png","SecurityError","atob","download","navigator","msSaveOrOpenBlob","uriToBlob","saveLink","downloadSupported","display","body","blob","URL","createObjectURL","onclick","requestAnimationFrame","revokeObjectURL","removeChild","byteString","mimeString","ArrayBuffer","intArray","charCodeAt","Blob","saveSvg","define","Message","alertsId","messageEnter"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;AC7DA;;;;;;;;;;;;AAEA;;IAEqBA,Q;;;AAEnB,0BAA0E;AAAA,4BAA5DC,OAA4D;AAAA,QAA5DA,OAA4D,gCAAlD,KAAkD;AAAA,QAA3CC,QAA2C,QAA3CA,QAA2C;AAAA,QAAjCC,eAAiC,QAAjCA,eAAiC;AAAA,4BAAhBC,OAAgB;AAAA,QAAhBA,OAAgB,gCAAN,EAAM;;AAAA;;AAAA,oHAClE,EAAEH,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EAA0EC,SAASA,OAAnF,EADkE;;AAExE,QAAIC,IAAIC,MAAJ,KAAeN,QAAnB,EAA6B;AAC3B,YAAM,IAAIO,SAAJ,CAAc,iDAAd,CAAN;AACD;AACD,QAAI,MAAKC,MAAL,KAAgBC,SAAhB,IAA6B,OAAO,MAAKD,MAAZ,KAAuB,UAAxD,EAAoE;AAClE,YAAM,IAAID,SAAJ,CAAc,kCAAd,CAAN;AACD;AACD,QAAI,MAAKG,QAAL,KAAkBD,SAAtB,EAAiC;AAC/B,YAAKE,MAAL,CAAYC,KAAZ,CAAkB,qCAAlB;AACD;AACD,UAAKC,OAAL,GAAeJ,SAAf;AACA,UAAKK,kBAAL,GAA0B,GAA1B,CAZwE,CAYzC;AAZyC;AAazE;;;;kCAEa,CAAE;;;wBAEC;AACf,aAAO,KAAKV,OAAL,CAAaF,QAAb,CAAsBW,OAAtB,CAA8BE,IAA9B,GAAqCC,OAArC,CAA6CC,WAA7C,OAA+D,KAA/D,GAAuEC,GAAGC,MAAH,CAAU,KAAKf,OAAL,CAAaF,QAAb,CAAsBW,OAAtB,CAA8BE,IAA9B,GAAqCK,UAA/C,CAAvE,GAAoI,KAAKhB,OAAL,CAAaF,QAAb,CAAsBW,OAAjK;AACD;;;wBAEe;AACd,aAAO,KAAKT,OAAL,CAAaF,QAAb,CAAsBW,OAAtB,CAA8BE,IAA9B,GAAqCC,OAArC,CAA6CC,WAA7C,OAA+D,KAA/D,GAAuE,KAAKb,OAAL,CAAaF,QAAb,CAAsBW,OAAtB,CAA8BM,MAA9B,CAAqC,KAArC,CAAvE,GAAqH,KAAKf,OAAL,CAAaF,QAAb,CAAsBW,OAAlJ;AACD;;;wBAEY;AACX,aAAO,KAAKT,OAAL,CAAaF,QAAb,CAAsBW,OAA7B;AACD;;;wBAEY;AACX,aAAO,EAAEQ,KAAK,EAAP,EAAWC,OAAO,EAAlB,EAAsBC,QAAQ,EAA9B,EAAkCC,MAAM,EAAxC,EAAP;AACD;;;wBAEW;AACV,UAAIC,QAAQ,CAAC,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,OAAjB,CAAD,IAA8BT,GAAGC,MAAH,CAAU,MAAV,EAAkBJ,IAAlB,GAAyBa,qBAAzB,GAAiDH,KAA3F;AACA,aAAOA,QAAQ,KAAKI,MAAL,CAAYL,IAApB,GAA2B,KAAKK,MAAL,CAAYP,KAA9C;AACD;;;wBAEY;AACX,UAAIQ,SAAS,CAAC,KAAKJ,MAAL,CAAYC,IAAZ,CAAiB,QAAjB,CAAD,IAA+BT,GAAGC,MAAH,CAAU,MAAV,EAAkBJ,IAAlB,GAAyBa,qBAAzB,GAAiDE,MAA7F;AACA,aAAOA,SAAS,KAAKD,MAAL,CAAYR,GAArB,GAA2B,KAAKQ,MAAL,CAAYN,MAA9C;AACD;;;;;;kBA3CkBvB,Q;;;;;;;;;;;;QCJL+B,Q,GAAAA,Q;QAgBAC,O,GAAAA,O;AAhBT,SAASD,QAAT,CAAkBE,KAAlB,EAAyB;AAC9B,SAAO,SAASC,SAAT,CAAmB5B,MAAnB,EAA2B6B,IAA3B,EAAiCC,UAAjC,EAA6C;AAClD,QAAIC,WAAWD,WAAWE,KAA1B;;AAEAF,eAAWE,KAAX,GAAmB,YAAW;AAC5B,UAAI,CAACC,QAAQC,YAAY,KAAKC,IAAjB,EAAuBR,KAAvB,CAAR,CAAL,EAA6C;AAC3C,aAAKtB,MAAL,CAAYC,KAAZ,oBAAmCqB,KAAnC;AACA;AACD;AACD,aAAOI,SAASK,KAAT,CAAe,IAAf,EAAqBC,SAArB,CAAP;AACD,KAND;;AAQA,WAAOP,UAAP;AACD,GAZD;AAaD;;AAEM,SAASJ,OAAT,CAAiBC,KAAjB,EAAwB;AAC7B,SAAO,SAASC,SAAT,CAAmB5B,MAAnB,EAA2B6B,IAA3B,EAAiCC,UAAjC,EAA6C;AAClD,QAAIC,WAAWD,WAAWE,KAA1B;;AAEAF,eAAWE,KAAX,GAAmB,YAAW;AAC5B,UAAI,CAACE,YAAY,KAAKC,IAAjB,EAAuBR,KAAvB,CAAL,EAAoC;AAClC,aAAKtB,MAAL,CAAYC,KAAZ,oBAAmCqB,KAAnC;AACA;AACD;AACD,aAAOI,SAASK,KAAT,CAAe,IAAf,EAAqBC,SAArB,CAAP;AACD,KAND;;AAQA,WAAOP,UAAP;AACD,GAZD;AAaD;;AAED,SAASI,WAAT,CAAqBI,GAArB,EAA0BC,YAA1B,EAAwC;;AAEtC,MAAIC,MAAMF,GAAV;;AAEA,MAAIE,OAAOD,YAAX,EAAyB;AACvB,QAAIE,aAAaF,aAAaG,KAAb,CAAmB,GAAnB,CAAjB;;AADuB;AAAA;AAAA;;AAAA;AAGvB,2BAAqBD,UAArB,8HAAiC;AAAA,YAAxBE,QAAwB;;AAC/B,YAAI,CAACH,IAAII,cAAJ,CAAmBD,QAAnB,CAAL,EAAmC;AACjCH,gBAAMrC,SAAN;AACA;AACD,SAHD,MAGO;AACLqC,gBAAMA,IAAIG,QAAJ,CAAN;AACD;AACF;AAVsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWxB;;AAED,SAAOH,GAAP;AACD;;AAED,SAASP,OAAT,CAAiBK,GAAjB,EAAsB;AACpB,SAAOA,QAASA,eAAeO,KAAf,IAAwBP,IAAIQ,MAA7B,IAAyCR,eAAeS,MAAf,IAAyBA,OAAOC,MAAP,CAAcV,GAAd,EAAmBQ,MAA7F,CAAP;AACD,C;;;;;;;;;;;;QCtDeG,U,GAAAA,U;AAAT,SAASA,UAAT,GAAsB;AAC3B,SAAO,UAAUjD,MAAV,EAAkBkD,GAAlB,EAAuBpB,UAAvB,EAAmC;AACxC,QAAIC,WAAWD,WAAWE,KAA1B;;AAEAF,eAAWE,KAAX,GAAmB,YAAW;AAC5B,WAAKmB,WAAL;AACA,aAAOpB,SAASK,KAAT,CAAe,IAAf,EAAqBC,SAArB,CAAP;AACD,KAHD;AAIA,WAAOP,UAAP;AACD,GARD;AASD,C;;;;;;;;;;;;;;;;ACVD;;;;AACA;;;;;;;;;;;;AAEA;;IAEqBsB,K;;;AAEnB,uBAA4D;AAAA,4BAA9CzD,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,8GACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;;AAE1D,UAAKwD,IAAL,GAAYlD,SAAZ;AACA,UAAKmD,MAAL,GAAcnD,SAAd;AACA,UAAKoD,MAAL,GAAcpD,SAAd;AACA,UAAKqD,QAAL,GAAgBrD,SAAhB;AACA,UAAKsD,YAAL,GAAoBtD,SAApB;AACA,UAAKuD,OAAL,GAAevD,SAAf;AAP0D;AAQ3D;;;;kCAEa;AAAA;;AACZ,WAAKuD,OAAL,GAAe,sBAAY,KAAK5D,OAAjB,CAAf;;AAEA,WAAKS,OAAL,GAAe,KAAKa,MAAL,CAAYP,MAAZ,CAAmB,kBAAnB,CAAf;;AAEA,WAAKwC,IAAL,GAAY,KAAKlB,IAAL,CAAUwB,MAAV,CAAiBC,KAAjB,CAAuBP,IAAnC;AACA,WAAKG,QAAL,GAAgB,KAAKrB,IAAL,CAAUwB,MAAV,CAAiBC,KAAjB,CAAuBzB,IAAvC;AACA,WAAKsB,YAAL,GAAoBV,OAAOc,IAAP,CAAY,KAAKL,QAAjB,CAApB;;AAEA,WAAKD,MAAL,GAAc3C,GAAGkD,WAAH,GAAiBC,KAAjB,CAAuB,CAAC,CAAD,EAAI,KAAK5C,KAAT,CAAvB,EAAwC6C,MAAxC,CAA+C,KAAKX,IAAL,CAAUY,CAAV,CAAYD,MAA3D,CAAd;AACA,WAAKV,MAAL,GAAc1C,GAAGkD,WAAH,GAAiBC,KAAjB,CAAuB,CAAC,KAAKvC,MAAN,EAAc,CAAd,CAAvB,EAAyCwC,MAAzC,CAAgD,KAAKX,IAAL,CAAUa,CAAV,CAAYF,MAA5D,CAAd;;AAEA,WAAKG,SAAL,GAAiB,EAAjB;AACA,WAAKV,YAAL,CAAkBW,OAAlB,CAA0B;AAAA,eAAO,OAAKD,SAAL,GAAiB,OAAKA,SAAL,CAAeE,MAAf,CAAsB,OAAKb,QAAL,CAAcN,GAAd,CAAtB,CAAxB;AAAA,OAA1B;;AAEA,UAAI,CAAC,KAAKG,IAAL,CAAUa,CAAV,CAAYF,MAAZ,CAAmBlB,MAAxB,EAAgC;AAC9B,aAAKQ,MAAL,CAAYU,MAAZ,CAAmB,CAAC,CAAD,EAAIpD,GAAG0D,GAAH,CAAO,KAAKH,SAAZ,EAAuB;AAAA,iBAAKI,CAAL;AAAA,SAAvB,CAAJ,CAAnB;AACD;;AAED,UAAI,CAAC,KAAKlB,IAAL,CAAUY,CAAV,CAAYD,MAAZ,CAAmBlB,MAAxB,EAAgC;AAC9B,aAAKS,MAAL,CAAYS,MAAZ,CAAmB,CAAC,CAAD,EAAI,KAAKG,SAAL,CAAerB,MAAf,GAAwB,KAAKW,YAAL,CAAkBX,MAA9C,CAAnB;AACD;AACF;;;kCAEa;AACZ;AACA,UAAI0B,aAAa,KAAKjE,OAAL,CAAakE,SAAb,CAAuB,iBAAvB,CAAjB;;AAEA,UAAI,CAACD,WAAW/D,IAAX,EAAL,EAAwB;AACtB+D,qBAAa,KAAKjE,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,eAAvC,CAAb;AACD;;AAEDmD,iBAAWC,SAAX,CAAqB,GAArB,EAA0BE,MAA1B;;AAEA;AACAH,iBACGnD,IADH,CACQ,WADR,mBACoC,KAAKG,MADzC,QAEGoD,IAFH,CAEQhE,GAAGiE,UAAH,CAAc,KAAKtB,MAAnB,CAFR,EAGGmB,MAHH,CAGU,MAHV,EAIGrD,IAJH,CAIQ,IAJR,EAIc,EAJd,EAKGA,IALH,CAKQ,IALR,EAKc,KAAKF,KAAL,GAAa,CAL3B,EAMGE,IANH,CAMQ,MANR,EAMgB,OANhB,EAOGA,IAPH,CAOQ,OAPR,EAOiB,aAPjB,EAQGyD,KARH,CAQS,aART,EAQwB,KARxB,EASGC,IATH,CASQ,KAAK1B,IAAL,CAAUY,CAAV,CAAYe,KATpB;;AAWA;AACA,UAAIC,aAAa,KAAK1E,OAAL,CAAakE,SAAb,CAAuB,iBAAvB,CAAjB;;AAEA,UAAI,CAACQ,WAAWxE,IAAX,EAAL,EAAwB;AACtBwE,qBAAa,KAAK1E,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,eAAvC,CAAb;AACD;;AAED4D,iBAAWR,SAAX,CAAqB,GAArB,EAA0BE,MAA1B;;AAEA;AACAM,iBACGL,IADH,CACQhE,GAAGsE,QAAH,CAAY,KAAK5B,MAAjB,CADR,EAEGoB,MAFH,CAEU,MAFV,EAGGrD,IAHH,CAGQ,IAHR,EAGc,CAAC,EAHf,EAIGA,IAJH,CAIQ,IAJR,EAIc,KAAKG,MAAL,GAAc,CAJ5B,EAKGH,IALH,CAKQ,MALR,EAKgB,OALhB,EAMGA,IANH,CAMQ,OANR,EAMiB,aANjB,EAOGyD,KAPH,CAOS,aAPT,EAOwB,KAPxB,EAQGC,IARH,CAQQ,KAAK1B,IAAL,CAAUa,CAAV,CAAYc,KARpB;AASD;;;oCAEe;AACd,UAAI,KAAK7C,IAAL,CAAUwB,MAAV,CAAiBC,KAAjB,CAAuBuB,UAA3B,EAAuC;;AAErC,YAAIC,cAAc,KAAK7E,OAAL,CAAakE,SAAb,CAAuB,gBAAvB,CAAlB;;AAEA,YAAI,CAACW,YAAY3E,IAAZ,EAAL,EAAyB;AACvB2E,wBAAc,KAAK7E,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,eAAvC,CAAd;AACD;;AAED;AACA+D,oBAAYX,SAAZ,CAAsB,GAAtB,EAA2BE,MAA3B;;AAEA,YAAIU,SAASD,YAAYX,SAAZ,CAAsB,GAAtB,EAA2BtC,IAA3B,CAAgC,KAAKsB,YAAL,CAAkB6B,KAAlB,EAAhC,CAAb;;AAEAD,eAAOE,IAAP,GAAcZ,MAAd;;AAEAU,iBAASA,OAAOG,KAAP,GACNd,MADM,CACC,GADD,EAENrD,IAFM,CAED,WAFC,EAEY,UAACkD,CAAD,EAAIkB,CAAJ;AAAA,kCAAyBA,IAAI,EAA7B;AAAA,SAFZ,EAGNC,KAHM,CAGAL,MAHA,CAAT;;AAKAA,eAAOX,MAAP,CAAc,MAAd,EACGrD,IADH,CACQ,GADR,EACa,KAAKF,KAAL,GAAa,EAD1B,EAEGE,IAFH,CAEQ,OAFR,EAEiB,EAFjB,EAGGA,IAHH,CAGQ,QAHR,EAGkB,EAHlB,EAIGyD,KAJH,CAIS,MAJT,EAIiB,UAACP,CAAD,EAAIkB,CAAJ;AAAA,iBAAUrC,MAAMuC,MAAN,CAAaF,IAAI,CAAjB,CAAV;AAAA,SAJjB;;AAMAJ,eAAOX,MAAP,CAAc,MAAd,EACGrD,IADH,CACQ,GADR,EACa,KAAKF,KAAL,GAAa,EAD1B,EAEGE,IAFH,CAEQ,GAFR,EAEa,CAFb,EAGGA,IAHH,CAGQ,IAHR,EAGc,OAHd,EAIGyD,KAJH,CAIS,aAJT,EAIwB,KAJxB,EAKGC,IALH,CAKQ;AAAA,iBAAKR,CAAL;AAAA,SALR;AAMD;AACF;;;4BAEcqB,O,EAAS5D,K,EAAO;AAC7B,aAAO,EAAE,KAAK,EAAE,SAAS,SAAX,EAAsB,QAAQ4D,OAA9B,EAAP,EAAgD,KAAK,EAAE,SAAS,OAAX,EAAoB,QAAQ5D,KAA5B,EAArD,EAAP;AACD;;;gCAMkBsC,G,EAAK;AACtB,aAAOzB,MAAMgD,IAAN,CAAW,IAAIhD,KAAJ,CAAUyB,GAAV,CAAX,EAA2B,UAACwB,CAAD,EAAIL,CAAJ;AAAA,eAAUA,CAAV;AAAA,OAA3B,EAAwCM,GAAxC,CAA4C;AAAA,eAAK9B,CAAL;AAAA,OAA5C,CAAP;AACD;;;wBANmB;AAClB,aAAOrD,GAAGoF,eAAH,GAAqBhC,MAArB,CAA4B,CAAC,CAAD,EAAI,GAAJ,CAA5B,EAAsCiC,YAAtC,CAAmDrF,GAAGsF,kBAAtD,CAAP;AACD;;;;;;kBAzHkB9C,K;;;;;;;;;;;;;;;;ACLrB;;;;;;;;;;;;IAEqB+C,S;;;AAEnB,2BAA4D;AAAA,4BAA9CxG,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,sHACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;;AAE1D,QAAIE,IAAIC,MAAJ,KAAemG,SAAnB,EAA8B;AAC5B,YAAM,IAAIlG,SAAJ,CAAc,kDAAd,CAAN;AACD;AACD,UAAKmG,SAAL,GAAiB,EAAjB;AAL0D;AAM3D;;;;wBAEGC,Q,EAAU;AACZ,WAAKD,SAAL,CAAeE,IAAf,CAAoBD,QAApB;AACA,aAAO,IAAP;AACD;;;qCAEgB;AACf;AADe;AAAA;AAAA;;AAAA;AAEf,6BAAqB,KAAKD,SAA1B,8HAAqC;AAAA,cAA5BC,QAA4B;;AACnCA,mBAASE,QAAT,CAAkB,EAAC3G,UAAU,IAAX,EAAlB,EAAoC4G,IAApC,CAAyC,KAAKrE,IAA9C,EAAoDjC,MAApD;AACD;AAJc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKhB;;;;;;kBApBkBiG,S;;;;;;;;;;;;;;;;ACFrB;;;;AACA;;;;;;;;AAEA;;IAEqBM,I;AAEnB,sBAAqE;AAAA,4BAAvD9G,OAAuD;AAAA,QAAvDA,OAAuD,gCAA7C,KAA6C;AAAA,6BAAtCC,QAAsC;AAAA,QAAtCA,QAAsC,iCAA3B,MAA2B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AACnE,SAAK0G,QAAL,CAAc,EAAE5G,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EAAd;AACA;;;AAGA,SAAK6G,GAAL,GAAW,qBAAW,KAAK5G,OAAhB,CAAX;AACD;;;;oCAEgD;AAAA,UAAtCH,OAAsC,SAAtCA,OAAsC;AAAA,UAA7BC,QAA6B,SAA7BA,QAA6B;AAAA,UAAnBC,eAAmB,SAAnBA,eAAmB;;AAC/C,WAAKC,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AACA,UAAI,CAAC,KAAKA,OAAL,CAAaD,eAAd,IAAiC,CAACA,eAAtC,EAAuD;AACrD,cAAM,IAAI8G,KAAJ,CAAU,wGAAV,CAAN;AACD;AACD,UAAI,CAAC,KAAK7G,OAAL,CAAaF,QAAd,IAA0B,CAACA,QAA/B,EAAyC;AACvC,cAAM,IAAI+G,KAAJ,CAAU,wDAAV,CAAN;AACD;AACD,UAAI,OAAO/G,QAAP,KAAoB,QAAxB,EAAkC;AAChCA,mBAAWgB,GAAGC,MAAH,CAAUjB,QAAV,CAAX;AACD;AACD;;;;;;AAMA,WAAKE,OAAL,CAAaH,OAAb,GAAuBA,WAAW,KAAKG,OAAL,CAAaH,OAA/C;AACA,WAAKG,OAAL,CAAaF,QAAb,GAAwBA,YAAY,KAAKE,OAAL,CAAaF,QAAjD;AACA,WAAKE,OAAL,CAAaD,eAAb,GAA+BA,mBAAmB,KAAKC,OAAL,CAAaD,eAA/D;AACA,aAAO,IAAP;AACD;;;yBAEI+G,I,EAAMC,O,EAAS;AAClB,UAAI1E,OAAO,oBAAU2E,KAAV,CAAgBF,IAAhB,EAAsBC,OAAtB,CAAX;AACA,UAAI1E,IAAJ,EAAU;AACR,aAAKA,IAAL,GAAYA,IAAZ;AACD;AACD,aAAO,IAAP;AACD;;;wBAEY;AACX,aAAO,KAAKuE,GAAZ;AACD;;;;;;kBA3CkBD,I;;;;;;;;;;;;;;;;;ACLrB;;;IAGqBM,M;;AAEnB;;;;AAIA,oBAAsC;AAAA,mFAAJ,EAAI;AAAA,4BAAxBpH,OAAwB;AAAA,QAAxBA,OAAwB,gCAAd,KAAc;;AAAA;;AACpC,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKqH,OAAL,GAAeA,OAAf;AACD;;AAED;;;;;;;;0BAIMC,O,EAAS;AACb,UAAI,KAAKtH,OAAT,EAAkB;AAChB,aAAKqH,OAAL,CAAa1G,KAAb,CAAmByG,OAAOG,OAAP,CAAe,OAAf,EAAwBD,OAAxB,CAAnB;AACD;AACF;;AAED;;;;;;;yBAIKA,O,EAAS;AACZ,WAAKD,OAAL,CAAaG,IAAb,CAAkBJ,OAAOG,OAAP,CAAe,MAAf,EAAuBD,OAAvB,CAAlB;AACD;;AAED;;;;;;;;0BAKMA,O,EAASG,M,EAAO;AACpB,WAAKJ,OAAL,CAAaI,KAAb,CAAmBL,OAAOG,OAAP,CAAe,OAAf,EAAwBD,OAAxB,CAAnB,EAAqDG,MAArD;AACD;;AAED;;;;;;;;yBAKKH,O,EAASG,K,EAAO;AACnBA,cAAQA,SAAS,EAAjB;AACA,WAAKJ,OAAL,CAAaI,KAAb,CAAmBL,OAAOG,OAAP,CAAe,MAAf,EAAuBD,OAAvB,CAAnB,EAAoDG,KAApD;AACD;;AAED;;;;;;;;4BAKeC,K,EAAOJ,O,EAAS;AAC7B,mBAAWI,KAAX,YAAuB,IAAIC,IAAJ,GAAWC,WAAX,EAAvB,WAAqDN,OAArD;AACD;;;;;;kBAvDkBF,M;;;;;;;;;;;;;;;;ACHrB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA;;IAEqBS,K;;;AAEnB,uBAA4D;AAAA,4BAA9C7H,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,yGACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;kCAEa;AACZ,WAAKU,OAAL,GAAe,KAAKa,MAAL,CAAYP,MAAZ,CAAmB,kBAAnB,CAAf;AACD;;;iCAEYN,O,EAAS;AAAA;;AACpB,UAAI,CAACA,OAAL,EAAc;;AAEd,UAAImD,UAAU,sBAAY,KAAK5D,OAAjB,CAAd;AACA,UAAI2H,cAAc,0BAAgB,KAAK3H,OAArB,CAAlB;AACA,UAAI4H,WAAW,uBAAa,KAAK5H,OAAlB,CAAf;AACA,UAAI6H,UAAU,6BAAmB,KAAK7H,OAAxB,CAAd;;AAEAS,cACGqH,EADH,CACM,aADN,EACqB,UAASrD,CAAT,EAAY;AAC7B,YAAIpC,OAAOoC,EAAEpC,IAAF,IAAUoC,CAArB;AACA;AACAkD,oBAAYjB,IAAZ,CAAiBrE,IAAjB,EAAuB,IAAvB,EAA6BjC,MAA7B;AACA;AACA2H,wBAAgBjD,IAAhB,CAAqB,IAArB,EAA2BzC,IAA3B,EAAiC,aAAjC;AACD,OAPH,EAQGyF,EARH,CAQM,OARN,EAQe,UAASrD,CAAT,EAAY;AACvB,YAAIpC,OAAOoC,EAAEpC,IAAF,IAAUoC,CAArB;AACA;AACAsD,wBAAgBjD,IAAhB,CAAqB,IAArB,EAA2BzC,IAA3B,EAAiC,OAAjC;AACD,OAZH,EAaGyF,EAbH,CAaM,UAbN,EAakB,UAASrD,CAAT,EAAY;AAC1B,YAAIpC,OAAOoC,EAAEpC,IAAF,IAAUoC,CAArB;AACA;AACAsD,wBAAgBjD,IAAhB,CAAqB,IAArB,EAA2BzC,IAA3B,EAAiC,UAAjC;AACD,OAjBH,EAkBGyF,EAlBH,CAkBM,WAlBN,EAkBmB,aAAK;AACpB,YAAIzF,OAAOoC,EAAEpC,IAAF,IAAUoC,CAArB;AACA;AACAb,gBAAQ8C,IAAR,CAAarE,KAAK2F,QAAlB,EAA4B,IAA5B,EAAkC5H,MAAlC;AACA;AACAyH,gBAAQpB,QAAR,CAAiB,EAAC3G,UAAU8D,OAAX,EAAjB,EAAsC8C,IAAtC,CAA2C,OAAKrE,IAAhD,EAAsDjC,MAAtD;AACD,OAxBH,EAyBG0H,EAzBH,CAyBM,UAzBN,EAyBkB,YAAM;AACpB;AACAlE,gBAAQtD,QAAR;AACD,OA5BH;;AA8BA,eAASyH,eAAT,CAAyB1F,IAAzB,EAA+B4F,KAA/B,EAAsC;AACpC,YAAI5F,KAAK6F,SAAT,EAAoB;AAClBjF,iBAAOC,MAAP,CAAcb,KAAK6F,SAAnB,EAA8B5D,OAA9B,CAAsC,UAAC6D,EAAD,EAAQ;AAC5C;AACAA,eAAGC,OAAH,KAAeH,KAAf,IAAwBL,SAASlB,IAAT,CAAc,EAAEkB,UAAUO,EAAZ,EAAd,EAAgC,IAAhC,EAAsCE,OAAtC,EAAxB;AACD,WAHD;AAID;AACF;AACF;;;8BAMgBC,I,EAAM;;AAErB,UAAI7H,UAAUJ,SAAd;AACA,cAAQiI,IAAR;AACA,aAAK,OAAL;AACE7H,oBAAUK,GAAGyH,WAAb;AACA;AACF,aAAK,SAAL;AACE9H,oBAAUK,GAAG0H,aAAb;AACA;AACF,aAAK,QAAL;AACE/H,oBAAUK,GAAG2H,YAAb;AACA;AACF,aAAK,UAAL;AACEhI,oBAAUK,GAAG4H,cAAb;AACA;AACF,aAAK,MAAL;AACEjI,oBAAUK,GAAG6H,UAAb;AACA;AACF,aAAK,KAAL;AACElI,oBAAUK,GAAG8H,SAAb;AACA;AACF,aAAK,QAAL;AACA;AACEnI,oBAAUK,GAAG+H,YAAb;AArBF;;AAwBA,aAAOpI,OAAP;AACD;;;wBAhCmB;AAClB,aAAOK,GAAGoF,eAAH,GAAqBhC,MAArB,CAA4B,CAAC,CAAD,EAAI,GAAJ,CAA5B,EAAsCiC,YAAtC,CAAmDrF,GAAGsF,kBAAtD,CAAP;AACD;;;;;;kBA5DkBsB,K;;;;;;;;;;;;;;;;;;ACRrB;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBoB,c,WAMlB,4BAAQ,uBAAR,C;;;AAJD,gCAA4D;AAAA,4BAA9CjJ,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,2HACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;AACP,WAAKU,OAAL,GAAe,KAAKT,OAAL,CAAaF,QAAb,CAAsBW,OAArC;AACA,UAAI;AACFsI,gBAAQC,GAAR,CAAYC,MAAZ,CAAmB;AACjBC,wBAAc,KADG;AAEjBC,8BAAoB,IAFH;AAGjBC,mBAAS;AACPC,wBAAY,CACV,CAAC,GAAD,EAAM,GAAN,CADU,EAEV,CAAC,KAAD,EAAQ,KAAR,CAFU,CADL;AAKPC,4BAAgB;AALT,WAHQ;AAUjB,sBAAY;AACVC,kBAAM,UADI;AAEVC,wBAAY;AACVC,yBAAW;AADD;AAFF,WAVK;AAgBjB,iBAAO;AACLF,kBAAM,UADD;AAELC,wBAAY;AACVC,yBAAW;AADD;AAFP;AAhBU,SAAnB;;AAwBAV,gBAAQC,GAAR,CAAYU,QAAZ,CAAqBC,WAArB,CAAiC,UAAjC,EAA6C,UAASC,EAAT,EAAa;AACxD,cAAIA,MAAMA,GAAG5G,MAAH,GAAY,CAAtB,EAAyB;AACvB,gBAAI6G,iBAAiB/I,GAAGC,MAAH,OAAc6I,GAAG,CAAH,CAAd,YAArB;AACA,gBAAIE,oBAAoBD,eAAe9I,MAAf,CAAsB,KAAtB,CAAxB;AACA,gBAAI+I,kBAAkBnJ,IAAlB,EAAJ,EAA8B;AAC5BoJ,yBAAW,YAAM;AACfA,2BAAW,YAAM;AACf,sBAAIC,QAAQF,kBAAkB/I,MAAlB,CAAyB,GAAzB,EAA8BJ,IAA9B,GAAqCa,qBAArC,EAAZ;AACAsI,oCAAkBvI,IAAlB,CAAuB,GAAvB,EAA4B,CAACyI,MAAM3I,KAAP,GAAe,CAA3C;AACAyI,oCAAkBvI,IAAlB,CAAuB,GAAvB,EAA4B,CAAC,EAA7B;AACD,iBAJD,EAIG,EAJH;AAKAT,mBAAGC,MAAH,CAAU8I,eAAelJ,IAAf,GAAsBK,UAAtB,CAAiCA,UAA3C,EAAuD4D,MAAvD,CAA8D,YAAW;AACvE,yBAAOkF,kBAAkBnJ,IAAlB,EAAP;AACD,iBAFD;AAGD,eATD,EASG,EATH;AAUD;AACF;AACF,SAjBD;;AAmBA,YAAIsJ,aAAa,KAAKxJ,OAAL,CAAaM,MAAb,CAAoB,KAApB,CAAjB;AACA,YAAIkJ,WAAWtJ,IAAX,EAAJ,EAAuB;AACrBoI,kBAAQC,GAAR,CAAYkB,KAAZ,CACE,CAAC,aAAD,EAAgBnB,QAAQC,GAAxB,EAA6B,KAA7B,CADF,EAEE,CAAC,SAAD,EAAYD,QAAQC,GAApB,EAAyBiB,WAAWtJ,IAAX,EAAzB,CAFF,EAGE,CAAC,aAAD,EAAgBoI,QAAQC,GAAxB,EAA6B,UAA7B,CAHF,EAIE,CAAC,SAAD,EAAYD,QAAQC,GAApB,EAAyB,KAAKvI,OAAL,CAAaE,IAAb,EAAzB,CAJF;AAMD,SAPD,MAOO;AACLoI,kBAAQC,GAAR,CAAYkB,KAAZ,CACE,CAAC,aAAD,EAAgBnB,QAAQC,GAAxB,EAA6B,UAA7B,CADF,EAEE,CAAC,SAAD,EAAYD,QAAQC,GAApB,EAAyB,KAAKvI,OAAL,CAAaE,IAAb,EAAzB,CAFF;AAID;;AAEDoI,gBAAQC,GAAR,CAAYmB,UAAZ;AACD,OA5DD,CA4DE,OAAOC,CAAP,EAAU;AACV,YAAIA,EAAErI,IAAF,KAAW,gBAAf,EAAiC;AAC/B,eAAKxB,MAAL,CAAY8J,IAAZ,CAAiB,mCAAjB,EAAsDD,CAAtD;AACD,SAFD,MAEO;AACL,eAAK7J,MAAL,CAAY+G,KAAZ,CAAkB,2BAAlB,EAA+C8C,CAA/C;AACD;AACF;AAEF;;;;;kBA7EkBtB,c;;;;;;;;;;;;;;;;ACLrB;;;;AACA;;;;;;;;;;;;IAEqBwB,I;;;AAEnB,sBAA4D;AAAA,4BAA9CzK,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,uGACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAEQD,Q,EAAUyK,a,EAAe;AAAA;;AAChC,aAAOA,cAAcC,OAAd,EAAP,EAAgC;AAC9B,YAAIC,WAAWF,cAAcG,IAAd,EAAf;AACA,YAAIC,QAAQ7K,SAAS8E,MAAT,CAAgB,IAAhB,CAAZ;AACA,YAAIgG,SAASD,MAAMhG,SAAN,CAAgB,GAAhB,EAAqBtC,IAArB,CAA0B,CAACoI,QAAD,CAA1B,EAAsC/E,KAAtC,GAA8Cd,MAA9C,CAAqD,GAArD,EAA0DrD,IAA1D,CAA+D,OAA/D,EAAwEkJ,SAASvF,KAAjF,EAAwF2F,IAAxF,CAA6FJ,SAASvF,KAAtG,CAAb;AACA,YAAIuF,SAAS7C,QAAT,IAAqB3E,OAAOC,MAAP,CAAcuH,SAAS7C,QAAvB,EAAiC5E,MAA1D,EAAkE;AAChE4H,iBAAO9C,EAAP,CAAU,OAAV,EAAmB,UAACrD,CAAD;AAAA,mBAAO,uBAAa,OAAKzE,OAAlB,EAA2B0G,IAA3B,CAAgCjC,CAAhC,EAAmC,IAAnC,EAAyC4D,OAAzC,EAAP;AAAA,WAAnB;AACD;AACD,YAAIoC,SAASK,KAAT,IAAkB7H,OAAOC,MAAP,CAAcuH,SAASK,KAAvB,EAA8B9H,MAA9B,GAAuC,CAA7D,EAAgE;AAC9D,cAAI+H,UAAUJ,MAAM/F,MAAN,CAAa,IAAb,CAAd;AACA,cAAIoG,mBAAmB,KAAKC,QAAL,CAAchI,OAAOC,MAAP,CAAcuH,SAASK,KAAvB,CAAd,CAAvB;AACA,eAAKI,QAAL,CAAcH,OAAd,EAAuBC,gBAAvB;AACD;AACF;AACF;;;6BAEQG,K,EAAO;AACd,UAAIC,YAAY,CAAhB;AACA,aAAO;AACLV,cAAM,gBAAW;AACf,iBAAO,KAAKF,OAAL,KAAiBW,MAAMC,WAAN,CAAjB,GAAsC/K,SAA7C;AACD,SAHI;AAILmK,iBAAS,mBAAW;AAClB,iBAAOY,YAAYD,MAAMnI,MAAzB;AACD;AANI,OAAP;AAQD;;;+BAEU,CAAE;;;;;;kBAlCMsH,I;;;;;;;;;;;;;;;;;;ACHrB;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEqBe,e,WAOlB,6BAAS,UAAT,C;;;AALD,iCAA4D;AAAA,4BAA9CxL,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,kIACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;;AAE1D,UAAK6H,QAAL,GAAgB7H,eAAhB;AAF0D;AAG3D;;;;8BAGS;AAAA;;AACR,UAAIkD,OAAOc,IAAP,CAAY,KAAK1B,IAAL,CAAUuF,QAAV,CAAmB0D,YAA/B,EAA6CtI,MAAjD,EAAyD;AACvD,YAAIhD,UAAU,KAAKA,OAAnB;AACAA,gBAAQD,eAAR,GAA0B,UAACwL,WAAD;AAAA,iBAAiB,OAAKC,QAAL,CAAc1G,IAAd,SAAyByG,WAAzB,CAAjB;AAAA,SAA1B;AACA,eAAO,4BAAsBvL,OAAtB,EAA+B0G,IAA/B,CAAoC,KAAKrE,IAAzC,EAA+C,IAA/C,EAAqDjC,MAArD,EAAP;AACD;;AAED;AACA,WAAKoL,QAAL,CAAc,KAAKnJ,IAAL,CAAUuF,QAAxB;AAED;;;6BAEQ6D,U,EAAY;AACnB,WAAK7D,QAAL,cAAyB8D,KAAKC,SAAL,CAAeD,KAAKC,SAAL,CAAeF,UAAf,CAAf,CAAzB;AACD;;;;;kBAtBkBJ,e;;;;;;;;;;;;;;;;ACJrB;;;;;;;;;;;;AAEA;;IAEqBO,K;;;AAEnB,uBAA4D;AAAA,4BAA9C/L,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,8GACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;;AAE1D,UAAK8L,OAAL,GAAexL,SAAf;AACA,UAAKyL,MAAL,GAAczL,SAAd;AAH0D;AAI3D;;;;kCAEa;AACZ;AACA,WAAKwL,OAAL,GAAe/K,GAAGC,MAAH,CAAU,MAAV,EAAkB6D,MAAlB,CAAyB,KAAzB,EAAgCrD,IAAhC,CAAqC,OAArC,EAA8C,gBAA9C,CAAf;AACA,WAAKuK,MAAL,GAAchL,GAAGC,MAAH,CAAU,MAAV,EAAkB6D,MAAlB,CAAyB,KAAzB,EAAgCrD,IAAhC,CAAqC,OAArC,EAA8C,QAA9C,CAAd;AACD;;;+BAEU;AACT,WAAKsK,OAAL,CAAahH,MAAb;AACA,WAAKpE,OAAL,CAAaoE,MAAb;AACA,WAAKiH,MAAL,CAAYjH,MAAZ;AACA,aAAO,KAAP;AACD;;;;;;kBAnBkB+G,K;;;;;;;;;;;;QCALG,6B,GAAAA,6B;QAeAC,e,GAAAA,e;;AAnBhB;;;;;;AAEA;;AAEO,SAASD,6BAAT,CAAuCE,OAAvC,EAAgD;AACrD;AACA,MAAI,CAACA,OAAL,EAAc;AACd,MAAI;AACFA,YAAQhG,GAAR,CAAY,UAACiG,CAAD,EAAO;AACjBC,cAAQC,gBAAR,CAAyBC,eAAzB,CAAyCH,CAAzC;AACD,KAFD;AAGD,GAJD,CAIE,OAAO9B,CAAP,EAAU;AACV,QAAIA,EAAErI,IAAF,KAAW,gBAAf,EAAiC;AAC/B,6BAAasF,IAAb,CAAkB,2CAAlB,EAA+D+C,CAA/D;AACD;AACF;AACF;;AAED;AACO,SAAS4B,eAAT,CAAyBlF,IAAzB,EAA+B;AACpCA,SAAOA,KAAKwF,OAAL,CAAa,IAAb,EAAmB,OAAnB,EAA4BA,OAA5B,CAAoC,IAApC,EAA0C,MAA1C,EAAkDA,OAAlD,CAA0D,IAA1D,EAAgE,MAAhE,CAAP;AACA,SAAOxF,KAAKwF,OAAL,CAAa,qGAAb,EAAoH,UAASC,KAAT,EAAgB;AACzI,QAAIC,MAAM,QAAV;AACA,QAAI,KAAKC,IAAL,CAAUF,KAAV,CAAJ,EAAsB;AACpB,UAAI,KAAKE,IAAL,CAAUF,KAAV,CAAJ,EAAsB;AACpBC,cAAM,KAAN;AACD,OAFD,MAEO;AACLA,cAAM,QAAN;AACD;AACF,KAND,MAMO,IAAI,aAAaC,IAAb,CAAkBF,KAAlB,CAAJ,EAA8B;AACnCC,YAAM,SAAN;AACD,KAFM,MAEA,IAAI,OAAOC,IAAP,CAAYF,KAAZ,CAAJ,EAAwB;AAC7BC,YAAM,MAAN;AACD;AACD,WAAO,kBAAkBA,GAAlB,GAAwB,IAAxB,GAA+BD,KAA/B,GAAuC,SAA9C;AACD,GAdM,CAAP;AAeD,C;;;;;;;;;;;;;;;;;;ACpCD;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBG,O,WAMlB,8B;;;AAJD,yBAA4D;AAAA,4BAA9C7M,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,6GACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;;AAEP,WAAKU,OAAL,GAAe,KAAKkM,UAAL,CAAgB5L,MAAhB,CAAuB,2BAAvB,CAAf;AACA;AACA,UAAI,CAAC,KAAKN,OAAL,CAAaE,IAAb,EAAL,EAA0B;AACxB,aAAKF,OAAL,GAAe,KAAKkM,UAAL,CAAgB/H,MAAhB,CAAuB,KAAvB,EACZrD,IADY,CACP,OADO,EACE,uBADF,CAAf;AAED;;AAED;AACA,UAAI,KAAKd,OAAL,CAAakE,SAAb,CAAuB,GAAvB,EAA4BhE,IAA5B,EAAJ,EAAwC;AACtC;AACD;;AAED,UAAIiM,MAAM9L,GAAG+L,KAAH,CAAS,KAAKC,SAAL,CAAenM,IAAf,EAAT,CAAV;;AAEA;AACA,WAAKF,OAAL,CAAauE,KAAb,CAAmB,MAAnB,EAA4B4H,IAAI,CAAJ,IAAS,EAAV,GAAgB,IAA3C,EAAiD5H,KAAjD,CAAuD,KAAvD,EAA+D4H,IAAI,CAAJ,IAAS,EAAV,GAAgB,IAA9E;;AAEA,UAAIG,QAAQ,KAAKtM,OAAL,CAAamE,MAAb,CAAoB,KAApB,EAA2BrD,IAA3B,CAAgC,OAAhC,EAAyC,gBAAzC,EACTqD,MADS,CACF,KADE,EACKrD,IADL,CACU,OADV,EACmB,cADnB,EAETqD,MAFS,CAEF,KAFE,EAEKrD,IAFL,CAEU,OAFV,EAEmB,mBAFnB,CAAZ;AAGA,UAAIyL,OAAO,IAAX;AACA/J,aAAOc,IAAP,CAAY,KAAK1B,IAAjB,EAAuB4D,GAAvB,CAA2B,UAAS7C,GAAT,EAAc;AACvC,YAAI6J,MAAMF,MAAMnI,MAAN,CAAa,KAAb,EAAoBrD,IAApB,CAAyB,OAAzB,EAAkC,kBAAlC,CAAV;AACA0L,YAAIrI,MAAJ,CAAW,KAAX,EAAkBrD,IAAlB,CAAuB,OAAvB,EAAgC,mBAAhC,EAAqD0D,IAArD,CAA0D+H,KAAK3K,IAAL,CAAUe,GAAV,EAAe8B,KAAzE;AACA+H,YAAIrI,MAAJ,CAAW,KAAX,EAAkBrD,IAAlB,CAAuB,OAAvB,EAAgC,mBAAhC,EAAqD0D,IAArD,CAA0D+H,KAAK3K,IAAL,CAAUe,GAAV,EAAe6B,IAAzE;AACD,OAJD;;AAMA;AACA,WAAKxE,OAAL,CAAauE,KAAb,CAAmB,SAAnB,EAA8B,OAA9B;;AAEA,aAAO,IAAP;AACD;;;+BAEU;AACT,UAAI,KAAKvE,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAakE,SAAb,CAAuB,GAAvB,EAA4BE,MAA5B;AACA,aAAKpE,OAAL,CAAauE,KAAb,CAAmB,SAAnB,EAA8B,IAA9B;AACD;AACF;;;;;kBA/CkB0H,O;;;;;;;;;;;;;;;;;;ACLrB;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;AAEA,IAAIQ,aAAa,EAAjB;;AAEA;;;;;;;;;;;;IAYqBC,M,WAqBlB,6BAAS,QAAT,C;;;AAnBD;;;;;;;AAOA,wBAA4D;AAAA,4BAA9CtN,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,gHACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;;AAE1D,QAAI,CAACe,EAAL,EAAS;AACP,YAAM,IAAI+F,KAAJ,CAAU,4EAAV,CAAN;AACD;AAJyD;AAK3D;;AAED;;;;;;;;;6BAMS;AACP,UAAIuG,QAAQ,oBAAU,KAAKpN,OAAf,EAAwB0G,IAAxB,CAA6B,KAAKrE,IAAlC,EAAwCjC,MAAxC,EAAZ;AACA8M,iBAAW,KAAK7K,IAAL,CAAUwB,MAAV,CAAiB+F,EAA5B,IAAkCwD,KAAlC;AACA,aAAOA,MAAM3M,OAAN,CAAcE,IAAd,EAAP;AACD;;;6BAEeiJ,E,EAAI;AAClB,aAAOsD,WAAWtD,EAAX,CAAP;AACD;;;;;kBA9BkBuD,M;;;AAiCrB,IAAI;AACFE,UAAQF,MAAR,GAAiBG,OAAOH,MAAP,GAAgBA,MAAjC;AACA;AACA,MAAII,YAAYD,OAAOE,QAAvB;AACAF,SAAOE,QAAP,GAAkB,YAAW;AAC3B;AACAvK,WAAOC,MAAP,CAAcgK,UAAd,EAA0B5I,OAA1B,CAAkC,UAAS8I,KAAT,EAAgB;AAChDA,YAAMvJ,MAAN,CAAa4J,SAAb;AACD,KAFD;AAGA;AACA,QAAI,OAAOF,SAAP,KAAqB,UAAzB,EAAqC;AACnCA;AACD;AACF,GATD;AAUD,CAdD,CAcE,OAAOnD,CAAP,EAAU;AACViD,UAAQF,MAAR,GAAiBA,MAAjB;AACD,C;;;;;;;;;;;;;;;;;;ACrED;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBO,K,WAWlB,6BAAS,QAAT,C;;;AATD,uBAA4D;AAAA,4BAA9C7N,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,8GACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;;AAE1D,UAAK8D,MAAL,GAAc,qBAAW,MAAK7D,OAAhB,CAAd;AACA,UAAK2N,IAAL,GAAY,uBAAa,MAAK3N,OAAlB,CAAZ;AACA,UAAKgI,QAAL,GAAgB,sBAAY,MAAKhI,OAAjB,CAAhB;AACA,UAAK6H,OAAL,GAAe,6BAAmB,MAAK7H,OAAxB,CAAf;AACA,UAAK4N,GAAL,CAAS,MAAK5F,QAAd,EAAwB4F,GAAxB,CAA4B,MAAKD,IAAjC,EAAuCC,GAAvC,CAA2C,MAAK/J,MAAhD,EAAwD+J,GAAxD,CAA4D,MAAK/F,OAAjE;AAN0D;AAO3D;;;;6BAGQ;AACP,UAAIvG,SAAS,KAAKtB,OAAL,CAAaF,QAA1B;;AAEA,UAAM+N,qBAAmB,KAAKxL,IAAL,CAAUwB,MAAV,CAAiB+F,EAA1C;AACA,WAAKnJ,OAAL,GAAeK,GAAGC,MAAH,UAAiB8M,OAAjB,CAAf;AACA;AACA,UAAI,CAAC,KAAKpN,OAAL,CAAaE,IAAb,EAAL,EAA0B;AACxB;AACA,aAAKJ,MAAL,CAAYC,KAAZ,sBAAqCqN,OAArC;AACA,aAAKpN,OAAL,GAAea,OAAOsD,MAAP,CAAc,KAAd,EAAqBrD,IAArB,CAA0B,OAA1B,EAAmC,QAAnC,EAA6CA,IAA7C,CAAkD,IAAlD,EAAwDsM,OAAxD,CAAf;AACD;;AAED;AACA,UAAI,CAAC,KAAKpN,OAAL,CAAaE,IAAb,EAAL,EAA0B;AACxB,cAAM,IAAIkG,KAAJ,4CAAmDgH,OAAnD,0BAAN;AACD;;AAED,WAAKtN,MAAL,CAAYC,KAAZ,qBAAoCqN,OAApC;;AAEA,WAAKC,cAAL;;AAEA,aAAO,IAAP;AACD;;;+BAEU,CAAE;;;;;kBApCMJ,K;;;;;;;;;;;;;;;;;ACTrB;;;IAGqBK,S;;;;;;;;;AAEnB;;;;;;0BAMaC,K,EAAwB;AAAA,UAAjBjH,OAAiB,uEAAP,KAAO;;AACnC,UAAI,CAACiH,KAAL,EAAY;AACZA,cAAQ,OAAOA,KAAP,KAAiB,QAAjB,GAA4BtC,KAAKC,SAAL,CAAeqC,KAAf,CAA5B,GAAoDA,KAA5D;AACAA,cAAQA,MAAM1B,OAAN,CAAc,qBAAd,EAAqC,EAArC,CAAR;AACA,UAAI2B,YAAY,aAAhB;AACA,UAAI1B,QAAQ0B,UAAUC,IAAV,CAAeF,KAAf,CAAZ;AACA,UAAIzB,KAAJ,EAAW;AACTyB,gBAAQzB,MAAM,CAAN,CAAR;AACA,YAAI;AACF,cAAIzF,OAAO4E,KAAK1E,KAAL,CAAWgH,KAAX,CAAX;AACA,iBAAOlH,KAAKqH,IAAL,KAAcJ,UAAUK,IAAxB,IAAgCrH,OAAhC,GAA0CD,IAA1C,GAAiDzG,SAAxD;AACD,SAHD,CAGE,OAAO+J,CAAP,EAAU;AACV;AACAlD,kBAAQI,KAAR,CAAc8C,CAAd;AACA;AACD;AACF;AACF;;AAED;;;;;;wBAGkB;AAChB,aAAO,6BAAP;AACD;;;;;;kBAhCkB2D,S;;;;;;;;;;;;;;;;;;ACHrB;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBM,M,WASlB,6BAAS,QAAT,C;;;AAPD,wBAA4D;AAAA,4BAA9CxO,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,gHACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;;AAE1D,UAAKuO,KAAL,GAAa,2BAAiB,MAAKtO,OAAtB,CAAb;AACA,UAAKuO,YAAL,GAAoB,2BAAiB,MAAKvO,OAAtB,CAApB;AACA,UAAK4N,GAAL,CAAS,MAAKU,KAAd,EAAqBV,GAArB,CAAyB,MAAKW,YAA9B;AAJ0D;AAK3D;;;;6BAGQ;AACP,UAAIxD,gBAAJ;AACA,UAAIyD,OAAO1N,GAAG0N,IAAH,EAAX;AACA,UAAIxB,OAAO,IAAX;;AAEA,eAASyB,UAAT,CAAoBC,UAApB,EAAgCC,UAAhC,EAA4CC,KAA5C,EAAmD;AACjD5B,aAAKvM,OAAL,CAAaqE,IAAb,CAAkB0J,KAAKK,SAAvB,EAAkC/N,GAAGgO,YAAH,CAAgBC,SAAhB,CAA0BL,UAA1B,EAAsCC,UAAtC,EAAkDC,KAAlD,CAAwDA,KAAxD,EAA+DA,KAA/D,CAAlC;AACD;;AAED,eAASI,MAAT,GAAkB;AAChBjE,gBAAQxJ,IAAR,CAAa,WAAb,EAA0BT,GAAGmH,KAAH,CAAS4G,SAAnC;AACD;;AAED,eAASI,OAAT,GAAmB;AACjB,YAAInO,GAAGmH,KAAH,CAASiH,gBAAb,EAA+B;AAC7BpO,aAAGmH,KAAH,CAASkH,eAAT;AACD;AACF;;AAED,eAAS1B,SAAT,GAAqB;AACnB;AACA,YAAIT,KAAK3K,IAAL,CAAUwB,MAAV,CAAiB4J,SAArB,EAAgC;AAC9B,cAAI2B,SAASrE,QAAQpK,IAAR,GAAe0O,OAAf,EAAb;;AAEA,cAAIC,eAAetC,KAAKvM,OAAL,CAAaE,IAAb,GAAoBa,qBAApB,EAAnB;AAAA,cACE+N,YAAYD,aAAapO,KAAb,GAAqBoO,aAAalO,IADhD;AAAA,cAEEoO,aAAaF,aAAanO,MAAb,GAAsBmO,aAAarO,GAFlD;;AAIA,cAAII,QAAQ,CAAC+N,OAAO/N,KAApB;AAAA,cACEK,SAAS,CAAC0N,OAAO1N,MADnB;;AAGA,cAAIL,UAAU,CAAV,IAAeK,WAAW,CAA9B,EAAiC;;AAEjC,cAAI+N,OAAOL,OAAOjL,CAAP,GAAW9C,QAAQ,CAA9B;AAAA,cACEqO,OAAON,OAAOhL,CAAP,GAAW1C,SAAS,CAD7B;;AAGA,cAAIkN,QAAQ,MAAMe,KAAKnL,GAAL,CAASnD,QAAQkO,SAAjB,EAA4B7N,SAAS8N,UAArC,CAAlB;AACA,cAAId,aAAaa,YAAY,CAAZ,GAAgBX,QAAQa,IAAzC;AAAA,cACEd,aAAaa,aAAa,CAAb,GAAiBZ,QAAQc,IADxC;;AAGA3E,kBAAQ6E,UAAR,GACGC,QADH,CACY7C,KAAKtM,kBADjB,EAEGa,IAFH,CAEQ,WAFR,iBAEkCmN,UAFlC,SAEgDC,UAFhD,eAEoEC,KAFpE,SAE6EA,KAF7E,QAGG9G,EAHH,CAGM,KAHN,EAGa;AAAA,mBAAM2G,WAAWC,UAAX,EAAuBC,UAAvB,EAAmCC,KAAnC,CAAN;AAAA,WAHb;AAID;AACF;;AAED,UAAMkB,uBAAqB,KAAKzN,IAAL,CAAUwB,MAAV,CAAiB+F,EAA5C;AACA,WAAKnJ,OAAL,GAAeK,GAAGC,MAAH,UAAiB+O,QAAjB,CAAf;AACA;AACA,UAAI,CAAC,KAAKrP,OAAL,CAAaE,IAAb,EAAL,EAA0B;AACxB;AACA,aAAKJ,MAAL,CAAYC,KAAZ,uBAAsCsP,QAAtC;AACA,aAAKrP,OAAL,GAAe,KAAKa,MAAL,CAAYsD,MAAZ,CAAmB,KAAnB,EACZrD,IADY,CACP,OADO,EACE,eADF,EAEZA,IAFY,CAEP,IAFO,EAEDuO,QAFC,CAAf;AAGD;;AAED;AACA,UAAI,CAAC,KAAKrP,OAAL,CAAaE,IAAb,EAAL,EAA0B;AACxB,cAAM,IAAIkG,KAAJ,6CAAoDiJ,QAApD,0BAAN;AACD;;AAED,WAAKrP,OAAL,CAAac,IAAb,CAAkB,OAAlB,EAA2B,KAAKc,IAAL,CAAUwB,MAAV,CAAiBxC,KAA5C,EAAmDE,IAAnD,CAAwD,QAAxD,EAAkE,KAAKc,IAAL,CAAUwB,MAAV,CAAiBnC,MAAnF;;AAEAqJ,gBAAU,KAAKtK,OAAL,CAAaM,MAAb,CAAoB,kBAApB,CAAV;;AAEA,UAAI,CAACgK,QAAQpK,IAAR,EAAL,EAAqB;AACnBoK,kBAAU,KAAKtK,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,gBAAvC,CAAV;AACAiN,aAAK1G,EAAL,CAAQ,MAAR,EAAgBkH,MAAhB;AACA;AACA,aAAKvO,OAAL,CAAaqE,IAAb,CAAkB0J,IAAlB,EAAwB1G,EAAxB,CAA2B,eAA3B,EAA4C,IAA5C;AACD;;AAED,WAAKrH,OAAL,CAAaqH,EAAb,CAAgB,OAAhB,EAAyBmH,OAAzB,EAAkC,IAAlC;;AAEA,WAAKxO,OAAL,CAAagN,SAAb,GAAyB,KAAKA,SAAL,GAAiBA,SAA1C;;AAEA,WAAKlN,MAAL,CAAYC,KAAZ,sBAAqCsP,QAArC;;AAEA,WAAKhC,cAAL;;AAEA/D,iBAAW,YAAM;AACf0D;AACD,OAFD,EAEG,KAAK/M,kBAFR;;AAIA,aAAO,IAAP;AACD;;;+BAEU,CAAE;;;;;kBAnGM2N,M;;;;;;;;;;;;;;;;;;ACPrB;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEqB3G,K,WAMlB,6BAAS,cAAT,C;;;AAJD,uBAA4D;AAAA,4BAA9C7H,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,yGACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;;AAEP,UAAIU,UAAUJ,SAAd;AACA,cAAQ,KAAKgC,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuBhG,IAA/B;AACA,aAAK,MAAL;AACE7H,oBAAU,wBAAc,KAAKT,OAAnB,EAA4B0G,IAA5B,CAAiC,KAAKrE,IAAtC,EAA4CjC,MAA5C,EAAV;AACA;AACF;AACEK,oBAAU,2BAAiB,KAAKT,OAAtB,EAA+B0G,IAA/B,CAAoC,KAAKrE,IAAzC,EAA+CjC,MAA/C,EAAV;AALF;;AAQA,aAAOK,OAAP;AACD;;;+BAEU,CAAE;;;;;kBArBMiH,K;;;;;;;;;;;;;;;;;;ACLrB;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBqI,S,WAMlB,sC;;;AAJD,2BAA4D;AAAA,4BAA9ClQ,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,iHACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;;AAEP,UAAI4F,IAAI,CAAR;AAAA,UACEqK,aADF;;AAGAA,aAAOlP,GAAGmP,SAAH,CAAa,KAAKC,QAAlB,EAA4B;AAAA,eAAKzL,EAAE0L,QAAP;AAAA,OAA5B,CAAP;AACAH,WAAKI,EAAL,GAAU,KAAK1O,MAAL,GAAc,CAAxB;AACAsO,WAAKK,EAAL,GAAU,CAAV;;AAEA;AACA,UAAIC,aAAa,CAAC,CAAD,CAAjB;AACA,UAAIC,aAAa,SAAbA,UAAa,CAAUhJ,KAAV,EAAiBiJ,CAAjB,EAAoB;;AAEnC,YAAIA,EAAEL,QAAF,IAAcK,EAAEL,QAAF,CAAWnN,MAAX,GAAoB,CAAtC,EAAyC;AACvC,cAAIsN,WAAWtN,MAAX,IAAqBuE,QAAQ,CAAjC,EAAoC+I,WAAW9J,IAAX,CAAgB,CAAhB;;AAEpC8J,qBAAW/I,QAAQ,CAAnB,KAAyBiJ,EAAEL,QAAF,CAAWnN,MAApC;AACAwN,YAAEL,QAAF,CAAW7L,OAAX,CAAmB,UAAUG,CAAV,EAAa;AAC9B8L,uBAAWhJ,QAAQ,CAAnB,EAAsB9C,CAAtB;AACD,WAFD;AAGD;AACF,OAVD;AAWA8L,iBAAW,CAAX,EAAcP,IAAd;AACA,UAAIS,YAAY3P,GAAG0D,GAAH,CAAO8L,UAAP,IAAqB,GAArC;;AAEA,UAAII,UAAU5P,GAAG6P,IAAH,GAAUC,IAAV,CAAe,CAACH,SAAD,EAAY,KAAKpP,KAAjB,CAAf,CAAd;;AAEA,UAAI,KAAKgB,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuBuC,SAA3B,EAAsC;AACpCb,aAAKG,QAAL,CAAc7L,OAAd,CAAsBwM,QAAtB;AACD;;AAEDC,aAAOjM,IAAP,CAAY,IAAZ,EAAkBkL,IAAlB;;AAEA,eAASc,QAAT,CAAkBrM,CAAlB,EAAqB;AACnB,YAAIA,EAAE0L,QAAN,EAAgB;AACd1L,YAAEuM,SAAF,GAAcvM,EAAE0L,QAAhB;AACA1L,YAAEuM,SAAF,CAAY1M,OAAZ,CAAoBwM,QAApB;AACArM,YAAE0L,QAAF,GAAa,IAAb;AACD;AACF;;AAED,eAASY,MAAT,CAAgBE,MAAhB,EAAwB;AAAA;;AACtB,YAAIf,WAAWQ,QAAQV,IAAR,CAAf;;AAEA,YAAIkB,QAAQhB,SAASiB,WAAT,EAAZ;AAAA,YACEC,QAAQlB,SAASiB,WAAT,GAAuB3L,KAAvB,CAA6B,CAA7B,CADV;;AAGA0L,cAAM5M,OAAN,CAAc;AAAA,iBAAKG,EAAEL,CAAF,GAAMK,EAAE4M,KAAF,GAAU,GAArB;AAAA,SAAd;;AAEA,YAAIC,YAAY,KAAK7Q,OAAL,CAAakE,SAAb,CAAuB,gBAAvB,CAAhB;;AAEA,YAAI,CAAC2M,UAAU3Q,IAAV,EAAL,EAAuB;AACrB2Q,sBAAY,KAAK7Q,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,cAAvC,CAAZ;AACD;;AAED,YAAIgQ,OAAOD,UAAU3M,SAAV,CAAoB,kBAApB,EACRtC,IADQ,CACH+O,KADG,EACI;AAAA,iBAAK3M,EAAEmF,EAAF,KAASnF,EAAEmF,EAAF,GAAO,EAAEjE,CAAlB,CAAL;AAAA,SADJ,CAAX;;AAGA,YAAI6L,YAAYD,KAAK7L,KAAL,GACbd,MADa,CACN,MADM,EACErD,IADF,CACO,OADP,EACgB,aADhB,EAEbA,IAFa,CAER,GAFQ,EAEH,YAAM;AACf,cAAIkQ,IAAI,EAACtN,GAAG8M,OAAOb,EAAX,EAAehM,GAAG6M,OAAOZ,EAAzB,EAAR;AACA,iBAAOqB,SAASD,CAAT,EAAYA,CAAZ,CAAP;AACD,SALa,CAAhB;;AAOAD,kBAAU5L,KAAV,CAAgB2L,IAAhB,EACG3B,UADH,GACgBC,QADhB,CACyB,KAAKnP,kBAD9B,EACkDa,IADlD,CACuD,GADvD,EAC4D;AAAA,iBAAKmQ,SAASjN,CAAT,EAAYA,EAAEnD,MAAd,CAAL;AAAA,SAD5D;;AAGAiQ,aAAK9L,IAAL,GAAYmK,UAAZ,GAAyBC,QAAzB,CAAkC,KAAKnP,kBAAvC,EACGa,IADH,CACQ,GADR,EACa,YAAM;AACf,cAAIkQ,IAAI,EAACtN,GAAG8M,OAAO9M,CAAX,EAAcC,GAAG6M,OAAO7M,CAAxB,EAAR;AACA,iBAAOsN,SAASD,CAAT,EAAYA,CAAZ,CAAP;AACD,SAJH,EAIK5M,MAJL;;AAMAyM,kBAAU3M,SAAV,CAAoB,kBAApB,EACGK,KADH,CACS,MADT,EACiB,MADjB,EAEGA,KAFH,CAES,QAFT,EAEmB,MAFnB,EAGGA,KAHH,CAGS,cAHT,EAGyB,KAHzB;;AAKAkM,cAAM5M,OAAN,CAAc,UAACG,CAAD,EAAO;AACnBA,YAAE2L,EAAF,GAAO3L,EAAEN,CAAT;AACAM,YAAE4L,EAAF,GAAO5L,EAAEL,CAAT;AACD,SAHD;;AAKA,iBAASsN,QAAT,CAAkBC,CAAlB,EAAqBlN,CAArB,EAAwB;AACtB,wBAAYkN,EAAEvN,CAAd,SAAmBuN,EAAExN,CAArB,wBACQ,CAACwN,EAAEvN,CAAF,GAAMK,EAAEL,CAAT,IAAc,CADtB,SAC2BuN,EAAExN,CAD7B,yBAEQ,CAACwN,EAAEvN,CAAF,GAAMK,EAAEL,CAAT,IAAc,CAFtB,SAE2BK,EAAEN,CAF7B,yBAGQM,EAAEL,CAHV,SAGeK,EAAEN,CAHjB;AAID;;AAED,YAAIyN,YAAY,KAAKnR,OAAL,CAAakE,SAAb,CAAuB,gBAAvB,CAAhB;;AAEA,YAAI,CAACiN,UAAUjR,IAAV,EAAL,EAAuB;AACrBiR,sBAAY,KAAKnR,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,cAAvC,CAAZ;AACD;;AAED,YAAIZ,OAAOiR,UAAUjN,SAAV,CAAoB,eAApB,EACRtC,IADQ,CACH6O,KADG,EACI;AAAA,iBAAKzM,EAAEmF,EAAF,KAASnF,EAAEmF,EAAF,GAAO,EAAEjE,CAAlB,CAAL;AAAA,SADJ,CAAX;;AAGA,YAAIkM,YAAYlR,KAAK+E,KAAL,GAAad,MAAb,CAAoB,GAApB,EACbrD,IADa,CACR,OADQ,EACC,aADD,EAEbA,IAFa,CAER,WAFQ,EAEK;AAAA,gCAAmB0P,OAAOZ,EAA1B,SAAgCY,OAAOb,EAAvC;AAAA,SAFL,CAAhB;;AAIAyB,kBAAUjN,MAAV,CAAiB,MAAjB,EACGrD,IADH,CACQ,GADR,EACaT,GAAGgR,MAAH,GAAYxJ,IAAZ,CAAiB;AAAA,iBAAK,gBAAMyJ,SAAN,CAAgBtN,EAAEpC,IAAF,CAAOiG,IAAvB,CAAL;AAAA,SAAjB,EAAoDsI,IAApD,CAAyD;AAAA,iBAAKnM,EAAEpC,IAAF,CAAOuO,IAAP,GAAc,GAAnB;AAAA,SAAzD,CADb,EAEGrP,IAFH,CAEQ,OAFR,EAEiB,eAFjB;;AAIAsQ,kBAAUjN,MAAV,CAAiB,MAAjB,EACGrD,IADH,CACQ,OADR,EACiB,cADjB,EAEG0D,IAFH,CAEQ;AAAA,iBAAKR,EAAEpC,IAAF,CAAO6C,KAAZ;AAAA,SAFR,EAGG3D,IAHH,CAGQ,GAHR,EAGc,YAAW;AACrB,cAAIyI,QAAQ,KAAKqF,OAAL,EAAZ;AACA,iBAAO,EAAErF,MAAM3I,KAAN,GAAc,CAAhB,CAAP;AACD,SANH,EAOG2D,KAPH,CAOS,QAPT,EAOmB;AAAA,iBAAKP,EAAE0L,QAAF,IAAc1L,EAAEuM,SAAhB,GAA4B,SAA5B,GAAwC,SAA7C;AAAA,SAPnB;;AASA,YAAIgB,aAAaH,UAAUjM,KAAV,CAAgBjF,IAAhB,CAAjB;;AAEAqR,mBAAWpC,UAAX,GACGC,QADH,CACY,KAAKnP,kBADjB,EAEGa,IAFH,CAEQ,WAFR,EAEqB;AAAA,gCAAkBkD,EAAEL,CAApB,SAAyBK,EAAEN,CAA3B;AAAA,SAFrB;;AAIAxD,aAAK8E,IAAL,GAAYmK,UAAZ,GAAyBC,QAAzB,CAAkC,KAAKnP,kBAAvC,EACGa,IADH,CACQ,WADR,EACqB;AAAA,gCAAmB0P,OAAO7M,CAA1B,SAA+B6M,OAAO9M,CAAtC;AAAA,SADrB,EAEGU,MAFH;;AAIA+M,kBAAUjN,SAAV,CAAoB,oBAApB,EACGK,KADH,CACS,MADT,EACiB;AAAA,iBAAKP,EAAE0L,QAAF,IAAc1L,EAAEuM,SAAhB,GAA4B,gBAA5B,GAA+C,gBAAMnL,MAAN,CAAapB,EAAEpC,IAAF,CAAO4P,KAAP,GAAe,CAA5B,CAApD;AAAA,SADjB,EAEGjN,KAFH,CAES,QAFT,EAEmB;AAAA,iBAAKP,EAAE0L,QAAF,IAAc1L,EAAEuM,SAAhB,GAA4B,SAA5B,GAAwC,SAA7C;AAAA,SAFnB;;AAIArQ,eAAOiR,UAAUjN,SAAV,CAAoB,eAApB,CAAP;;AAEA,YAAIhE,KAAKA,IAAL,EAAJ,EAAiB;AACf,eAAKuR,YAAL,CAAkBvR,IAAlB;;AAEA,cAAIwR,cAAcxR,KAAKmH,EAAL,CAAQ,OAAR,CAAlB;AACAnH,eAAKmH,EAAL,CAAQ,OAAR,EAAiB,UAACrD,CAAD,EAAO;AACxB;AACE0N,wBAAYrN,IAAZ,SAAuBL,EAAEpC,IAAzB;AACA;AACA+P,kBAAMtN,IAAN,SAAiBL,CAAjB;AACD,WALD;AAMD;;AAED;AACA,YAAIuI,OAAO,IAAX;;AAEA,iBAASoF,KAAT,CAAe3N,CAAf,EAAkB;AAChB,cAAIA,EAAE0L,QAAN,EAAgB;AACd1L,cAAEuM,SAAF,GAAcvM,EAAE0L,QAAhB;AACA1L,cAAE0L,QAAF,GAAa,IAAb;AACD,WAHD,MAGO;AACL1L,cAAE0L,QAAF,GAAa1L,EAAEuM,SAAf;AACAvM,cAAEuM,SAAF,GAAc,IAAd;AACD;AACDD,iBAAOjM,IAAP,CAAYkI,IAAZ,EAAkBvI,CAAlB;AACD;;AAEDsF,mBAAW,YAAM;AACf,iBAAKzI,MAAL,CAAYmM,SAAZ;AACD,SAFD,EAEG,KAAK/M,kBAFR;AAGD;;AAED,aAAO,IAAP;AAED;;;+BAEU,CAAE;;AAEb;;;;;;;wBAIe;AACb,UAAI2R,cAAc,KAAKhQ,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuB4C,KAAvB,GAA+BjO,OAAOC,MAAP,CAAc,KAAKb,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuB4C,KAArC,CAA/B,GAA6E,EAA/F;AACA,UAAIoB,UAAUD,YAAYE,MAAZ,CAAmB,UAAUtM,GAAV,EAAetF,IAAf,EAAqB;AACpDsF,YAAItF,KAAKiJ,EAAT,IAAejJ,IAAf;AACA,eAAOsF,GAAP;AACD,OAHa,EAGX,EAHW,CAAd;AAIA,UAAIiK,WAAW,EAAf;AACAmC,kBAAY/N,OAAZ,CAAoB,UAAS3D,IAAT,EAAe;AACjC,YAAIW,SAASgR,QAAQ3R,KAAKW,MAAb,CAAb;AACA,YAAIA,MAAJ,EAAY;AACV,WAACA,OAAO6O,QAAP,KAAoB7O,OAAO6O,QAAP,GAAkB,EAAtC,CAAD,EAA4C3J,IAA5C,CAAiD7F,IAAjD;AACD,SAFD,MAEO;AACLuP,mBAAS1J,IAAT,CAAc7F,IAAd;AACD;AACF,OAPD;AAQA,aAAOuP,SAAS,CAAT,CAAP;AACD;;;;;kBArMkBH,S;;;;;;;;;;;;;;;;;;ACLrB;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqByC,W,WAMlB,6BAAS,OAAT,C;;;AAJD,6BAA4D;AAAA,4BAA9C3S,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,qHACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;AAAA;;AAEPe,SAAGmH,KAAH,CAASwK,cAAT;;AAEA,WAAKhS,OAAL,GAAe,KAAKkM,UAAL,CAAgB5L,MAAhB,CAAuB,gCAAvB,CAAf;AACA;AACA,UAAI,CAAC,KAAKN,OAAL,CAAaE,IAAb,EAAL,EAA0B;AACxB,aAAKF,OAAL,GAAe,KAAKkM,UAAL,CAAgB/H,MAAhB,CAAuB,KAAvB,EACZrD,IADY,CACP,OADO,EACE,4BADF,CAAf;AAED;;AAED,UAAIqL,MAAM9L,GAAG+L,KAAH,CAAS,KAAKC,SAAL,CAAenM,IAAf,EAAT,CAAV;;AAEA,WAAKF,OAAL,CAAauE,KAAb,CAAmB,MAAnB,EAA2B4H,IAAI,CAAJ,IAAS,CAAT,GAAa,IAAxC,EAA8C5H,KAA9C,CAAoD,KAApD,EAA2D4H,IAAI,CAAJ,IAAS,CAAT,GAAa,IAAxE;;AAEA;AACA,WAAKnM,OAAL,CAAauE,KAAb,CAAmB,SAAnB,EAA8B,OAA9B;;AAEA;AACA,UAAI,KAAKvE,OAAL,CAAakE,SAAb,CAAuB,GAAvB,EAA4BhE,IAA5B,EAAJ,EAAwC;AACtC;AACD;;AAED;AACAG,SAAGC,MAAH,CAAU,MAAV,EAAkB+G,EAAlB,CAAqB,2BAArB,EAAkD;AAAA,eAAM,OAAKxH,QAAL,EAAN;AAAA,OAAlD;;AAEA;AACA,UAAIqN,OAAO,KAAKlN,OAAL,CAAamE,MAAb,CAAoB,KAApB,EAA2BrD,IAA3B,CAAgC,OAAhC,EAAyC,qBAAzC,EAAgEqD,MAAhE,CAAuE,IAAvE,CAAX;AACA,UAAI2F,gBAAgB,KAAKU,QAAL,CAAchI,OAAOC,MAAP,CAAc,KAAKb,IAAL,CAAUyI,KAAxB,CAAd,CAApB;AACA,WAAKI,QAAL,CAAcyC,IAAd,EAAoBpD,aAApB;;AAEA,aAAO,IAAP;AACD;;;+BAEU;AACT,UAAI,KAAK9J,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAakE,SAAb,CAAuB,GAAvB,EAA4BE,MAA5B;AACA,aAAKpE,OAAL,CAAauE,KAAb,CAAmB,SAAnB,EAA8B,IAA9B;AACD;AACF;;;;;kBA9CkBwN,W;;;;;;;;;;;;;;;;;;ACLrB;;;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBE,iB,WAMlB,sC;;;AAJD,mCAA4D;AAAA,4BAA9C7S,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,iIACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;AAAA;;AACP,UAAIiN,OAAO,IAAX;;AAEA,UAAI2F,UAAU,KAAKtQ,IAAL,CAAUuF,QAAV,CAAmBgC,EAAjC;;AAEA,WAAKrJ,MAAL,CAAYC,KAAZ,+BAA8CmS,OAA9C;;AAEA,WAAKlS,OAAL,GAAe,KAAKqL,MAAL,CAAYlH,MAAZ,CAAmB,KAAnB,EACZrD,IADY,CACP,IADO,EACDoR,OADC,EAEZpR,IAFY,CAEP,OAFO,EAEE,cAFF,CAAf;;AAIA,UAAIqR,OAAO,KAAKnS,OAAL,CAAamE,MAAb,CAAoB,MAApB,CAAX;;AAEA,UAAIiO,SAASD,KAAKhO,MAAL,CAAY,KAAZ,EAAmBrD,IAAnB,CAAwB,OAAxB,EAAiC,qBAAjC,CAAb;;AAEA,UAAIuR,cAAcD,OAAOjO,MAAP,CAAc,MAAd,EAAsBiG,IAAtB,CAA2B,0BAA3B,CAAlB;AACA,UAAI,KAAKxI,IAAL,CAAU6C,KAAd,EAAqB;AACnB4N,oBAAYlO,MAAZ,CAAmB,MAAnB,EAA2BrD,IAA3B,CAAgC,OAAhC,EAAyC,oBAAzC,EAA+D0D,IAA/D,UAA2E,KAAK5C,IAAL,CAAU6C,KAArF;AACD;;AAED,UAAI6F,UAAU6H,KAAKhO,MAAL,CAAY,KAAZ,EAAmBrD,IAAnB,CAAwB,OAAxB,EAAiC,sBAAjC,EAAyDqD,MAAzD,CAAgE,KAAhE,EAAuErD,IAAvE,CAA4E,OAA5E,EAAqF,cAArF,EAAqGqD,MAArG,CAA4G,KAA5G,EAAmHrD,IAAnH,CAAwH,OAAxH,EAAiI,mBAAjI,CAAd;;AApBO;AAAA;AAAA;;AAAA;AAsBP,6BAAgB0B,OAAOC,MAAP,CAAc,KAAKb,IAAL,CAAUuF,QAAV,CAAmB0D,YAAjC,CAAhB,8HAAgE;AAAA,cAAvDyH,GAAuD;;AAC9D,cAAI9F,MAAMlC,QAAQnG,MAAR,CAAe,KAAf,EAAsBrD,IAAtB,CAA2B,OAA3B,EAAoC,kBAApC,CAAV;AACA0L,cAAIrI,MAAJ,CAAW,KAAX,EAAkBrD,IAAlB,CAAuB,OAAvB,EAAgC,mBAAhC,EAAqDqD,MAArD,CAA4D,OAA5D,EAAqErD,IAArE,CAA0E,KAA1E,EAAiFwR,IAAInJ,EAArF,EAAyF3E,IAAzF,CAA8F8N,IAAI7N,KAAlG;AACA,cAAI8I,QAAQf,IAAIrI,MAAJ,CAAW,KAAX,EAAkBrD,IAAlB,CAAuB,OAAvB,EAAgC,mBAAhC,EAAqDqD,MAArD,CAA4D,OAA5D,EAAqErD,IAArE,CAA0E,IAA1E,EAAgFwR,IAAInJ,EAApF,EAAwFrI,IAAxF,CAA6F,OAA7F,EAAsG,YAAtG,EACTA,IADS,CACJ,UADI,EACQ,EADR,EAETA,IAFS,CAEJ,MAFI,EAEIwR,IAAInJ,EAFR,EAGTrI,IAHS,CAGJ,MAHI,EAGIwR,IAAIzK,IAHR,EAIT/G,IAJS,CAIJ,OAJI,EAIKwR,IAAI7Q,KAJT,EAKT4F,EALS,CAKN,QALM,EAKI,YAAY;AACxBkF,iBAAK3K,IAAL,CAAUuF,QAAV,CAAmB0D,YAAnB,CAAgC,KAAK1B,EAArC,EAAyC1H,KAAzC,GAAiD,KAAKA,KAAtD;AACD,WAPS,EAQT4F,EARS,CAQN,OARM,EAQG,KAAKkL,QARR,EASTlL,EATS,CASN,OATM,EASG,KAAKkL,QATR,EAUTlL,EAVS,CAUN,OAVM,EAUG,KAAKkL,QAVR,CAAZ;AAWA;AACA,cAAID,IAAIzK,IAAJ,KAAa,SAAjB,EAA4B;AAC1B;AACA;AACA;AACAyK,gBAAI7Q,KAAJ,GAAY6Q,IAAI7Q,KAAJ,IAAa,KAAzB;AACA8L,kBAAMzM,IAAN,CAAW,MAAX,EAAmB,UAAnB,EAA+BA,IAA/B,CAAoC,UAApC,EAAgD,IAAhD,EACGA,IADH,CACQ,OADR,EACiBwR,IAAI7Q,KADrB,EAEG4F,EAFH,CAEM,QAFN,EAEgB,YAAW;AACvBkF,mBAAK3K,IAAL,CAAUuF,QAAV,CAAmB0D,YAAnB,CAAgC,KAAK1B,EAArC,EAAyC1H,KAAzC,GAAiD,KAAKA,KAAL,GAAa,KAAK+Q,OAAnE;AACD,aAJH;AAKD;AACDhG,cAAIrI,MAAJ,CAAW,MAAX,EAAmBrD,IAAnB,CAAwB,OAAxB,EAAiC,UAAjC;AACD;AAjDM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAmDP,UAAI2R,SAASN,KAAKhO,MAAL,CAAY,KAAZ,EAAmBrD,IAAnB,CAAwB,OAAxB,EAAiC,qBAAjC,CAAb;;AAEA2R,aAAOtO,MAAP,CAAc,QAAd,EAAwBK,IAAxB,CAA6B,IAA7B,EAAmC6C,EAAnC,CAAsC,OAAtC,EAA+C,YAAM;AACnD,YAAI8K,KAAKjS,IAAL,GAAYwS,aAAZ,EAAJ,EAAiC;AAC/BrS,aAAGmH,KAAH,CAASwK,cAAT;AACA,iBAAKzS,OAAL,CAAaD,eAAb,CAA6B,OAAKsC,IAAL,CAAUuF,QAAvC;AACA,iBAAKtH,QAAL,CAAcwE,IAAd;AACD;AACD,eAAO,KAAP;AACD,OAPD;AAQAoO,aAAOtO,MAAP,CAAc,QAAd,EAAwBK,IAAxB,CAA6B,QAA7B,EAAuC6C,EAAvC,CAA0C,OAA1C,EAAmD,YAAM;AACvDhH,WAAGmH,KAAH,CAASwK,cAAT;AACA,eAAKnS,QAAL,CAAcwE,IAAd;AACD,OAHD;;AAKA;AACA,oDAA8B,CAAC,SAAD,EAAY,aAAZ,EAA2B,iBAA3B,EAA8C,eAA9C,CAA9B;;AAEA,UAAIsO,eAAerI,QAAQpG,SAAR,CAAkB,aAAlB,EAAiChE,IAAjC,EAAnB;AACA,UAAIyS,YAAJ,EAAkB;AAChBA,qBAAaC,KAAb;AACD;;AAED,WAAK9S,MAAL,CAAYC,KAAZ,8BAA6CmS,OAA7C;;AAEA,aAAO,IAAP;AACD;;;;;kBApFkBD,iB;;;;;;;;;;;;;;;;;;ACNrB;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBY,Y,WAMlB,sC;;;AAJD,8BAA4D;AAAA,4BAA9CzT,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,uHACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;AACP,UAAIiN,OAAO,IAAX;;AAEA,UAAIuG,mBAAmB,KAAKlR,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuBkF,UAA9C;;AAEA,UAAInB,cAAc,KAAKhQ,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuB4C,KAAvB,GAA+BjO,OAAOC,MAAP,CAAc,KAAKb,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuB4C,KAArC,CAA/B,GAA6E,EAA/F;AAAA,UACEuC,cAAc,KAAKpR,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuB8C,KAAvB,GAA+BnO,OAAOC,MAAP,CAAc,KAAKb,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuB8C,KAArC,CAA/B,GAA6E,EAD7F;;AAGA,UAAIE,YAAY,KAAK7Q,OAAL,CAAakE,SAAb,CAAuB,gBAAvB,CAAhB;;AAEA,UAAI,CAAC2M,UAAU3Q,IAAV,EAAL,EAAuB;AACrB2Q,oBAAY,KAAK7Q,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,cAAvC,CAAZ;AACD;;AAED,UAAI6P,QAAQE,UAAU3M,SAAV,CAAoB,eAApB,EAAqCtC,IAArC,EAAZ;AACA,UAAIqR,aAAa,KAAKC,kBAAL,CAAwBF,WAAxB,EAAqCrC,KAArC,CAAjB;;AAEA,UAAIG,OAAOD,UAAU3M,SAAV,CAAoB,eAApB,EAAqCtC,IAArC,CAA0CqR,UAA1C,EAAsD;AAAA,eAAKjP,EAAEmF,EAAP;AAAA,OAAtD,CAAX;;AAEA,UAAIgI,YAAY,KAAKnR,OAAL,CAAakE,SAAb,CAAuB,gBAAvB,CAAhB;;AAEA,UAAI,CAACiN,UAAUjR,IAAV,EAAL,EAAuB;AACrBiR,oBAAY,KAAKnR,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,cAAvC,CAAZ;AACD;;AAED,UAAI2P,QAAQU,UAAUjN,SAAV,CAAoB,eAApB,EAAqCtC,IAArC,EAAZ;AACA,UAAIuR,aAAa,KAAKD,kBAAL,CAAwBtB,WAAxB,EAAqCnB,KAArC,CAAjB;;AAEA,UAAIvQ,OAAOiR,UAAUjN,SAAV,CAAoB,eAApB,EAAqCtC,IAArC,CAA0CuR,UAA1C,EAAsD;AAAA,eAAKnP,EAAEmF,EAAP;AAAA,OAAtD,CAAX;;AAEA,UAAIjJ,KAAK8E,IAAL,GAAYpD,IAAZ,GAAmBW,MAAnB,KAA8B,CAA9B,IACFrC,KAAK+E,KAAL,GAAarD,IAAb,GAAoBW,MAApB,KAA+B,CAD7B,IAEFuO,KAAK7L,KAAL,GAAarD,IAAb,GAAoBW,MAApB,KAA+B,CAF7B,IAGFuO,KAAK9L,IAAL,GAAYpD,IAAZ,GAAmBW,MAAnB,KAA8B,CAHhC,EAGmC;AACjC;AACD;;AAED,UAAIwO,YAAYD,KAAK7L,KAAL,GAAad,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,aAAvC,CAAhB;;AAEAiQ,gBAAU5M,MAAV,CAAiB,MAAjB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,aAAvC;;AAEAgQ,WAAK9L,IAAL,GAAYZ,MAAZ;;AAEA0M,aAAOD,UAAU3M,SAAV,CAAoB,gCAApB,CAAP;;AAEA,UAAI,KAAKtC,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuBhG,IAAvB,KAAgC,UAApC,EAAgD;AAC9C;AACA0E,aAAK1L,MAAL,CAAYsD,MAAZ,CAAmB,MAAnB,EAA2BD,SAA3B,CAAqC,QAArC,EACGtC,IADH,CACQ,CAAC,OAAD,CADR,EAEGqD,KAFH,GAEWd,MAFX,CAEkB,QAFlB,EAGGrD,IAHH,CAGQ,OAHR,EAGiB,eAHjB,EAIGA,IAJH,CAIQ,IAJR,EAIc;AAAA,iBAAKkD,CAAL;AAAA,SAJd,EAKGlD,IALH,CAKQ,SALR,EAKmB,YALnB,EAMGA,IANH,CAMQ,MANR,EAMgB,EANhB,EAOGA,IAPH,CAOQ,MAPR,EAOgB,CAPhB,EAQGA,IARH,CAQQ,aARR,EAQuB,EARvB,EASGA,IATH,CASQ,cATR,EASwB,EATxB,EAUGA,IAVH,CAUQ,QAVR,EAUkB,MAVlB,EAWGqD,MAXH,CAWU,MAXV,EAYGrD,IAZH,CAYQ,GAZR,EAYa,6BAZb;AAaA;AACAgQ,aAAKvM,KAAL,CAAW,YAAX,EAAyB,aAAzB;AACD;;AAED,UAAI6M,YAAYlR,KAAK+E,KAAL,GAAad,MAAb,CAAoB,GAApB,EACbrD,IADa,CACR,OADQ,EACC,aADD,EACgBA,IADhB,CACqB,IADrB,EAC2B;AAAA,eAAKkD,EAAEmF,EAAP;AAAA,OAD3B,CAAhB;;AAGAiI,gBAAUjN,MAAV,CAAiB,MAAjB,EACGrD,IADH,CACQ,GADR,EACaT,GAAGgR,MAAH,GAAYxJ,IAAZ,CAAiB;AAAA,eAAK,gBAAMyJ,SAAN,CAAgBtN,EAAE6D,IAAlB,CAAL;AAAA,OAAjB,EAA+CsI,IAA/C,CAAoD;AAAA,eAAKnM,EAAEmM,IAAF,GAAS,GAAd;AAAA,OAApD,CADb,EAEG5L,KAFH,CAES,MAFT,EAEiB;AAAA,eAAK,gBAAMa,MAAN,CAAapB,EAAEwN,KAAF,GAAU,CAAvB,CAAL;AAAA,OAFjB,EAGG1Q,IAHH,CAGQ,OAHR,EAGiB;AAAA,eAAK,mBAAmBkD,EAAEoP,SAAF,GAAc,mBAAd,GAAoC,EAAvD,KAA8D5Q,OAAOC,MAAP,CAAcuB,EAAEqG,KAAhB,EAAuB9H,MAAvB,GAAgC,iBAAhC,GAAoD,EAAlH,CAAL;AAAA,OAHjB;;AAKA6O,gBAAUjN,MAAV,CAAiB,MAAjB,EACGrD,IADH,CACQ,OADR,EACiB,cADjB,EAEG0D,IAFH,CAEQ;AAAA,eAAKR,EAAES,KAAP;AAAA,OAFR,EAGG3D,IAHH,CAGQ,GAHR,EAGa,YAAW;AACpB,YAAIyI,QAAQ,KAAKqF,OAAL,EAAZ;AACA,eAAO,EAAErF,MAAM3I,KAAN,GAAc,CAAhB,CAAP;AACD,OANH;;AAQAV,WAAK8E,IAAL,GAAYZ,MAAZ;;AAEAlE,aAAOiR,UAAUjN,SAAV,CAAoB,eAApB,CAAP;;AAEA,UAAI,KAAKtC,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuBwF,IAA3B,EAAiC;AAC/BnT,aAAKmE,IAAL,CAAUhE,GAAGgT,IAAH,GACPhM,EADO,CACJ,OADI,EACKiM,WADL,EAEPjM,EAFO,CAEJ,MAFI,EAEIkM,OAFJ,EAGPlM,EAHO,CAGJ,KAHI,EAGGmM,SAHH,CAAV;AAID;;AAED,UAAItT,QAAQ,CAACA,KAAKuT,KAAL,EAAb,EAA2B;;AAEzB,aAAKhC,YAAL,CAAkBvR,IAAlB;;AAEA,YAAI,KAAK0B,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuB6F,cAA3B,EAA2C;AACzC,cAAIhC,cAAcxR,KAAKmH,EAAL,CAAQ,OAAR,CAAlB;AACAnH,eAAKmH,EAAL,CAAQ,OAAR,EAAiB,UAASrD,CAAT,EAAY;AAC3B;AACA2P,2BAAetP,IAAf,CAAoB,IAApB;AACA;AACAqN,wBAAYrN,IAAZ,CAAiB,IAAjB,EAAuBL,CAAvB;AACD,WALD;AAMD;AACF;;AAED,UAAI8O,gBAAJ,EAAsB;AACpB;AACA,YAAIc,SAAS,CAAb;AACA1T,aAAK2T,IAAL,CAAU,YAAU;AAClB,cAAItK,QAAQ,KAAKqF,OAAL,EAAZ;AACA,cAAIgF,SAASrK,MAAM3I,KAAnB,EAA0B;AACxBgT,qBAASrK,MAAM3I,KAAf;AACD;AACF,SALD;AAMA;AACA;AACA,YAAIkT,YAAYzT,GAAG0T,aAAH,GAAmBC,QAAnB,CAA4B,CAACpC,YAAYrP,MAAb,GAAsB,EAAlD,CAAhB;AACA,YAAI0R,YAAY5T,GAAG6T,SAAH,CAAalB,WAAb,EAA0B7J,EAA1B,CAA6B;AAAA,iBAAKnF,EAAEmF,EAAP;AAAA,SAA7B,EAAwCgL,QAAxC,CAAiD,EAAjD,CAAhB;AACA,YAAIC,eAAe/T,GAAGgU,YAAH,GAAkBT,MAAlB,CAAyBA,SAAO,CAAhC,EAAmCU,UAAnC,CAA8C,CAA9C,CAAnB;;AAEA;AACA,YAAIC,SAASlU,GAAGkU,MAAH,CAAU,KAAK3T,KAAf,EAAsBoT,QAAtB,CAA+B,IAA/B,CAAb;AACA;AACA,YAAIQ,SAASnU,GAAGmU,MAAH,CAAU,CAAC,KAAKvT,MAAhB,EAAwB+S,QAAxB,CAAiC,IAAjC,CAAb;;AAEA,YAAI,KAAKpS,IAAL,CAAUwB,MAAV,CAAiByK,KAAjB,CAAuBhG,IAAvB,KAAgC,OAApC,EAA6C;AAC3C;AACA0M,mBAASlU,GAAGkU,MAAH,CAAU,KAAK3T,KAAf,EAAsBoT,QAAtB,CAA+B,GAA/B,CAAT;AACA;AACAQ,mBAASnU,GAAGmU,MAAH,CAAU;AAAA,mBAAKxQ,EAAEwN,KAAF,GAAU,EAAf;AAAA,WAAV,EAA6BwC,QAA7B,CAAsC,GAAtC,CAAT;AACD;;AAED,YAAIjB,aAAa1S,GAAGoU,eAAH,GAAqBhE,KAArB,CAA2B0C,UAA3B,EACduB,KADc,CACR,QADQ,EACEZ,SADF,EAEdY,KAFc,CAER,MAFQ,EAEAT,SAFA;AAGf;AAHe,SAIdS,KAJc,CAIR,GAJQ,EAIHH,MAJG,EAKdG,KALc,CAKR,GALQ,EAKHF,MALG,EAMdE,KANc,CAMR,SANQ,EAMGN,YANH,EAOd/M,EAPc,CAOX,MAPW,EAOHsN,MAPG,EAQdtN,EARc,CAQX,KARW,EAQJ,YAAW;AACpB;AACAkF,eAAK1L,MAAL,CAAYmM,SAAZ;AACD,SAXc,CAAjB;;AAaA;AACA+F,mBAAW6B,OAAX;AACD,OA1CD,MA0CO;AACL;AACAD;AACApI,aAAK1L,MAAL,CAAYmM,SAAZ;AACD;;AAED,eAAS2H,MAAT,GAAkB;AAChB7D,aACGhQ,IADH,CACQ,IADR,EACc;AAAA,iBAAKkD,EAAEwM,MAAF,CAAS9M,CAAd;AAAA,SADd,EAEG5C,IAFH,CAEQ,IAFR,EAEc;AAAA,iBAAKkD,EAAEwM,MAAF,CAAS7M,CAAd;AAAA,SAFd,EAGG7C,IAHH,CAGQ,IAHR,EAGc;AAAA,iBAAKkD,EAAEvE,MAAF,CAASiE,CAAd;AAAA,SAHd,EAIG5C,IAJH,CAIQ,IAJR,EAIc;AAAA,iBAAKkD,EAAEvE,MAAF,CAASkE,CAAd;AAAA,SAJd;;AAMAzD,aAAKY,IAAL,CAAU,WAAV,EAAuB;AAAA,gCAAkBkD,EAAEN,CAApB,SAAyBM,EAAEL,CAA3B;AAAA,SAAvB;AACD;;AAED;AACA;AACA,UAAIkR,SAAS,CAAb;AACA;AACA,UAAIC,gBAAgB,EAApB;;AAEA,WAAK,IAAI5P,IAAI,CAAb,EAAgBA,IAAI0M,YAAYrP,MAAhC,EAAwC2C,GAAxC,EAA6C;AAC3C4P,sBAAiB5P,CAAjB,SAAsBA,CAAtB,IAA6B,CAA7B;AACD;;AAED8N,kBAAYnP,OAAZ,CAAoB,UAASG,CAAT,EAAY;AAC9B8Q,sBAAiB9Q,EAAEwM,MAAF,CAASuE,KAA1B,SAAmC/Q,EAAEvE,MAAF,CAASsV,KAA5C,IAAuD,CAAvD;AACD,OAFD;;AAIA,eAASpB,cAAT,GAA0B;AACxB;AACA,iBAASqB,WAAT,CAAqBC,CAArB,EAAwBC,CAAxB,EAA2B;AACzB,iBAAOJ,cAAiBG,EAAEF,KAAnB,SAA4BG,EAAEH,KAA9B,CAAP;AACD;AACD1U,WAAGmH,KAAH,CAASwK,cAAT;AACA,YAAI6C,WAAW,CAAf,EAAkB;AAChB;AACA,cAAI7Q,IAAI3D,GAAGC,MAAH,CAAU,IAAV,EAAgBJ,IAAhB,GAAuBiV,QAA/B;AACAjV,eAAKqE,KAAL,CAAW,SAAX,EAAsB;AAAA,mBAAKyQ,YAAYhR,CAAZ,EAAegN,CAAf,KAAqBgE,YAAYhE,CAAZ,EAAehN,CAAf,CAArB,GAAyC,CAAzC,GAA6C,GAAlD;AAAA,WAAtB;AACA8M,eAAKvM,KAAL,CAAW,SAAX,EAAsB;AAAA,mBAAKP,EAAE+Q,KAAF,KAAY/D,EAAER,MAAF,CAASuE,KAArB,IAA8B/Q,EAAE+Q,KAAF,KAAY/D,EAAEvR,MAAF,CAASsV,KAAnD,GAA2D,CAA3D,GAA+D,GAApE;AAAA,WAAtB;AACA;AACAF,mBAAS,CAAT;AACD,SAPD,MAOO;AACL;AACA3U,eAAKqE,KAAL,CAAW,SAAX,EAAsB,CAAtB;AACAuM,eAAKvM,KAAL,CAAW,SAAX,EAAsB,CAAtB;AACAsQ,mBAAS,CAAT;AACD;AACF;;AAED,eAASvB,WAAT,CAAqBtP,CAArB,EAAwB;AACtB,YAAI,CAAC3D,GAAGmH,KAAH,CAAS4N,MAAV,IAAoBtC,gBAAxB,EAA0C;AACxCC,qBAAWsC,WAAX,CAAuB,IAAvB,EAA6BT,OAA7B;AACD;AACD5Q,UAAEsR,EAAF,GAAOtR,EAAEN,CAAT;AACAM,UAAEuR,EAAF,GAAOvR,EAAEL,CAAT;AACD;;AAED,eAAS4P,OAAT,CAAiBvP,CAAjB,EAAoB;AAClBA,UAAEsR,EAAF,GAAOjV,GAAGmH,KAAH,CAAS9D,CAAhB;AACAM,UAAEuR,EAAF,GAAOlV,GAAGmH,KAAH,CAAS7D,CAAhB;AACD;;AAED,eAAS6P,SAAT,CAAmBxP,CAAnB,EAAsB;AACpB,YAAI,CAAC3D,GAAGmH,KAAH,CAAS4N,MAAV,IAAoBtC,gBAAxB,EAA0C;AACxCC,qBAAWsC,WAAX,CAAuB,CAAvB;AACD;AACDrR,UAAEsR,EAAF,GAAO,IAAP;AACAtR,UAAEuR,EAAF,GAAO,IAAP;AACD;;AAED,aAAO,IAAP;AAED;;;+BAEU,CAAE;;;uCAEMC,a,EAAeC,S,EAAW;AAC3C,UAAIC,cAAc,EAAlB;AACAF,oBAAc3R,OAAd,CAAsB,aAAK;AACzB,YAAIiN,OAAO2E,UAAUE,IAAV,CAAe;AAAA,iBAAK3R,EAAEmF,EAAF,KAAS6H,EAAE7H,EAAhB;AAAA,SAAf,CAAX;AACA,YAAI2H,IAAJ,EAAU;AACR4E,sBAAY3P,IAAZ,CAAiB+K,IAAjB;AACD,SAFD,MAEO;AACL4E,sBAAY3P,IAAZ,CAAiBiL,CAAjB;AACD;AACF,OAPD;AAQA,aAAO0E,WAAP;AACD;;;;;kBApPkB7C,Y;;;;;;;;;;;;;;;;;;ACLrB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEqB+C,Y,WAMlB,6BAAS,cAAT,C;;;AAJD,8BAA4D;AAAA,4BAA9CxW,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,uHACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;;AAEP,UAAIU,UAAUJ,SAAd;AACA,cAAQ,KAAKgC,IAAL,CAAUwB,MAAV,CAAiBC,KAAjB,CAAuBwE,IAA/B;AACA,aAAK,KAAL;AACE7H,oBAAU,uBAAa,KAAKT,OAAlB,EAA2B0G,IAA3B,CAAgC,KAAKrE,IAArC,EAA2CjC,MAA3C,EAAV;AACA;AACF,aAAK,MAAL;AACEK,oBAAU,wBAAc,KAAKT,OAAnB,EAA4B0G,IAA5B,CAAiC,KAAKrE,IAAtC,EAA4CjC,MAA5C,EAAV;AACA;AACF,aAAK,SAAL;AACEK,oBAAU,2BAAiB,KAAKT,OAAtB,EAA+B0G,IAA/B,CAAoC,KAAKrE,IAAzC,EAA+CjC,MAA/C,EAAV;AACA;AATF;;AAYA,aAAOK,OAAP;AACD;;;+BAEU,CAAE;;;;;kBAzBM4V,Y;;;;;;;;;;;;;;;;;;ACNrB;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBC,Q,WAMlB,sC;;;AAJD,0BAA4D;AAAA,4BAA9CzW,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,+GACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;;AAEP,WAAK0D,MAAL,GAAc3C,GAAGyV,SAAH,GAAetS,KAAf,CAAqB,CAAC,CAAD,EAAI,KAAK5C,KAAT,CAArB,EAAsCmV,OAAtC,CAA8C,GAA9C,EAAmDtS,MAAnD,CAA0D,KAAKX,IAAL,CAAUY,CAAV,CAAYD,MAAtE,CAAd;;AAEA,UAAI,CAAC,KAAKX,IAAL,CAAUY,CAAV,CAAYD,MAAZ,CAAmBlB,MAAxB,EAAgC;AAC9B,aAAKO,IAAL,CAAUY,CAAV,CAAYD,MAAZ,GAAqB,gBAAMuS,WAAN,CAAkB,KAAKpS,SAAL,CAAerB,MAAf,GAAwB,KAAKW,YAAL,CAAkBX,MAA5D,CAArB;AACA,aAAKS,MAAL,CAAYS,MAAZ,CAAmB,KAAKX,IAAL,CAAUY,CAAV,CAAYD,MAA/B;AACD;;AAED,UAAIwS,YAAY,KAAKjW,OAAL,CAAakE,SAAb,CAAuB,eAAvB,CAAhB;;AAEA,UAAI,CAAC+R,UAAU/V,IAAV,EAAL,EAAuB;AACrB+V,oBAAY,KAAKjW,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,aAAvC,CAAZ;AACD;;AAED,UAAIyL,OAAO,IAAX;;AAEA,WAAKrJ,YAAL,CAAkBW,OAAlB,CAA0B,UAASlB,GAAT,EAAcoS,KAAd,EAAqB;AAC7C,YAAImB,MAAMD,UAAU/R,SAAV,kBAAmC6Q,KAAnC,EAA4CnT,IAA5C,CAAiD2K,KAAKtJ,QAAL,CAAcN,GAAd,CAAjD,CAAV;;AAEAuT,YAAIlR,IAAJ,GAAWmK,UAAX,GAAwBC,QAAxB,CAAiC,GAAjC,EACG7K,KADH,CACS,cADT,EACyB,IADzB,EAEGH,MAFH;;AAIA;AACA,YAAI+R,WAAWD,IAAIjR,KAAJ,GACZd,MADY,CACL,MADK,EAEZI,KAFY,CAEN,MAFM,EAEE;AAAA,iBAAM,gBAAMa,MAAN,CAAa2P,QAAQ,CAArB,CAAN;AAAA,SAFF,EAGZjU,IAHY,CAGP,OAHO,kBAGgBiU,KAHhB,EAIZjU,IAJY,CAIP,GAJO,EAIF,UAASkD,CAAT,EAAYkB,CAAZ,EAAe;AACxB,iBAAOqH,KAAKvJ,MAAL,CAAYuJ,KAAKzJ,IAAL,CAAUY,CAAV,CAAYD,MAAZ,CAAmByB,CAAnB,CAAZ,IAAqC6P,SAASxI,KAAKvJ,MAAL,CAAYoT,SAAZ,KAA0B7J,KAAKrJ,YAAL,CAAkBX,MAArD,CAA5C;AACD,SANY,EAOZzB,IAPY,CAOP,OAPO,EAOGyL,KAAKvJ,MAAL,CAAYoT,SAAZ,KAA0B7J,KAAKrJ,YAAL,CAAkBX,MAA7C,GAAuD,CAPzD,EAQZzB,IARY,CAQP,GARO,EAQF,UAASkD,CAAT,EAAY;AACrB,iBAAOuI,KAAKxJ,MAAL,CAAYiB,CAAZ,CAAP;AACD,SAVY,EAWZlD,IAXY,CAWP,QAXO,EAWG,UAASkD,CAAT,EAAY;AAC1B,iBAAOuI,KAAKtL,MAAL,GAAcsL,KAAKxJ,MAAL,CAAYiB,CAAZ,CAArB;AACD,SAbY,EAcZqD,EAdY,CAcT,YAdS,EAcK,UAASrD,CAAT,EAAY;AAC5B3D,aAAGC,MAAH,CAAU,IAAV,EAAgB6O,UAAhB,GACGC,QADH,CACY,GADZ,EACiB7K,KADjB,CACuB,cADvB,EACuC,GADvC;AAEAgI,eAAKpJ,OAAL,CAAa8C,IAAb,CAAkB,gBAAM9C,OAAN,CAAcR,GAAd,EAAmBqB,CAAnB,CAAlB,EAAyC,IAAzC,EAA+CrE,MAA/C;AACD,SAlBY,EAmBZ0H,EAnBY,CAmBT,YAnBS,EAmBK,YAAW;AAC3BhH,aAAGC,MAAH,CAAU,IAAV,EAAgB6O,UAAhB,GACGC,QADH,CACY,GADZ,EACiB7K,KADjB,CACuB,cADvB,EACuC,CADvC;AAEAgI,eAAKpJ,OAAL,CAAatD,QAAb;AACD,SAvBY,CAAf;;AAyBAsW,iBAAShR,KAAT,CAAe+Q,GAAf,EACGpV,IADH,CACQ,GADR,EACa,UAASkD,CAAT,EAAYkB,CAAZ,EAAe;AACxB,iBAAOqH,KAAKvJ,MAAL,CAAYuJ,KAAKzJ,IAAL,CAAUY,CAAV,CAAYD,MAAZ,CAAmByB,CAAnB,CAAZ,IAAqC6P,SAASxI,KAAKvJ,MAAL,CAAYoT,SAAZ,KAA0B7J,KAAKrJ,YAAL,CAAkBX,MAArD,CAA5C;AACD,SAHH,EAIGzB,IAJH,CAIQ,OAJR,EAIkByL,KAAKvJ,MAAL,CAAYoT,SAAZ,KAA0B7J,KAAKrJ,YAAL,CAAkBX,MAA7C,GAAuD,CAJxE,EAKGzB,IALH,CAKQ,GALR,EAKa,UAASkD,CAAT,EAAY;AACrB,iBAAOuI,KAAKxJ,MAAL,CAAYiB,CAAZ,CAAP;AACD,SAPH,EAQGlD,IARH,CAQQ,QARR,EAQkB,UAASkD,CAAT,EAAY;AAC1B,iBAAOuI,KAAKtL,MAAL,GAAcsL,KAAKxJ,MAAL,CAAYiB,CAAZ,CAArB;AACD,SAVH;AAWD,OA5CD;;AA8CA,WAAKqS,WAAL;AACA,WAAKC,aAAL;;AAEA,aAAO,IAAP;AACD;;;+BAEU,CAAE;;;;;kBA5EMT,Q;;;;;;;;;;;;;;;;;;ACLrB;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBU,S,WAMlB,sC;;;AAJD,2BAA4D;AAAA,4BAA9CnX,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,iHACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;;AAEP,UAAIkX,aAAa,KAAKxW,OAAL,CAAakE,SAAb,CAAuB,gBAAvB,CAAjB;;AAEA,UAAI,CAACsS,WAAWtW,IAAX,EAAL,EAAwB;AACtBsW,qBAAa,KAAKxW,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,cAAvC,CAAb;AACD;;AAED,UAAIyL,OAAO,IAAX;;AAEA,WAAKrJ,YAAL,CAAkBW,OAAlB,CAA0B,UAASlB,GAAT,EAAcoS,KAAd,EAAqB;AAC7C,YAAI0B,YAAYpW,GAAGqW,IAAH,GACbhT,CADa,CACX,UAASM,CAAT,EAAYkB,CAAZ,EAAe;AAChB,iBAAOqH,KAAKvJ,MAAL,CAAYkC,CAAZ,CAAP;AACD,SAHa,EAIbvB,CAJa,CAIX,UAASK,CAAT,EAAY;AACb,iBAAOuI,KAAKxJ,MAAL,CAAYiB,CAAZ,CAAP;AACD,SANa,CAAhB;;AAQA,YAAI0S,OAAOF,WAAWtS,SAAX,mBAAqC6Q,KAArC,EAA8CnT,IAA9C,CAAmD,CAAC2K,KAAKtJ,QAAL,CAAcN,GAAd,CAAD,CAAnD,CAAX;;AAEA+T,aAAK1R,IAAL,GAAYmK,UAAZ,GAAyBC,QAAzB,CAAkC,GAAlC,EACG7K,KADH,CACS,cADT,EACyB,IADzB,EAEGH,MAFH;;AAIA;AACA,YAAIuS,YAAYD,KAAKzR,KAAL,GACbd,MADa,CACN,MADM,EAEbI,KAFa,CAEP,QAFO,EAEG;AAAA,iBAAM,gBAAMa,MAAN,CAAa2P,QAAQ,CAArB,CAAN;AAAA,SAFH,EAGbxQ,KAHa,CAGP,cAHO,EAGS,KAHT,EAIbzD,IAJa,CAIR,OAJQ,mBAIgBiU,KAJhB,EAKbjU,IALa,CAKR,GALQ,EAKH2V,SALG,EAMbpP,EANa,CAMV,YANU,EAMI,UAASrD,CAAT,EAAY;AAC5B3D,aAAGC,MAAH,CAAU,IAAV,EAAgB6O,UAAhB,GACGC,QADH,CACY,GADZ,EAEG7K,KAFH,CAES,gBAFT,EAE2B,GAF3B,EAGGA,KAHH,CAGS,cAHT,EAGyB,MAHzB;AAIAgI,eAAKpJ,OAAL,CAAa8C,IAAb,CAAkB,gBAAM9C,OAAN,CAAcR,GAAd,EAAmBqB,CAAnB,CAAlB,EAAyC,IAAzC,EAA+CrE,MAA/C;AACD,SAZa,EAab0H,EAba,CAaV,YAbU,EAaI,YAAW;AAC3BhH,aAAGC,MAAH,CAAU,IAAV,EAAgB6O,UAAhB,GACGC,QADH,CACY,GADZ,EAEG7K,KAFH,CAES,gBAFT,EAE2B,CAF3B,EAGGA,KAHH,CAGS,cAHT,EAGyB,KAHzB;AAIAgI,eAAKpJ,OAAL,CAAatD,QAAb;AACD,SAnBa,CAAhB;;AAqBA8W,kBAAUxR,KAAV,CAAgBuR,IAAhB;AACD,OAtCD;;AAwCA,WAAKL,WAAL;AACA,WAAKC,aAAL;;AAEA,aAAO,IAAP;AACD;;;+BAEU,CAAE;;;;;kBA/DMC,S;;;;;;;;;;;;;;;;;;ACLrB;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBK,Y,WAMlB,sC;;;AAJD,8BAA4D;AAAA,4BAA9CxX,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,uHACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;;AAEP,UAAIuX,eAAe,KAAK7W,OAAL,CAAakE,SAAb,CAAuB,mBAAvB,CAAnB;;AAEA,UAAI,CAAC2S,aAAa3W,IAAb,EAAL,EAA0B;AACxB2W,uBAAe,KAAK7W,OAAL,CAAamE,MAAb,CAAoB,GAApB,EAAyBrD,IAAzB,CAA8B,OAA9B,EAAuC,iBAAvC,CAAf;AACD;;AAED,UAAIyL,OAAO,IAAX;;AAEA,WAAKrJ,YAAL,CAAkBW,OAAlB,CAA0B,UAASlB,GAAT,EAAcoS,KAAd,EAAqB;AAC7C,YAAI+B,UAAUD,aAAa3S,SAAb,sBAA0C6Q,KAA1C,EAAmDnT,IAAnD,CAAwD2K,KAAKtJ,QAAL,CAAcN,GAAd,CAAxD,CAAd;;AAEAmU,gBAAQ9R,IAAR,GAAemK,UAAf,GAA4BC,QAA5B,CAAqC,GAArC,EACG7K,KADH,CACS,cADT,EACyB,IADzB,EAEGH,MAFH;;AAIA;AACA,YAAI2S,eAAeD,QAChB7R,KADgB,GAEhBd,MAFgB,CAET,QAFS,EAGhBI,KAHgB,CAGV,MAHU,EAGF;AAAA,iBAAM,gBAAMa,MAAN,CAAa2P,QAAQ,CAArB,CAAN;AAAA,SAHE,EAIhBjU,IAJgB,CAIX,OAJW,sBAIgBiU,KAJhB,EAKhBjU,IALgB,CAKX,GALW,EAKN,CALM,EAMhBA,IANgB,CAMX,IANW,EAML,UAASkD,CAAT,EAAYkB,CAAZ,EAAe;AACzB,iBAAOqH,KAAKvJ,MAAL,CAAYkC,CAAZ,CAAP;AACD,SARgB,EAShBpE,IATgB,CASX,IATW,EASL,UAASkD,CAAT,EAAY;AACtB,iBAAOuI,KAAKxJ,MAAL,CAAYiB,CAAZ,CAAP;AACD,SAXgB,EAYhBqD,EAZgB,CAYb,YAZa,EAYC,UAASrD,CAAT,EAAY;AAC5B3D,aAAGC,MAAH,CAAU,IAAV,EAAgB6O,UAAhB,GACGC,QADH,CACY,GADZ,EAEG7K,KAFH,CAES,cAFT,EAEyB,GAFzB,EAGGzD,IAHH,CAGQ,GAHR,EAGa,EAHb;AAIAyL,eAAKpJ,OAAL,CAAa8C,IAAb,CAAkB,gBAAM9C,OAAN,CAAcR,GAAd,EAAmBqB,CAAnB,CAAlB,EAAyC,IAAzC,EAA+CrE,MAA/C;AACD,SAlBgB,EAmBhB0H,EAnBgB,CAmBb,YAnBa,EAmBC,YAAW;AAC3BhH,aAAGC,MAAH,CAAU,IAAV,EAAgB6O,UAAhB,GACGC,QADH,CACY,GADZ,EAEG7K,KAFH,CAES,cAFT,EAEyB,CAFzB,EAGGzD,IAHH,CAGQ,GAHR,EAGa,CAHb;AAIAyL,eAAKpJ,OAAL,CAAatD,QAAb;AACD,SAzBgB,CAAnB;;AA2BAkX,qBAAa5R,KAAb,CAAmB2R,OAAnB;AACD,OApCD;;AAsCA,WAAKT,WAAL;;AAEA,WAAKC,aAAL;;AAEA,aAAO,IAAP;AACD;;;+BAEU,CAAE;;;;;kBA9DMM,Y;;;;;;;;;;;;;;;;ACLrB;;;;AACA;;;;AACA;;IAAYI,Q;;;;;;;;;;;;AAEZ;;IAEqBC,Q;;;AAEnB,0BAA4D;AAAA,4BAA9C7X,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,+GACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAEQ;AAAA;;AACP,UAAI4X,aAAa,yBAAe,KAAK3X,OAApB,CAAjB;;AAEA;AACA,UAAM4X,uBAAqB,KAAKvV,IAAL,CAAUwB,MAAV,CAAiB+F,EAA5C;AACA,WAAKnJ,OAAL,GAAeK,GAAGC,MAAH,OAAc6W,MAAd,CAAf;;AAEA;AACA,UAAI,CAAC,KAAKnX,OAAL,CAAaE,IAAb,EAAL,EAA0B;AACxB;AACA,aAAKJ,MAAL,CAAYC,KAAZ,0BAAyCoX,MAAzC;AACA,aAAKnX,OAAL,GAAe,KAAKa,MAAL,CAAYsD,MAAZ,CAAmB,KAAnB,EAA0BrD,IAA1B,CAA+B,OAA/B,EAAwC,yBAAxC,EAAmEA,IAAnE,CAAwE,IAAxE,EAA8EqW,MAA9E,CAAf;AACD;;AAED;AACA,WAAKnX,OAAL,CAAakE,SAAb,CAAuB,GAAvB,EAA4BE,MAA5B;;AAEA,WAAKpE,OAAL,GAAe,KAAKA,OAAL,CAAamE,MAAb,CAAoB,IAApB,EAA0BrD,IAA1B,CAA+B,OAA/B,EAAwC,kBAAxC,CAAf;;AAEA,UAAI,KAAKc,IAAL,CAAUwB,MAAV,CAAiBqB,KAArB,EAA4B;AAC1B,aAAKzE,OAAL,CAAamE,MAAb,CAAoB,IAApB,EAA0BrD,IAA1B,CAA+B,OAA/B,EAAwC,cAAxC,EAAwDqD,MAAxD,CAA+D,GAA/D,EAAoEiG,IAApE,CAAyE,KAAKxI,IAAL,CAAUwB,MAAV,CAAiBqB,KAA1F;AACD;;AAED,UAAIyF,QAAQ,KAAKlK,OAAL,CAAamE,MAAb,CAAoB,IAApB,CAAZ;AACA+F,YAAM/F,MAAN,CAAa,GAAb,EAAkBiG,IAAlB,CAAuB,QAAvB;AACA,UAAIE,UAAUJ,MAAM/F,MAAN,CAAa,IAAb,CAAd;AACAmG,cAAQnG,MAAR,CAAe,IAAf,EAAqBA,MAArB,CAA4B,GAA5B,EAAiCkD,EAAjC,CAAoC,OAApC,EAA6C;AAAA,eAAM,OAAK9H,OAAL,CAAaF,QAAb,CAAsB+D,MAAtB,CAA6B4J,SAA7B,EAAN;AAAA,OAA7C,EAA6FlM,IAA7F,CAAkG,OAAlG,EAA2G,aAA3G,EAA0HsJ,IAA1H,CAA+H,aAA/H;AACAE,cAAQnG,MAAR,CAAe,IAAf,EAAqBA,MAArB,CAA4B,GAA5B,EAAiCkD,EAAjC,CAAoC,OAApC,EAA6C;AAAA,eAAM2P,SAASI,YAAT,CAAsB,OAAK/K,SAAL,CAAenM,IAAf,EAAtB,EAA6C,aAA7C,CAAN;AAAA,OAA7C,EAAgHY,IAAhH,CAAqH,OAArH,EAA8H,aAA9H,EAA6IsJ,IAA7I,CAAkJ,aAAlJ;AACAE,cAAQnG,MAAR,CAAe,IAAf,EAAqBA,MAArB,CAA4B,GAA5B,EAAiCkD,EAAjC,CAAoC,OAApC,EAA6C;AAAA,eAAM6P,WAAWjR,IAAX,CAAgB,OAAKrE,IAArB,EAA2BjC,MAA3B,EAAN;AAAA,OAA7C,EAAwFmB,IAAxF,CAA6F,OAA7F,EAAsG,OAAtG,EAA+GsJ,IAA/G,CAAoH,OAApH;;AAEA;AACA,UAAIN,gBAAgB,KAAKU,QAAL,CAAchI,OAAOC,MAAP,CAAc,KAAKb,IAAL,CAAUwB,MAAV,CAAiBiH,KAA/B,CAAd,CAApB;AACA,WAAKI,QAAL,CAAc,KAAKzK,OAAnB,EAA4B8J,aAA5B;;AAEA,WAAKhK,MAAL,CAAYC,KAAZ,yBAAwCoX,MAAxC;;AAEA,aAAO,IAAP;AACD;;;+BAEU,CAAE;;;;;;kBA7CMF,Q;;;;;;;;;;;;;;;;;;ACNrB;;;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBI,U,WAMlB,sC;;;AAJD,4BAA4D;AAAA,4BAA9CjY,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,mHACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;AAAA;;AAEP,UAAI4S,UAAU,kBAAd;;AAEA,WAAKpS,MAAL,CAAYC,KAAZ,4BAA2CmS,OAA3C;;AAEA,WAAKlS,OAAL,GAAe,KAAKqL,MAAL,CAAYlH,MAAZ,CAAmB,KAAnB,EACZrD,IADY,CACP,IADO,EACDoR,OADC,EAEZpR,IAFY,CAEP,OAFO,EAEE,cAFF,CAAf;;AAIA,UAAIqR,OAAO,KAAKnS,OAAL,CAAamE,MAAb,CAAoB,MAApB,CAAX;;AAEA,UAAIiO,SAASD,KAAKhO,MAAL,CAAY,KAAZ,EAAmBrD,IAAnB,CAAwB,OAAxB,EAAiC,qBAAjC,CAAb;;AAEAsR,aAAOjO,MAAP,CAAc,MAAd,EAAsBiG,IAAtB,qBAA4C,KAAKxI,IAAL,CAAU0V,OAAV,IAAqB,KAAjE;;AAEA,UAAIhN,UAAU6H,KAAKhO,MAAL,CAAY,KAAZ,EAAmBrD,IAAnB,CAAwB,OAAxB,EAAiC,sBAAjC,EACXqD,MADW,CACJ,KADI,EACGrD,IADH,CACQ,OADR,EACiB,cADjB,EAEXqD,MAFW,CAEJ,KAFI,EAEGrD,IAFH,CAEQ,OAFR,EAEiB,mBAFjB,CAAd;;AAIAwJ,cAAQnG,MAAR,CAAe,MAAf,EAAuBK,IAAvB,CAA4B,gBAA5B;AACA8F,cAAQnG,MAAR,CAAe,KAAf,EAAsBrD,IAAtB,CAA2B,OAA3B,EAAoC,QAApC,EAA8CsJ,IAA9C,CAAmD,gCAAgBa,KAAKC,SAAL,CAAe,KAAKtJ,IAAL,CAAUwB,MAAzB,EAAiC,IAAjC,EAAuC,CAAvC,CAAhB,CAAnD;AACAkH,cAAQnG,MAAR,CAAe,MAAf,EAAuBA,MAAvB,CAA8B,GAA9B,EAAmCrD,IAAnC,CAAwC,MAAxC,EAAgD,qCAAhD,EAAuF0D,IAAvF,CAA4F,kBAA5F;;AAEA,UAAIiO,SAASN,KAAKhO,MAAL,CAAY,KAAZ,EAAmBrD,IAAnB,CAAwB,OAAxB,EAAiC,qBAAjC,CAAb;;AAEA2R,aAAOtO,MAAP,CAAc,QAAd,EAAwBK,IAAxB,CAA6B,IAA7B,EAAmC6C,EAAnC,CAAsC,OAAtC,EAA+C,YAAM;AACnDhH,WAAGmH,KAAH,CAASwK,cAAT;AACA,eAAKnS,QAAL,CAAcwE,IAAd;AACD,OAHD;;AAKA;AACA,oDAA8B,CAAC,SAAD,EAAY,aAAZ,EAA2B,iBAA3B,EAA8C,eAA9C,CAA9B;;AAEA,WAAKvE,MAAL,CAAYC,KAAZ,8BAA6CmS,OAA7C;;AAEA,aAAO,IAAP;AACD;;;;;kBA5CkBmF,U;;;;;;;;;ACNrB,CAAC,YAAW;AACV,MAAIE,OAAO,OAAO3K,OAAP,IAAkB,WAAlB,IAAiCA,OAAjC,IAA4C,cAAiB,WAAjB,IAAgC,EAA5E,IAAkF,IAA7F;;AAEA,MAAI4K,UAAU,mKAAd;;AAEA,WAASC,SAAT,CAAmB1V,GAAnB,EAAwB;AACtB,WAAOA,eAAe2V,WAAf,IAA8B3V,eAAe4V,UAApD;AACD;;AAED,WAASC,cAAT,CAAwBC,EAAxB,EAA4B;AAC1B,QAAI,CAACJ,UAAUI,EAAV,CAAL,EAAoB;AAClB,YAAM,IAAIzR,KAAJ,CAAU,mDAAmDyR,EAA7D,CAAN;AACD;AACF;;AAED,WAASC,UAAT,CAAoBC,GAApB,EAAyB;AACvB,WAAOA,OAAOA,IAAIC,WAAJ,CAAgB,MAAhB,EAAuB,CAAvB,KAA6B,CAApC,IAAyCD,IAAIC,WAAJ,CAAgBnL,OAAOoL,QAAP,CAAgBC,IAAhC,KAAyC,CAAC,CAA1F;AACD;;AAED,WAASC,YAAT,CAAsBN,EAAtB,EAA0B1Q,QAA1B,EAAoC;AAClCyQ,mBAAeC,EAAf;;AAEA,QAAIO,SAASP,GAAGQ,gBAAH,CAAoB,OAApB,CAAb;AAAA,QACI1X,OAAOyX,OAAO7V,MADlB;AAAA,QAEI+V,YAAY,SAAZA,SAAY,GAAW;AACrB,UAAI3X,SAAS,CAAb,EAAgB;AACdwG;AACD;AACF,KANL;;AAQAmR;AACA,SAAK,IAAIpT,IAAI,CAAb,EAAgBA,IAAIkT,OAAO7V,MAA3B,EAAmC2C,GAAnC,EAAwC;AACtC,OAAC,UAASqT,KAAT,EAAgB;AACf,YAAIC,OAAOD,MAAME,cAAN,CAAqB,8BAArB,EAAqD,MAArD,CAAX;AACA,YAAID,IAAJ,EAAU;AACR,cAAIV,WAAWU,KAAK/W,KAAhB,CAAJ,EAA4B;AAC1BgF,oBAAQmD,IAAR,CAAa,8DAA4D4O,KAAK/W,KAA9E;AACA;AACD;AACF;AACD,YAAI2B,SAASsV,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACA,YAAIC,MAAMxV,OAAOyV,UAAP,CAAkB,IAAlB,CAAV;AACA,YAAIC,MAAM,IAAIC,KAAJ,EAAV;AACAD,YAAIE,WAAJ,GAAgB,WAAhB;AACAR,eAAOA,QAAQD,MAAMU,YAAN,CAAmB,MAAnB,CAAf;AACA,YAAIT,IAAJ,EAAU;AACRM,cAAII,GAAJ,GAAUV,IAAV;AACAM,cAAIK,MAAJ,GAAa,YAAW;AACtB/V,mBAAOxC,KAAP,GAAekY,IAAIlY,KAAnB;AACAwC,mBAAOnC,MAAP,GAAgB6X,IAAI7X,MAApB;AACA2X,gBAAIQ,SAAJ,CAAcN,GAAd,EAAmB,CAAnB,EAAsB,CAAtB;AACAP,kBAAMc,cAAN,CAAqB,8BAArB,EAAqD,MAArD,EAA6DjW,OAAOkW,SAAP,CAAiB,WAAjB,CAA7D;AACA3Y;AACA2X;AACD,WAPD;AAQAQ,cAAIS,OAAJ,GAAc,YAAW;AACvB9S,oBAAQN,GAAR,CAAY,oBAAkBqS,IAA9B;AACA7X;AACA2X;AACD,WAJD;AAKD,SAfD,MAeO;AACL3X;AACA2X;AACD;AACF,OAhCD,EAgCGF,OAAOlT,CAAP,CAhCH;AAiCD;AACF;;AAED,WAASsU,MAAT,CAAgB3B,EAAhB,EAAoBtY,OAApB,EAA6Bka,iBAA7B,EAAgD;AAC9C,QAAIC,gBAAgBna,QAAQma,aAA5B;AACA,QAAIC,cAAcpa,QAAQoa,WAA1B;AACA,QAAIC,MAAM,EAAV;AACA;AACA;AACA,QAAIC,aAAa,EAAjB;AACA,QAAIC,SAASpB,SAASqB,WAAtB;AACA,SAAK,IAAI7U,IAAI,CAAb,EAAgBA,IAAI4U,OAAOvX,MAA3B,EAAmC2C,GAAnC,EAAwC;AACtC,UAAI;AACF,YAAI8U,QAAQF,OAAO5U,CAAP,EAAU+U,QAAtB;AACD,OAFD,CAEE,OAAOtQ,CAAP,EAAU;AACVlD,gBAAQmD,IAAR,CAAa,qCAAmCkQ,OAAO5U,CAAP,EAAUsT,IAA1D;AACA;AACD;;AAED,UAAIwB,SAAS,IAAb,EAAmB;AACjB,aAAK,IAAIE,IAAI,CAAR,EAAWpO,KAAhB,EAAuBoO,IAAIF,MAAMzX,MAAjC,EAAyC2X,KAAKpO,QAAQ,IAAtD,EAA4D;AAC1D,cAAIqO,OAAOH,MAAME,CAAN,CAAX;AACA,cAAI,OAAOC,KAAK5V,KAAZ,IAAsB,WAA1B,EAAuC;AACrC,gBAAI6V,YAAJ;;AAEA,gBAAI;AACFA,6BAAeD,KAAKC,YAApB;AACD,aAFD,CAEE,OAAMC,GAAN,EAAW;AACX5T,sBAAQmD,IAAR,CAAa,sDAAsDuQ,IAAtD,GAA6D,GAA1E,EAA+EE,GAA/E;AACD;;AAED,gBAAI;AACF,kBAAID,YAAJ,EAAkB;AAChBtO,wBAAQ+L,GAAGyC,aAAH,CAAiBF,YAAjB,KAAkCvC,GAAGtX,UAAH,CAAc+Z,aAAd,CAA4BF,YAA5B,CAA1C;AACD;AACF,aAJD,CAIE,OAAMC,GAAN,EAAW;AACX5T,sBAAQmD,IAAR,CAAa,2BAA2BwQ,YAA3B,GAA0C,GAAvD,EAA4DC,GAA5D;AACD;;AAED,gBAAIvO,KAAJ,EAAW;AACT,kBAAIyO,WAAWb,gBAAgBA,cAAcS,KAAKC,YAAnB,CAAhB,GAAmDD,KAAKC,YAAvE;AACA,kBAAII,UAAUb,cAAcA,YAAYQ,KAAK5V,KAAL,CAAWiW,OAAvB,CAAd,GAAgDL,KAAK5V,KAAL,CAAWiW,OAAzE;AACAZ,qBAAOW,WAAW,KAAX,GAAmBC,OAAnB,GAA6B,MAApC;AACD,aAJD,MAIO,IAAGL,KAAKK,OAAL,CAAa1O,KAAb,CAAmB,aAAnB,CAAH,EAAsC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAI2O,gBAAgB,wBAApB;AACA;AACA,kBAAIC,eAAeP,KAAKK,OAAL,CAAa1O,KAAb,CAAmB2O,aAAnB,CAAnB;;AAEA,kBAAIE,kBAAmBD,gBAAgBA,aAAa,CAAb,CAAjB,IAAqC,EAA3D;AACA,kBAAIE,mBAAmBD,gBAAgB7O,KAAhB,CAAsB,QAAtB,CAAvB;AACA,kBAAI8O,gBAAJ,EAAsB;AACpB;AACAD,kCAAkB,EAAlB;AACD;;AAED,kBAAIA,eAAJ,EAAqB;AACnB;;AAEA;AACA,oBAAIA,gBAAgBE,UAAhB,CAA2B,KAA3B,CAAJ,EAAuC;AACrCF,oCAAkBb,OAAO5U,CAAP,EAAUsT,IAAV,GAAiB,MAAjB,GAA0BmC,eAA5C;AACD,iBAFD,MAEO,IAAIA,gBAAgBE,UAAhB,CAA2B,IAA3B,CAAJ,EAAsC;AAC3CF,oCAAkBb,OAAO5U,CAAP,EAAUsT,IAAV,GAAiB,IAAjB,GAAwBmC,eAA1C;AACD;;AAEDd,2BAAW9T,IAAX,CAAgB;AACdvB,wBAAM2V,KAAKK,OADG;AAEd;AACAC,iCAAeA,aAHD;AAIdK,0BAAQC,uBAAuBJ,eAAvB,CAJM;AAKd5C,uBAAK4C;AALS,iBAAhB;AAOD,eAjBD,MAiBO;AACL;AACAf,uBAAOO,KAAKK,OAAL,GAAe,IAAtB;AACD;AACF;AACF;AACF;AACF;AACF;;AAED;AACAQ,qBAAiBnB,UAAjB;;AAEA,aAASkB,sBAAT,CAAgCE,OAAhC,EAAyC;AACvC,UAAIC,mBAAmB;AACrB,iBAAS,YADY;AAErB,gBAAQ,WAFa;AAGrB,eAAO,6BAHc;AAIrB,eAAO,wBAJc;AAKrB,eAAO,+BALc;AAMrB,gBAAQ,uBANa;AAOrB,eAAO;AAPc,OAAvB;AASA,UAAIC,aAAa3Y,OAAOc,IAAP,CAAY4X,gBAAZ,CAAjB;AACA,WAAK,IAAIhW,IAAI,CAAb,EAAgBA,IAAIiW,WAAW5Y,MAA/B,EAAuC,EAAE2C,CAAzC,EAA4C;AAC1C,YAAIkW,YAAYD,WAAWjW,CAAX,CAAhB;AACA;AACA,YAAI+V,QAAQI,OAAR,CAAgB,MAAMD,SAAtB,IAAmC,CAAvC,EAA0C;AACxC,iBAAOF,iBAAiBE,SAAjB,CAAP;AACD;AACF;;AAED;AACA3U,cAAQI,KAAR,CAAc,6BAA6BoU,OAA7B,GAAsC,sCAApD;AACA,aAAO,0BAAP;AACD;;AAED,aAASD,gBAAT,CAA0BM,KAA1B,EAAiC;AAC/B,UAAIA,MAAM/Y,MAAN,GAAe,CAAnB,EAAsB;AACpB;AACA,YAAIuG,OAAOwS,MAAMC,GAAN,EAAX;AACAC,oBAAY1S,IAAZ;AACD,OAJD,MAIO;AACL;AACA2Q,0BAAkBG,GAAlB;AACD;;AAED,eAAS4B,WAAT,CAAqB1S,IAArB,EAA2B;AACzB;AACA,YAAI2S,OAAO,IAAIC,cAAJ,EAAX;AACAD,aAAKE,gBAAL,CAAsB,MAAtB,EAA8BC,UAA9B;AACAH,aAAKE,gBAAL,CAAsB,OAAtB,EAA+BE,cAA/B;AACAJ,aAAKE,gBAAL,CAAsB,OAAtB,EAA+BE,cAA/B;AACAJ,aAAKK,IAAL,CAAU,KAAV,EAAiBhT,KAAKiP,GAAtB;AACA0D,aAAKM,YAAL,GAAoB,aAApB;AACAN,aAAKO,IAAL;;AAEA,iBAASJ,UAAT,GAAsB;AACpB;AACA;AACA,cAAIK,WAAWR,KAAKS,QAApB;AACA,cAAIC,eAAeC,oBAAoBH,QAApB,CAAnB;AACAI,0BAAgBvT,IAAhB,EAAsBqT,YAAtB;AACD;;AAED,iBAASN,cAAT,CAAwBlS,CAAxB,EAA2B;AACzBlD,kBAAQmD,IAAR,CAAa,+BAA+Bd,KAAKiP,GAAjD;AACAtR,kBAAQmD,IAAR,CAAaD,CAAb;AACAiQ,iBAAO9Q,KAAKtE,IAAL,GAAY,IAAnB;AACAwW;AACD;;AAED,iBAASqB,eAAT,CAAyBvT,IAAzB,EAA+BqT,YAA/B,EAA6C;AAC3C,cAAIG,UAAU,eAAexT,KAAKgS,MAApB,GAA6B,UAA7B,GAA0CqB,YAA1C,GAAyD,IAAvE;AACAvC,iBAAO9Q,KAAKtE,IAAL,CAAUqH,OAAV,CAAkB/C,KAAK2R,aAAvB,EAAsC6B,OAAtC,IAAiD,IAAxD;;AAEA;AACAhT,qBAAW,YAAW;AACpB0R,6BAAiBM,KAAjB;AACD,WAFD,EAEG,CAFH;AAGD;AAEF;AACF;;AAED,aAASc,mBAAT,CAA6BG,MAA7B,EAAqC;AACnC,UAAIC,SAAS,EAAb;AACA,UAAIC,QAAQ,IAAIC,UAAJ,CAAeH,MAAf,CAAZ;AACA,UAAII,MAAMF,MAAMG,UAAhB;;AAEA,WAAK,IAAI1X,IAAI,CAAb,EAAgBA,IAAIyX,GAApB,EAAyBzX,GAAzB,EAA8B;AAC1BsX,kBAAUK,OAAOC,YAAP,CAAoBL,MAAMvX,CAAN,CAApB,CAAV;AACH;;AAED,aAAO2H,OAAOkQ,IAAP,CAAYP,MAAZ,CAAP;AACD;AACF;;AAED,WAASQ,YAAT,CAAsBnF,EAAtB,EAA0BoF,KAA1B,EAAiCC,GAAjC,EAAsC;AACpC,QAAIC,IAAKtF,GAAGuF,OAAH,IAAcvF,GAAGuF,OAAH,CAAWC,OAAzB,IAAoCxF,GAAGuF,OAAH,CAAWC,OAAX,CAAmBH,GAAnB,CAArC,IACLD,MAAMhE,YAAN,CAAmBiE,GAAnB,MAA4B,IAA5B,IAAoC,CAACD,MAAMhE,YAAN,CAAmBiE,GAAnB,EAAwBpR,KAAxB,CAA8B,IAA9B,CAArC,IAA4EwR,SAASL,MAAMhE,YAAN,CAAmBiE,GAAnB,CAAT,CADvE,IAENrF,GAAG9W,qBAAH,GAA2Bmc,GAA3B,CAFM,IAGNI,SAASL,MAAM1Y,KAAN,CAAY2Y,GAAZ,CAAT,CAHM,IAINI,SAASzQ,OAAO0Q,gBAAP,CAAwB1F,EAAxB,EAA4B2F,gBAA5B,CAA6CN,GAA7C,CAAT,CAJF;AAKA,WAAQ,OAAOC,CAAP,KAAa,WAAb,IAA4BA,MAAM,IAAlC,IAA0CM,MAAMC,WAAWP,CAAX,CAAN,CAA3C,GAAmE,CAAnE,GAAuEA,CAA9E;AACD;;AAED,WAASQ,QAAT,CAAkB/b,IAAlB,EAAwB;AACtBA,WAAOgc,mBAAmBhc,IAAnB,CAAP;AACAA,WAAOA,KAAKiK,OAAL,CAAa,iBAAb,EAAgC,UAASC,KAAT,EAAgB+R,EAAhB,EAAoB;AACzD,UAAIpS,IAAIoR,OAAOC,YAAP,CAAoB,OAAKe,EAAzB,CAAR;AACA,aAAOpS,MAAM,GAAN,GAAY,KAAZ,GAAoBA,CAA3B;AACD,KAHM,CAAP;AAIA,WAAOqS,mBAAmBlc,IAAnB,CAAP;AACD;;AAED2V,OAAKwG,UAAL,GAAkB,UAASlG,EAAT,EAAatY,OAAb,EAAsBmI,EAAtB,EAA0B;AAC1CkQ,mBAAeC,EAAf;;AAEAtY,cAAUA,WAAW,EAArB;AACAA,YAAQ4O,KAAR,GAAgB5O,QAAQ4O,KAAR,IAAiB,CAAjC;AACA5O,YAAQye,UAAR,GAAqBze,QAAQye,UAAR,IAAsB,KAA3C;AACA,QAAIC,QAAQ,+BAAZ;;AAEA9F,iBAAaN,EAAb,EAAiB,YAAW;AAC1B,UAAIqG,QAAQxF,SAASC,aAAT,CAAuB,KAAvB,CAAZ;AACA,UAAIsE,QAAQpF,GAAGsG,SAAH,CAAa,IAAb,CAAZ;AACA,UAAIvd,KAAJ,EAAWK,MAAX;AACA,UAAG4W,GAAG1X,OAAH,IAAc,KAAjB,EAAwB;AACtBS,gBAAQrB,QAAQqB,KAAR,IAAiBoc,aAAanF,EAAb,EAAiBoF,KAAjB,EAAwB,OAAxB,CAAzB;AACAhc,iBAAS1B,QAAQ0B,MAAR,IAAkB+b,aAAanF,EAAb,EAAiBoF,KAAjB,EAAwB,QAAxB,CAA3B;AACD,OAHD,MAGO,IAAGpF,GAAGjJ,OAAN,EAAe;AACpB,YAAIwP,MAAMvG,GAAGjJ,OAAH,EAAV;AACAhO,gBAAQwd,IAAI1a,CAAJ,GAAQ0a,IAAIxd,KAApB;AACAK,iBAASmd,IAAIza,CAAJ,GAAQya,IAAInd,MAArB;AACAgc,cAAMoB,YAAN,CAAmB,WAAnB,EAAgCpB,MAAMhE,YAAN,CAAmB,WAAnB,EAAgCpN,OAAhC,CAAwC,kBAAxC,EAA4D,EAA5D,CAAhC;;AAEA,YAAIyS,MAAM5F,SAAS6F,eAAT,CAAyB,4BAAzB,EAAsD,KAAtD,CAAV;AACAD,YAAIE,WAAJ,CAAgBvB,KAAhB;AACAA,gBAAQqB,GAAR;AACD,OATM,MASA;AACL7X,gBAAQI,KAAR,CAAc,qCAAd,EAAqDgR,EAArD;AACA;AACD;;AAEDoF,YAAMoB,YAAN,CAAmB,SAAnB,EAA8B,KAA9B;AACA,UAAI,CAACpB,MAAMhE,YAAN,CAAmB,OAAnB,CAAL,EAAkC;AAChCgE,cAAM5D,cAAN,CAAqB4E,KAArB,EAA4B,OAA5B,EAAqC,4BAArC;AACD;AACD,UAAI,CAAChB,MAAMhE,YAAN,CAAmB,aAAnB,CAAL,EAAwC;AACtCgE,cAAM5D,cAAN,CAAqB4E,KAArB,EAA4B,aAA5B,EAA2C,8BAA3C;AACD;;AAED,UAAI1e,QAAQye,UAAZ,EAAwB;AACtBf,cAAMwB,eAAN,CAAsB,OAAtB;AACAxB,cAAMwB,eAAN,CAAsB,QAAtB;AACAxB,cAAMoB,YAAN,CAAmB,qBAAnB,EAA0C,eAA1C;AACD,OAJD,MAIO;AACLpB,cAAMoB,YAAN,CAAmB,OAAnB,EAA4Bzd,QAAQrB,QAAQ4O,KAA5C;AACA8O,cAAMoB,YAAN,CAAmB,QAAnB,EAA6Bpd,SAAS1B,QAAQ4O,KAA9C;AACD;;AAED8O,YAAMoB,YAAN,CAAmB,SAAnB,EAA8B,CAC5B9e,QAAQoB,IAAR,IAAgB,CADY,EAE5BpB,QAAQiB,GAAR,IAAe,CAFa,EAG5BI,KAH4B,EAI5BK,MAJ4B,EAK5Byd,IAL4B,CAKvB,GALuB,CAA9B;;AAOA,UAAIC,MAAM1B,MAAM5E,gBAAN,CAAuB,mBAAvB,CAAV;AACA,WAAK,IAAInT,IAAI,CAAb,EAAgBA,IAAIyZ,IAAIpc,MAAxB,EAAgC2C,GAAhC,EAAqC;AACnC,YAAI,CAACyZ,IAAIzZ,CAAJ,EAAO+T,YAAP,CAAoB,OAApB,CAAL,EAAmC;AACjC0F,cAAIzZ,CAAJ,EAAOmU,cAAP,CAAsB4E,KAAtB,EAA6B,OAA7B,EAAsC,8BAAtC;AACD;AACF;;AAEDC,YAAMM,WAAN,CAAkBvB,KAAlB;;AAEA;AACA;AACA;AACA;AACAzD,aAAO3B,EAAP,EAAWtY,OAAX,EAAoBka,iBAApB;;AAEA,eAASA,iBAAT,CAA2BG,GAA3B,EAAgC;AAC9B;AACA,YAAI1I,IAAIwH,SAASC,aAAT,CAAuB,OAAvB,CAAR;AACAzH,UAAEmN,YAAF,CAAe,MAAf,EAAuB,UAAvB;AACAnN,UAAE0N,SAAF,GAAc,gBAAgBhF,GAAhB,GAAsB,OAApC;AACA,YAAIiF,OAAOnG,SAASC,aAAT,CAAuB,MAAvB,CAAX;AACAkG,aAAKL,WAAL,CAAiBtN,CAAjB;AACA+L,cAAM6B,YAAN,CAAmBD,IAAnB,EAAyB5B,MAAM8B,UAA/B;;AAEA,YAAIrX,EAAJ,EAAQ;AACN,cAAIsX,UAAUd,MAAMU,SAApB;AACAI,oBAAUA,QAAQnT,OAAR,CAAgB,cAAhB,EAAgC,uDAAhC,CAAV;AACAnE,aAAGsX,OAAH,EAAYpe,KAAZ,EAAmBK,MAAnB;AACD;AACF;AACF,KA3ED;AA4ED,GApFD;;AAsFAsW,OAAK0H,YAAL,GAAoB,UAASpH,EAAT,EAAatY,OAAb,EAAsBmI,EAAtB,EAA0B;AAC5C6P,SAAKwG,UAAL,CAAgBlG,EAAhB,EAAoBtY,OAApB,EAA6B,UAAS+e,GAAT,EAAc;AACzC,UAAIY,MAAM,+BAA+BrS,OAAOkQ,IAAP,CAAYY,SAASnG,UAAU8G,GAAnB,CAAZ,CAAzC;AACA,UAAI5W,EAAJ,EAAQ;AACNA,WAAGwX,GAAH;AACD;AACF,KALD;AAMD,GAPD;;AASA3H,OAAK4H,WAAL,GAAmB,UAAStH,EAAT,EAAatY,OAAb,EAAsBmI,EAAtB,EAA0B;AAC3CkQ,mBAAeC,EAAf;;AAEAtY,cAAUA,WAAW,EAArB;AACAA,YAAQ6f,WAAR,GAAsB7f,QAAQ6f,WAAR,IAAuB,WAA7C;AACA7f,YAAQ8f,cAAR,GAAyB9f,QAAQ8f,cAAR,IAA0B,GAAnD;;AAEA,QAAIC,eAAe,SAAfA,YAAe,CAASpG,GAAT,EAAcqG,CAAd,EAAiBC,CAAjB,EAAoB;AACrC,UAAIpc,SAASsV,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACA,UAAI8G,UAAUrc,OAAOyV,UAAP,CAAkB,IAAlB,CAAd;AACAzV,aAAOxC,KAAP,GAAe2e,CAAf;AACAnc,aAAOnC,MAAP,GAAgBue,CAAhB;;AAEA,UAAGjgB,QAAQmgB,KAAX,EAAkB;AAChBngB,gBAAQmgB,KAAR,CAActc,MAAd,EAAsB8V,GAAtB;AACD,OAFD,MAEO;AACLuG,gBAAQrG,SAAR,CAAkBF,GAAlB,EAAuB,CAAvB,EAA0B,CAA1B;AACD;;AAED,UAAG3Z,QAAQogB,eAAX,EAA2B;AACzBF,gBAAQG,wBAAR,GAAmC,kBAAnC;AACAH,gBAAQI,SAAR,GAAoBtgB,QAAQogB,eAA5B;AACAF,gBAAQK,QAAR,CAAiB,CAAjB,EAAoB,CAApB,EAAuB1c,OAAOxC,KAA9B,EAAqCwC,OAAOnC,MAA5C;AACD;;AAED,UAAI8e,GAAJ;AACA,UAAI;AACFA,cAAM3c,OAAOkW,SAAP,CAAiB/Z,QAAQ6f,WAAzB,EAAsC7f,QAAQ8f,cAA9C,CAAN;AACD,OAFD,CAEE,OAAO1V,CAAP,EAAU;AACV,YAAK,OAAOqW,aAAP,KAAyB,WAAzB,IAAwCrW,aAAaqW,aAAtD,IAAwErW,EAAErI,IAAF,IAAU,eAAtF,EAAuG;AACrGmF,kBAAQI,KAAR,CAAc,2DAAd;AACA;AACD,SAHD,MAGO;AACL,gBAAM8C,CAAN;AACD;AACF;AACDjC,SAAGqY,GAAH;AACD,KA9BD;;AAgCA,QAAGxgB,QAAQmgB,KAAX,EAAkB;AAChBnI,WAAKwG,UAAL,CAAgBlG,EAAhB,EAAoBtY,OAApB,EAA6B+f,YAA7B;AACD,KAFD,MAEO;AACL/H,WAAK0H,YAAL,CAAkBpH,EAAlB,EAAsBtY,OAAtB,EAA+B,UAAS2f,GAAT,EAAc;AAC3C,YAAI3G,QAAQ,IAAIQ,KAAJ,EAAZ;;AAEAR,cAAMY,MAAN,GAAe,YAAW;AACxBmG,uBAAa/G,KAAb,EAAoBA,MAAM3X,KAA1B,EAAiC2X,MAAMtX,MAAvC;AACD,SAFD;;AAIAsX,cAAMgB,OAAN,GAAgB,YAAW;AACzB9S,kBAAQI,KAAR,CACE,4EADF,EAEEgG,OAAOoT,IAAP,CAAYf,IAAIna,KAAJ,CAAU,EAAV,CAAZ,CAFF,EAE8B,IAF9B,EAGE,sDAHF,EAIEma,GAJF;AAKD,SAND;;AAQA3G,cAAMW,GAAN,GAAYgG,GAAZ;AACD,OAhBD;AAiBD;AACF,GA5DD;;AA8DA3H,OAAK2I,QAAL,GAAgB,UAAS5e,IAAT,EAAe4d,GAAf,EAAoB;AAClC,QAAIiB,UAAUC,gBAAd,EAAgC;AAC9BD,gBAAUC,gBAAV,CAA2BC,UAAUnB,GAAV,CAA3B,EAA2C5d,IAA3C;AACD,KAFD,MAEO;AACL,UAAIgf,WAAW5H,SAASC,aAAT,CAAuB,GAAvB,CAAf;AACA,UAAI4H,oBAAoB,cAAcD,QAAtC;AACA,UAAIC,iBAAJ,EAAuB;AACrBD,iBAASJ,QAAT,GAAoB5e,IAApB;AACAgf,iBAAS/b,KAAT,CAAeic,OAAf,GAAyB,MAAzB;AACA9H,iBAAS+H,IAAT,CAAcjC,WAAd,CAA0B8B,QAA1B;AACA,YAAI;AACF,cAAII,OAAOL,UAAUnB,GAAV,CAAX;AACA,cAAInH,MAAM4I,IAAIC,eAAJ,CAAoBF,IAApB,CAAV;AACAJ,mBAAS9H,IAAT,GAAgBT,GAAhB;AACAuI,mBAASO,OAAT,GAAmB,YAAW;AAC5BC,kCAAsB,YAAW;AAC/BH,kBAAII,eAAJ,CAAoBhJ,GAApB;AACD,aAFD;AAGD,WAJD;AAKD,SATD,CASE,OAAOpO,CAAP,EAAU;AACVlD,kBAAQmD,IAAR,CAAa,wEAAb;AACA0W,mBAAS9H,IAAT,GAAgB0G,GAAhB;AACD;AACDoB,iBAAS3O,KAAT;AACA+G,iBAAS+H,IAAT,CAAcO,WAAd,CAA0BV,QAA1B;AACD,OAnBD,MAoBK;AACHzT,eAAOiP,IAAP,CAAYoD,GAAZ,EAAiB,OAAjB,EAA0B,iCAA1B;AACD;AACF;AACF,GA9BD;;AAgCA,WAASmB,SAAT,CAAmBnB,GAAnB,EAAwB;AACtB,QAAI+B,aAAapU,OAAOoT,IAAP,CAAYf,IAAI/c,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAZ,CAAjB;AACA,QAAI+e,aAAahC,IAAI/c,KAAJ,CAAU,GAAV,EAAe,CAAf,EAAkBA,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,EAAgCA,KAAhC,CAAsC,GAAtC,EAA2C,CAA3C,CAAjB;AACA,QAAIoa,SAAS,IAAI4E,WAAJ,CAAgBF,WAAW1e,MAA3B,CAAb;AACA,QAAI6e,WAAW,IAAI1E,UAAJ,CAAeH,MAAf,CAAf;AACA,SAAK,IAAIrX,IAAI,CAAb,EAAgBA,IAAI+b,WAAW1e,MAA/B,EAAuC2C,GAAvC,EAA4C;AAC1Ckc,eAASlc,CAAT,IAAc+b,WAAWI,UAAX,CAAsBnc,CAAtB,CAAd;AACD;AACD,WAAO,IAAIoc,IAAJ,CAAS,CAAC/E,MAAD,CAAT,EAAmB,EAAC1U,MAAMqZ,UAAP,EAAnB,CAAP;AACD;;AAED3J,OAAKgK,OAAL,GAAe,UAAS1J,EAAT,EAAavW,IAAb,EAAmB/B,OAAnB,EAA4B;AACzCqY,mBAAeC,EAAf;;AAEAtY,cAAUA,WAAW,EAArB;AACAgY,SAAK0H,YAAL,CAAkBpH,EAAlB,EAAsBtY,OAAtB,EAA+B,UAAS2f,GAAT,EAAc;AAC3C3H,WAAK2I,QAAL,CAAc5e,IAAd,EAAoB4d,GAApB;AACD,KAFD;AAGD,GAPD;;AASA3H,OAAKH,YAAL,GAAoB,UAASS,EAAT,EAAavW,IAAb,EAAmB/B,OAAnB,EAA4B;AAC9CqY,mBAAeC,EAAf;;AAEAtY,cAAUA,WAAW,EAArB;AACAgY,SAAK4H,WAAL,CAAiBtH,EAAjB,EAAqBtY,OAArB,EAA8B,UAAS2f,GAAT,EAAc;AAC1C3H,WAAK2I,QAAL,CAAc5e,IAAd,EAAoB4d,GAApB;AACD,KAFD;AAGD,GAPD;;AASA;AACA,MAAI,IAAJ,EAAmC;AACjCsC,IAAA,mCAAO,YAAW;AAChB,aAAOjK,IAAP;AACD,KAFD;AAAA;AAGD;AAEF,CAreD,I;;;;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;IAEqBkK,O,WAMlB,6BAAS,iBAAT,C;;;AAJD,yBAA4D;AAAA,4BAA9CriB,OAA8C;AAAA,QAA9CA,OAA8C,gCAApC,KAAoC;AAAA,QAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,QAAnBC,eAAmB,QAAnBA,eAAmB;;AAAA;;AAAA,6GACpD,EAAEF,SAASA,OAAX,EAAoBC,UAAUA,QAA9B,EAAwCC,iBAAiBA,eAAzD,EADoD;AAE3D;;;;6BAGQ;AAAA;;AAEP,UAAIiI,WAAW/E,OAAOc,IAAP,CAAY,KAAK1B,IAAL,CAAUwB,MAAV,CAAiBmE,QAA7B,EAAuC/B,GAAvC,CAA2C,UAAC7C,GAAD,EAAS;AACjE,eAAO;AACLwG,cAAIxG,GADC;AAELkF,gBAAM,OAAKjG,IAAL,CAAUwB,MAAV,CAAiBmE,QAAjB,CAA0B5E,GAA1B,EAA+BkF,IAFhC;AAGLpD,iBAAO,OAAK7C,IAAL,CAAUwB,MAAV,CAAiBmE,QAAjB,CAA0B5E,GAA1B,EAA+B8B,KAHjC;AAILD,gBAAM,OAAK5C,IAAL,CAAUwB,MAAV,CAAiBmE,QAAjB,CAA0B5E,GAA1B,EAA+B6B;AAJhC,SAAP;AAMD,OAPc,CAAf;;AASA,UAAIkd,yBAAuB,KAAK9f,IAAL,CAAUwB,MAAV,CAAiB+F,EAA5C;AACA,WAAKnJ,OAAL,GAAeK,GAAGC,MAAH,OAAcohB,QAAd,CAAf;AACA;AACA,UAAI,CAAC,KAAK1hB,OAAL,CAAaE,IAAb,EAAL,EAA0B;AACxB,aAAKF,OAAL,GAAe,KAAKa,MAAL,CAAYsD,MAAZ,CAAmB,KAAnB,EAA0BrD,IAA1B,CAA+B,OAA/B,EAAwC,uBAAxC,EAAiEA,IAAjE,CAAsE,IAAtE,EAA4E4gB,QAA5E,CAAf;AACD;;AAED,UAAIhb,UAAU,KAAK1G,OAAL,CAAakE,SAAb,CAAuB,kBAAvB,EAA2CtC,IAA3C,CAAgD2F,QAAhD,EAA0D;AAAA,eAAKvD,EAAEmF,EAAP;AAAA,OAA1D,CAAd;AACA,UAAIwY,eAAejb,QAAQzB,KAAR,GAAgBd,MAAhB,CAAuB,KAAvB,EAA8BrD,IAA9B,CAAmC,IAAnC,EAAyC;AAAA,eAAKkD,EAAEmF,EAAP;AAAA,OAAzC,EAChBrI,IADgB,CACX,OADW,EACF;AAAA,uCAA2BkD,EAAE6D,IAA7B;AAAA,OADE,EACmCR,EADnC,CACsC,OADtC,EAC+C,YAAW;AACzEhH,WAAGC,MAAH,CAAU,IAAV,EAAgBiE,KAAhB,CAAsB,SAAtB,EAAiC,MAAjC;AACD,OAHgB,CAAnB;AAIAod,mBAAaxd,MAAb,CAAoB,MAApB,EAA4BrD,IAA5B,CAAiC,OAAjC,EAA0C,QAA1C,EAAoD0D,IAApD,CAAyD;AAAA,eAAKR,EAAES,KAAP;AAAA,OAAzD;AACAkd,mBAAaxd,MAAb,CAAoB,MAApB,EAA4BK,IAA5B,CAAiC;AAAA,eAAKR,EAAEQ,IAAP;AAAA,OAAjC;AACAmd,mBAAaxd,MAAb,CAAoB,MAApB,EAA4BrD,IAA5B,CAAiC,OAAjC,EAA0C,gBAA1C,EAA4DyD,KAA5D,CAAkE,SAAlE,EAA6E,MAA7E,EAAqFC,IAArF,CAA0F,GAA1F;;AAEAmd,mBAAaxc,KAAb,CAAmBuB,OAAnB;;AAEAA,cAAQ1B,IAAR,GAAeZ,MAAf;;AAEA,WAAKpE,OAAL,CAAauE,KAAb,CAAmB,SAAnB,EAA8B,OAA9B;;AAEA,aAAO,IAAP;AACD;;;+BAEU,CAAE;;;;;kBA3CMkd,O","file":"francy.bundle.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b35901799fe1e69d4d67","import Base from './base';\n\n/* global d3 */\n\nexport default class Renderer extends Base {\n\n  constructor({ verbose = false, appendTo, callbackHandler, options = {} }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler, options: options });\n    if (new.target === Renderer) {\n      throw new TypeError('Cannot construct [Renderer] instances directly!');\n    }\n    if (this.render === undefined || typeof this.render !== 'function') {\n      throw new TypeError('Must override [render()] method!');\n    }\n    if (this.unrender === undefined) {\n      this.logger.debug('No [unrender()] method specified...');\n    }\n    this.element = undefined;\n    this.transitionDuration = 750; //ms\n  }\n  \n  _initialize() {}\n\n  get HTMLParent() {\n    return this.options.appendTo.element.node().tagName.toLowerCase() === 'svg' ? d3.select(this.options.appendTo.element.node().parentNode) : this.options.appendTo.element;\n  }\n\n  get SVGParent() {\n    return this.options.appendTo.element.node().tagName.toLowerCase() === 'div' ? this.options.appendTo.element.select('svg') : this.options.appendTo.element;\n  }\n  \n  get parent() {\n    return this.options.appendTo.element;\n  }\n  \n  get margin() {\n    return { top: 50, right: 50, bottom: 50, left: 50 };\n  }\n  \n  get width() {\n    let width = +this.parent.attr('width') || d3.select('body').node().getBoundingClientRect().width;\n    return width - this.margin.left - this.margin.right;\n  }\n  \n  get height() {\n    let height = +this.parent.attr('height') || d3.select('body').node().getBoundingClientRect().height;\n    return height - this.margin.top - this.margin.bottom;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/renderer.js","export function requires(props) {\n  return function decorator(target, name, descriptor) {\n    var oldValue = descriptor.value;\n\n    descriptor.value = function() {\n      if (!hasData(getProperty(this.data, props))) {\n        this.logger.debug(`No data here [${props}], nothing to render... continuing...`);\n        return;\n      }\n      return oldValue.apply(this, arguments);\n    };\n\n    return descriptor;\n  };\n}\n\nexport function enabled(props) {\n  return function decorator(target, name, descriptor) {\n    var oldValue = descriptor.value;\n\n    descriptor.value = function() {\n      if (!getProperty(this.data, props)) {\n        this.logger.debug(`No data here [${props}], nothing to render... continuing...`);\n        return;\n      }\n      return oldValue.apply(this, arguments);\n    };\n\n    return descriptor;\n  };\n}\n\nfunction getProperty(obj, propertyPath) {\n\n  var tmp = obj;\n\n  if (tmp && propertyPath) {\n    var properties = propertyPath.split('.');\n\n    for (var property of properties) {\n      if (!tmp.hasOwnProperty(property)) {\n        tmp = undefined;\n        break;\n      } else {\n        tmp = tmp[property];\n      }\n    }\n  }\n\n  return tmp;\n}\n\nfunction hasData(obj) {\n  return obj && ((obj instanceof Array && obj.length) || (obj instanceof Object && Object.values(obj).length));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/data-decorator.js","export function initialize() {\n  return function (target, key, descriptor) {\n    var oldValue = descriptor.value;\n\n    descriptor.value = function() {\n      this._initialize();\n      return oldValue.apply(this, arguments);\n    };\n    return descriptor;\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/initialize-decorator.js","import Renderer from './renderer';\nimport Tooltip from './tooltip';\n\n/* global d3 */\n\nexport default class Chart extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    this.axis = undefined;\n    this.yScale = undefined;\n    this.xScale = undefined;\n    this.datasets = undefined;\n    this.datasetNames = undefined;\n    this.tooltip = undefined;\n  }\n  \n  _initialize() {\n    this.tooltip = new Tooltip(this.options);\n    \n    this.element = this.parent.select('g.francy-content');\n    \n    this.axis = this.data.canvas.chart.axis;\n    this.datasets = this.data.canvas.chart.data;\n    this.datasetNames = Object.keys(this.datasets);\n\n    this.xScale = d3.scaleLinear().range([0, this.width]).domain(this.axis.x.domain);\n    this.yScale = d3.scaleLinear().range([this.height, 0]).domain(this.axis.y.domain);\n    \n    this.allValues = [];\n    this.datasetNames.forEach(key => this.allValues = this.allValues.concat(this.datasets[key]));\n\n    if (!this.axis.y.domain.length) {\n      this.yScale.domain([0, d3.max(this.allValues, d => d)]);\n    }\n\n    if (!this.axis.x.domain.length) {\n      this.xScale.domain([0, this.allValues.length / this.datasetNames.length]);\n    }\n  }\n  \n  _renderAxis() {\n    // force rebuild axis again\n    let xAxisGroup = this.element.selectAll('g.francy-x-axis');\n\n    if (!xAxisGroup.node()) {\n      xAxisGroup = this.element.append('g').attr('class', 'francy-x-axis');\n    }\n\n    xAxisGroup.selectAll('*').remove();\n\n    // add the x Axis\n    xAxisGroup\n      .attr('transform', `translate(0,${this.height})`)\n      .call(d3.axisBottom(this.xScale))\n      .append('text')\n      .attr('dy', 50)\n      .attr('dx', this.width / 2)\n      .attr('fill', 'black')\n      .attr('class', 'francy-axis')\n      .style('text-anchor', 'end')\n      .text(this.axis.x.title);\n\n    // force rebuild axis again\n    let yAxisGroup = this.element.selectAll('g.francy-y-axis');\n\n    if (!yAxisGroup.node()) {\n      yAxisGroup = this.element.append('g').attr('class', 'francy-y-axis');\n    }\n\n    yAxisGroup.selectAll('*').remove();\n\n    // add the y Axis\n    yAxisGroup\n      .call(d3.axisLeft(this.yScale))\n      .append('text')\n      .attr('dx', -50)\n      .attr('dy', this.height / 2)\n      .attr('fill', 'black')\n      .attr('class', 'francy-axis')\n      .style('text-anchor', 'end')\n      .text(this.axis.y.title);\n  }\n  \n  _renderLegend() {\n    if (this.data.canvas.chart.showLegend) {\n\n      let legendGroup = this.element.selectAll('.francy-legend');\n\n      if (!legendGroup.node()) {\n        legendGroup = this.element.append('g').attr('class', 'francy-legend');\n      }\n\n      // force rebuild legend again\n      legendGroup.selectAll('*').remove();\n\n      let legend = legendGroup.selectAll('g').data(this.datasetNames.slice());\n\n      legend.exit().remove();\n\n      legend = legend.enter()\n        .append('g')\n        .attr('transform', (d, i) => `translate(0,${i * 20})`)\n        .merge(legend);\n\n      legend.append('rect')\n        .attr('x', this.width + 20)\n        .attr('width', 19)\n        .attr('height', 19)\n        .style('fill', (d, i) => Chart.colors(i * 5));\n\n      legend.append('text')\n        .attr('x', this.width + 80)\n        .attr('y', 9)\n        .attr('dy', '.35em')\n        .style('text-anchor', 'end')\n        .text(d => d);\n    }\n  }\n\n  static tooltip(dataset, value) {\n    return { 'A': { 'title': 'Dataset', 'text': dataset }, 'B': { 'title': 'Value', 'text': value } };\n  }\n\n  static get colors() {\n    return d3.scaleSequential().domain([0, 100]).interpolator(d3.interpolateRainbow);\n  }\n\n  static domainRange(max) {\n    return Array.from(new Array(max), (_, i) => i).map(x => x);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/chart.js","import Renderer from './renderer';\n\nexport default class Composite extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    if (new.target === Composite) {\n      throw new TypeError('Cannot construct [Composite] instances directly!');\n    }\n    this.renderers = [];\n  }\n\n  add(renderer) {\n    this.renderers.push(renderer);\n    return this;\n  }\n\n  renderChildren() {\n    // render other components\n    for (let renderer of this.renderers) {\n      renderer.settings({appendTo: this}).load(this.data).render();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/composite.js","import Logger from '../util/logger';\nimport JsonUtils from '../util/json-utils';\n\n/* global d3 */\n\nexport default class Base {\n\n  constructor({ verbose = false, appendTo = 'body', callbackHandler }) {\n    this.settings({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    /**\n     * @type {Logger} the logger for this class\n     */\n    this.log = new Logger(this.options);\n  }\n\n  settings({ verbose, appendTo, callbackHandler }) {\n    this.options = this.options || {};\n    if (!this.options.callbackHandler && !callbackHandler) {\n      throw new Error('A Callback Handler must be provided! This will be used to trigger events from the graphics produced...');\n    }\n    if (!this.options.appendTo && !appendTo) {\n      throw new Error('Missing an element or id to append the graphics to...!');\n    }\n    if (typeof appendTo === 'string') {\n      appendTo = d3.select(appendTo);\n    }\n    /**\n     * @typedef {Object} Options\n     * @property {Boolean} verbose prints extra log information to console.log, default false\n     * @property {Boolean} appendTo where the generated html/svg components will be attached to, default body\n     * @property {Function} callbackHandler this handler will be used to invoke actions from the menu, default console.log\n     */\n    this.options.verbose = verbose || this.options.verbose;\n    this.options.appendTo = appendTo || this.options.appendTo;\n    this.options.callbackHandler = callbackHandler || this.options.callbackHandler;\n    return this;\n  }\n\n  load(json, partial) {\n    let data = JsonUtils.parse(json, partial);\n    if (data) {\n      this.data = data;\n    }\n    return this;\n  }\n\n  get logger() {\n    return this.log;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/base.js","/**\n * This class provides a logger for the Francy application.\n */\nexport default class Logger {\n\n  /**\n   * Logger constructor\n   * @param verbose prints extra log information to console.log, defaults to false\n   */\n  constructor({ verbose = false } = {}) {\n    this.verbose = verbose;\n    this.console = console;\n  }\n\n  /**\n   * Creates a [DEBUG] entry in the console log\n   * @param message the message to print\n   */\n  debug(message) {\n    if (this.verbose) {\n      this.console.debug(Logger._format('DEBUG', message));\n    }\n  }\n\n  /**\n   * Creates a [INFO] entry in the console log\n   * @param message the message to print\n   */\n  info(message) {\n    this.console.info(Logger._format('INFO', message));\n  }\n\n  /**\n   * Creates a [ERROR] entry in the console log\n   * @param message the message to print\n   * @param error the error Object to attach to the message\n   */\n  error(message, error) {\n    this.console.error(Logger._format('ERROR', message), error);\n  }\n\n  /**\n   * Creates a [WARN] entry in the console log\n   * @param message the message to print\n   * @param error the error Object to attach to the message\n   */\n  warn(message, error) {\n    error = error || {};\n    this.console.error(Logger._format('WARN', message), error);\n  }\n\n  /**\n   * This is a private method that formats all log messages\n   * @param level the log level\n   * @param message the message to print\n   */\n  static _format(level, message) {\n    return `[${level}] - ${new Date().toISOString()} - ${message}`;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/logger.js","import Renderer from './renderer';\nimport MathJaxWrapper from './mathjax-wrapper';\nimport ContextMenu from './menu-context';\nimport Tooltip from './tooltip';\nimport Callback from './callback';\n\n/* global d3 */\n\nexport default class Graph extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n  \n  _initialize() {\n    this.element = this.parent.select('g.francy-content');\n  }\n\n  _applyEvents(element) {\n    if (!element) return;\n\n    let tooltip = new Tooltip(this.options);\n    let contextMenu = new ContextMenu(this.options);\n    let callback = new Callback(this.options);\n    let mathjax = new MathJaxWrapper(this.options);\n\n    element\n      .on('contextmenu', function(d) {\n        let data = d.data || d;\n        // default, build context menu\n        contextMenu.load(data, true).render();\n        // any callbacks will be handled here\n        executeCallback.call(this, data, 'contextmenu');\n      })\n      .on('click', function(d) {\n        let data = d.data || d;\n        // any callbacks will be handled here\n        executeCallback.call(this, data, 'click');\n      })\n      .on('dblclick', function(d) {\n        let data = d.data || d;\n        // any callbacks will be handled here\n        executeCallback.call(this, data, 'dblclick');\n      })\n      .on('mouseover', d => {\n        let data = d.data || d;\n        // default, show tooltip\n        tooltip.load(data.messages, true).render();\n        // add to do it here because of this.data to check for property canvas.texTypesetting \n        mathjax.settings({appendTo: tooltip}).load(this.data).render();\n      })\n      .on('mouseout', () => {\n        // default, hide tooltip\n        tooltip.unrender();\n      });\n\n    function executeCallback(data, event) {\n      if (data.callbacks) {\n        Object.values(data.callbacks).forEach((cb) => {\n          // execute the ones that match the event!\n          cb.trigger === event && callback.load({ callback: cb }, true).execute();\n        });\n      }\n    }\n  }\n\n  static get colors() {\n    return d3.scaleSequential().domain([0, 100]).interpolator(d3.interpolateRainbow);\n  }\n\n  static getSymbol(type) {\n    \n    let element = undefined;\n    switch (type) {\n    case 'cross':\n      element = d3.symbolCross;\n      break;\n    case 'diamond':\n      element = d3.symbolDiamond;\n      break;\n    case 'square':\n      element = d3.symbolSquare;\n      break;\n    case 'triangle':\n      element = d3.symbolTriangle;\n      break;\n    case 'star':\n      element = d3.symbolStar;\n      break;\n    case 'wye':\n      element = d3.symbolWye;\n      break;\n    case 'circle':\n    default:\n      element = d3.symbolCircle;\n    }\n\n    return element;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/graph.js","import Renderer from './renderer';\nimport { enabled } from '../util/data-decorator';\n\n/* global MathJax, d3 */\n\nexport default class MathJaxWrapper extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @enabled('canvas.texTypesetting')\n  render() {\n    this.element = this.options.appendTo.element;\n    try {\n      MathJax.Hub.Config({\n        showMathMenu: false,\n        skipStartupTypeset: true,\n        tex2jax: {\n          inlineMath: [\n            ['$', '$'],\n            ['\\\\(', '\\\\)']\n          ],\n          processEscapes: true\n        },\n        'HTML-CSS': {\n          font: 'STIX-Web', \n          linebreaks: { \n            automatic: true \n          }\n        },\n        'SVG': {\n          font: 'STIX-Web', \n          linebreaks: { \n            automatic: true \n          }\n        }\n      });\n\n      MathJax.Hub.Register.MessageHook('New Math', function(id) {\n        if (id && id.length > 1) {\n          var mathJaxElement = d3.select(`#${id[1]}-Frame`);\n          var svgMathJaxElement = mathJaxElement.select('svg');\n          if (svgMathJaxElement.node()) {\n            setTimeout(() => {\n              setTimeout(() => {\n                let bound = svgMathJaxElement.select('g').node().getBoundingClientRect();\n                svgMathJaxElement.attr('x', -bound.width / 2);\n                svgMathJaxElement.attr('y', -15);\n              }, 50);\n              d3.select(mathJaxElement.node().parentNode.parentNode).append(function() {\n                return svgMathJaxElement.node();\n              });\n            }, 25);\n          }\n        }\n      });\n      \n      var svgElement = this.element.select('svg');\n      if (svgElement.node()) {\n        MathJax.Hub.Queue(\n          ['setRenderer', MathJax.Hub, 'SVG'],\n          ['Typeset', MathJax.Hub, svgElement.node()],\n          ['setRenderer', MathJax.Hub, 'HTML-CSS'],\n          ['Typeset', MathJax.Hub, this.element.node()],\n        );\n      } else {\n        MathJax.Hub.Queue(\n          ['setRenderer', MathJax.Hub, 'HTML-CSS'],\n          ['Typeset', MathJax.Hub, this.element.node()],\n        );\n      }\n\n      MathJax.Hub.Configured();\n    } catch (e) {\n      if (e.name === 'ReferenceError') {\n        this.logger.warn('It seems MathJax is not loaded...', e);\n      } else {\n        this.logger.error('Not sure what happened :/', e);\n      }\n    }\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/mathjax-wrapper.js","import Renderer from './renderer';\nimport Callback from './callback';\n\nexport default class Menu extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  traverse(appendTo, menusIterator) {\n    while (menusIterator.hasNext()) {\n      let menuItem = menusIterator.next();\n      let entry = appendTo.append('li');\n      let action = entry.selectAll('a').data([menuItem]).enter().append('a').attr('title', menuItem.title).html(menuItem.title);\n      if (menuItem.callback && Object.values(menuItem.callback).length) {\n        action.on('click', (d) => new Callback(this.options).load(d, true).execute());\n      }\n      if (menuItem.menus && Object.values(menuItem.menus).length > 0) {\n        let content = entry.append('ul');\n        let subMenusIterator = this.iterator(Object.values(menuItem.menus));\n        this.traverse(content, subMenusIterator);\n      }\n    }\n  }\n\n  iterator(array) {\n    let nextIndex = 0;\n    return {\n      next: function() {\n        return this.hasNext() ? array[nextIndex++] : undefined;\n      },\n      hasNext: function() {\n        return nextIndex < array.length;\n      }\n    };\n  }\n\n  unrender() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/menu.js","import Base from './base';\nimport RequiredArgsModal from './modal-required';\nimport { requires } from '../util/data-decorator';\n\nexport default class CallbackHandler extends Base {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    this.callback = callbackHandler;\n  }\n\n  @requires('callback')\n  execute() {\n    if (Object.keys(this.data.callback.requiredArgs).length) {\n      let options = this.options;\n      options.callbackHandler = (callbackObj) => this._execute.call(this, callbackObj);\n      return new RequiredArgsModal(options).load(this.data, true).render();\n    }\n    \n    // Trigger is the expected command on GAP for this events!\n    this._execute(this.data.callback);\n    \n  }\n\n  _execute(calbackObj) {\n    this.callback(`Trigger(${JSON.stringify(JSON.stringify(calbackObj))});`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/callback.js","import Renderer from './renderer';\n\n/* global d3 */\n\nexport default class Modal extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    this.overlay = undefined;\n    this.holder = undefined;\n  }\n  \n  _initialize() {\n    // we want to overlay everything, hence 'body' must be used\n    this.overlay = d3.select('body').append('div').attr('class', 'francy-overlay');\n    this.holder = d3.select('body').append('div').attr('class', 'francy');\n  }\n  \n  unrender() {\n    this.overlay.remove();\n    this.element.remove();\n    this.holder.remove();\n    return false;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/modal.js","import Logger from './logger';\n\n/* global Jupyter */\n\nexport function RegisterJupyterKeyboardEvents(classes) {\n  // disable keyboard shortcuts in Jupyter for classes\n  if (!classes) return;\n  try {\n    classes.map((c) => {\n      Jupyter.keyboard_manager.register_events(c);\n    });\n  } catch (e) {\n    if (e.name === 'ReferenceError') {\n      new Logger().info('It seems we\\'re not running on Jupyter...', e);\n    }\n  }\n}\n\n// credits here: https://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript#answer-7220510\nexport function syntaxHighlight(json) {\n  json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function(match) {\n    let cls = 'number';\n    if (/^\"/.test(match)) {\n      if (/:$/.test(match)) {\n        cls = 'key';\n      } else {\n        cls = 'string';\n      }\n    } else if (/true|false/.test(match)) {\n      cls = 'boolean';\n    } else if (/null/.test(match)) {\n      cls = 'null';\n    }\n    return '<span class=\"' + cls + '\">' + match + '</span>';\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/component.js","import Renderer from './renderer';\nimport { requires } from '../util/data-decorator';\n\n/* global d3 */\n\nexport default class Tooltip extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @requires()\n  render() {\n\n    this.element = this.HTMLParent.select('div.francy-tooltip-holder');\n    // check if the window is already present\n    if (!this.element.node()) {\n      this.element = this.HTMLParent.append('div')\n        .attr('class', 'francy-tooltip-holder');\n    }\n\n    // check if it exists already\n    if (this.element.selectAll('*').node()) {\n      return;\n    }\n\n    let pos = d3.mouse(this.SVGParent.node());\n\n    // TODO fix always visible tooltip, fine until someone complains about :P\n    this.element.style('left', (pos[0] + 15) + 'px').style('top', (pos[1] - 15) + 'px');\n\n    let table = this.element.append('div').attr('class', 'francy-tooltip')\n      .append('div').attr('class', 'francy-table')\n      .append('div').attr('class', 'francy-table-body');\n    let self = this;\n    Object.keys(this.data).map(function(key) {\n      let row = table.append('div').attr('class', 'francy-table-row');\n      row.append('div').attr('class', 'francy-table-cell').text(self.data[key].title);\n      row.append('div').attr('class', 'francy-table-cell').text(self.data[key].text);\n    });\n\n    // show tooltip\n    this.element.style('display', 'block');\n\n    return this;\n  }\n\n  unrender() {\n    if (this.element) {\n      this.element.selectAll('*').remove();\n      this.element.style('display', null);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/tooltip.js","import Frame from './render/frame';\nimport Renderer from './render/renderer';\nimport { requires } from './util/data-decorator';\n\n/* global d3 */\n\nlet ALL_CANVAS = {};\n\n/**\n * Francy is the main entry point for the whole framework. By passing an input string/object to the {Francy.load} function,\n * Francy will handle the creation of that json as long it is a valid and understandable json object to Francy.\n *  \n * @access public\n * \n * @version 0.5.x\n * \n * @example\n * let francy = new Francy({verbose: true, appendTo: '#div-id', callbackHandler: console.log});\n * francy.load(json).render();\n */\nexport default class Francy extends Renderer {\n\n  /**\n   * Creates an instance of Francy with the following options:\n   * @typedef {Object} Options\n   * @property {Boolean} verbose prints extra log information to console.log, default false\n   * @property {Boolean} appendTo where the generated html/svg components will be attached to, default body\n   * @property {Function} callbackHandler this handler will be used to invoke actions from the menu, default console.log\n   */\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    if (!d3) {\n      throw new Error('D3 is not imported! Francy won\\'t work without it... please import D3 v4+.');\n    }\n  }\n\n  /**\n   * Main entry point. Calling render passing a json representation string will \n   * trigger the drawing of a json object.\n   * @returns {Object} the html element created\n   */\n  @requires('canvas')\n  render() {\n    let frame = new Frame(this.options).load(this.data).render();\n    ALL_CANVAS[this.data.canvas.id] = frame;\n    return frame.element.node();\n  }\n\n  static unrender(id) {\n    delete ALL_CANVAS[id];\n  }\n}\n\ntry {\n  exports.Francy = window.Francy = Francy;\n  // handle events on resize\n  let oldResize = window.onresize;\n  window.onresize = function() {\n    // zoom to fit all canvas on resize\n    Object.values(ALL_CANVAS).forEach(function(frame) {\n      frame.canvas.zoomToFit();\n    });\n    // call old resize function if any!\n    if (typeof oldResize === 'function') {\n      oldResize();\n    }\n  };\n} catch (e) {\n  exports.Francy = Francy;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/francy.js","import Composite from './composite';\nimport Canvas from './canvas';\nimport MainMenu from './menu-main';\nimport Message from './message';\nimport MathJaxWrapper from './mathjax-wrapper';\nimport { requires } from '../util/data-decorator';\n\n/* global d3 */\n\nexport default class Frame extends Composite {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    this.canvas = new Canvas(this.options);\n    this.menu = new MainMenu(this.options);\n    this.messages = new Message(this.options);\n    this.mathjax = new MathJaxWrapper(this.options);\n    this.add(this.messages).add(this.menu).add(this.canvas).add(this.mathjax);\n  }\n\n  @requires('canvas')\n  render() {\n    let parent = this.options.appendTo;\n\n    const frameId = `Frame-${this.data.canvas.id}`;\n    this.element = d3.select(`div#${frameId}`);\n    // check if the canvas is already present\n    if (!this.element.node()) {\n      // create a svg element detached from the DOM!\n      this.logger.debug(`Creating Frame [${frameId}]...`);\n      this.element = parent.append('div').attr('class', 'francy').attr('id', frameId);\n    }\n\n    // cannot continue if canvas is not present\n    if (!this.element.node()) {\n      throw new Error(`Oops, could not create frame with id [${frameId}]... Cannot proceed.`);\n    }\n\n    this.logger.debug(`Frame updated [${frameId}]...`);\n\n    this.renderChildren();\n\n    return this;\n  }\n\n  unrender() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/frame.js","/**\n * This class contains methods to deal with JSON.\n */\nexport default class JsonUtils {\n\n  /**\n   * Parses an input nd checks whether this input is valid and returns a JSON object.\n   * @param input - the input to parse\n   * @param partial - if the input is not a complete Francy JSON Object, defaults to false\n   * @returns {json} - if the input is a valid JSON object, otherwise returns {undefined}\n   */\n  static parse(input, partial = false) {\n    if (!input) return;\n    input = typeof input !== 'string' ? JSON.stringify(input) : input;\n    input = input.replace(/[\\n\\r\\b\\\\]+|(gap>)/g, '');\n    let jsonRegex = /{(?:[^])*}/g;\n    let match = jsonRegex.exec(input);\n    if (match) {\n      input = match[0];\n      try {\n        let json = JSON.parse(input);\n        return json.mime === JsonUtils.MIME || partial ? json : undefined;\n      } catch (e) {\n        /* eslint-disable no-console */\n        console.error(e);\n        /* eslint-enable no-console */\n      }\n    }\n  }\n\n  /**\n   * Returns a static string representing the mime type supported by this package\n   */\n  static get MIME() {\n    return 'application/vnd.francy+json';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/json-utils.js","import Composite from './composite';\nimport GraphFactory from './graph-factory';\nimport ChartFactory from './chart-factory';\nimport { requires } from '../util/data-decorator';\n\n/* global d3 */\n\nexport default class Canvas extends Composite {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    this.graph = new GraphFactory(this.options);\n    this.chartFactory = new ChartFactory(this.options);\n    this.add(this.graph).add(this.chartFactory);\n  }\n\n  @requires('canvas')\n  render() {\n    let content;\n    let zoom = d3.zoom();\n    let self = this;\n\n    function updateZoom(translateX, translateY, scale) {\n      self.element.call(zoom.transform, d3.zoomIdentity.translate(translateX, translateY).scale(scale, scale));\n    }\n\n    function zoomed() {\n      content.attr('transform', d3.event.transform);\n    }\n\n    function stopped() {\n      if (d3.event.defaultPrevented) {\n        d3.event.stopPropagation(); \n      }\n    }\n\n    function zoomToFit() {\n      // only execute if enable, of course\n      if (self.data.canvas.zoomToFit) {\n        let bounds = content.node().getBBox();\n\n        let clientBounds = self.element.node().getBoundingClientRect(),\n          fullWidth = clientBounds.right - clientBounds.left,\n          fullHeight = clientBounds.bottom - clientBounds.top;\n\n        let width = +bounds.width,\n          height = +bounds.height;\n\n        if (width === 0 || height === 0) return;\n\n        let midX = bounds.x + width / 2,\n          midY = bounds.y + height / 2;\n\n        let scale = 0.9 / Math.max(width / fullWidth, height / fullHeight);\n        let translateX = fullWidth / 2 - scale * midX,\n          translateY = fullHeight / 2 - scale * midY;\n\n        content.transition()\n          .duration(self.transitionDuration)\n          .attr('transform', `translate(${translateX},${translateY})scale(${scale},${scale})`)\n          .on('end', () => updateZoom(translateX, translateY, scale));\n      }\n    }\n\n    const canvasId = `Canvas-${this.data.canvas.id}`;\n    this.element = d3.select(`svg#${canvasId}`);\n    // check if the canvas is already present\n    if (!this.element.node()) {\n      // create a svg element detached from the DOM!\n      this.logger.debug(`Creating Canvas [${canvasId}]...`);\n      this.element = this.parent.append('svg')\n        .attr('class', 'francy-canvas')\n        .attr('id', canvasId);\n    }\n\n    // cannot continue if canvas is not present\n    if (!this.element.node()) {\n      throw new Error(`Oops, could not create canvas with id [${canvasId}]... Cannot proceed.`);\n    }\n\n    this.element.attr('width', this.data.canvas.width).attr('height', this.data.canvas.height);\n\n    content = this.element.select('g.francy-content');\n\n    if (!content.node()) {\n      content = this.element.append('g').attr('class', 'francy-content');\n      zoom.on('zoom', zoomed);\n      // remove zoom on double click!\n      this.element.call(zoom).on('dblclick.zoom', null);\n    }\n\n    this.element.on('click', stopped, true);\n\n    this.element.zoomToFit = this.zoomToFit = zoomToFit;\n\n    this.logger.debug(`Canvas updated [${canvasId}]...`);\n\n    this.renderChildren();\n\n    setTimeout(() => {\n      zoomToFit();\n    }, this.transitionDuration);\n\n    return this;\n  }\n\n  unrender() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/canvas.js","import Renderer from './renderer';\nimport TreeGraph from './graph-tree';\nimport GenericGraph from './graph-generic';\nimport { requires } from '../util/data-decorator';\n\nexport default class Graph extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @requires('canvas.graph')\n  render() {\n\n    let element = undefined;\n    switch (this.data.canvas.graph.type) {\n    case 'tree':\n      element = new TreeGraph(this.options).load(this.data).render();\n      break;\n    default:\n      element = new GenericGraph(this.options).load(this.data).render();\n    }\n\n    return element;\n  }\n\n  unrender() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/graph-factory.js","import Graph from './graph';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class TreeGraph extends Graph {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n\n    let i = 0,\n      root;\n\n    root = d3.hierarchy(this.treeData, d => d.children);\n    root.x0 = this.height / 2;\n    root.y0 = 0;\n\n    // compute height based on the depth of the graph\n    let levelWidth = [1];\n    let childCount = function (level, n) {\n\n      if (n.children && n.children.length > 0) {\n        if (levelWidth.length <= level + 1) levelWidth.push(0);\n\n        levelWidth[level + 1] += n.children.length;\n        n.children.forEach(function (d) {\n          childCount(level + 1, d);\n        });\n      }\n    };\n    childCount(0, root);\n    let newHeight = d3.max(levelWidth) * 100;\n\n    let treemap = d3.tree().size([newHeight, this.width]);\n\n    if (this.data.canvas.graph.collapsed) {\n      root.children.forEach(collapse);\n    }\n\n    update.call(this, root);\n\n    function collapse(d) {\n      if (d.children) {\n        d._children = d.children;\n        d._children.forEach(collapse);\n        d.children = null;\n      }\n    }\n\n    function update(source) {\n      let treeData = treemap(root);\n\n      let nodes = treeData.descendants(),\n        links = treeData.descendants().slice(1);\n\n      nodes.forEach(d => d.y = d.depth * 180);\n\n      let linkGroup = this.element.selectAll('g.francy-links');\n\n      if (!linkGroup.node()) {\n        linkGroup = this.element.append('g').attr('class', 'francy-links');\n      }\n\n      let link = linkGroup.selectAll('path.francy-edge')\n        .data(links, d => d.id || (d.id = ++i));\n\n      let linkEnter = link.enter()\n        .append('path').attr('class', 'francy-edge')\n        .attr('d', () => {\n          let o = {x: source.x0, y: source.y0};\n          return diagonal(o, o);\n        });\n\n      linkEnter.merge(link)\n        .transition().duration(this.transitionDuration).attr('d', d => diagonal(d, d.parent));\n\n      link.exit().transition().duration(this.transitionDuration)\n        .attr('d', () => {\n          let o = {x: source.x, y: source.y};\n          return diagonal(o, o);\n        }).remove();\n\n      linkGroup.selectAll('path.francy-edge')\n        .style('fill', 'none')\n        .style('stroke', '#ccc')\n        .style('stroke-width', '1px');\n\n      nodes.forEach((d) => {\n        d.x0 = d.x;\n        d.y0 = d.y;\n      });\n\n      function diagonal(s, d) {\n        return `M ${s.y} ${s.x}\n            C ${(s.y + d.y) / 2} ${s.x},\n              ${(s.y + d.y) / 2} ${d.x},\n              ${d.y} ${d.x}`;\n      }\n\n      let nodeGroup = this.element.selectAll('g.francy-nodes');\n\n      if (!nodeGroup.node()) {\n        nodeGroup = this.element.append('g').attr('class', 'francy-nodes');\n      }\n\n      let node = nodeGroup.selectAll('g.francy-node')\n        .data(nodes, d => d.id || (d.id = ++i));\n\n      let nodeEnter = node.enter().append('g')\n        .attr('class', 'francy-node')\n        .attr('transform', () => `translate(${source.y0},${source.x0})`);\n\n      nodeEnter.append('path')\n        .attr('d', d3.symbol().type(d => Graph.getSymbol(d.data.type)).size(d => d.data.size * 100))\n        .attr('class', 'francy-symbol');\n\n      nodeEnter.append('text')\n        .attr('class', 'francy-label')\n        .text(d => d.data.title)\n        .attr('x',  function() {\n          let bound = this.getBBox();\n          return -(bound.width / 2);\n        })\n        .style('cursor', d => d.children || d._children ? 'pointer' : 'default');\n\n      let nodeUpdate = nodeEnter.merge(node);\n\n      nodeUpdate.transition()\n        .duration(this.transitionDuration)\n        .attr('transform', d => `translate(${d.y},${d.x})`);\n\n      node.exit().transition().duration(this.transitionDuration)\n        .attr('transform', () => `translate(${source.y},${source.x})`)\n        .remove();\n\n      nodeGroup.selectAll('path.francy-symbol')\n        .style('fill', d => d.children || d._children ? 'lightsteelblue' : Graph.colors(d.data.layer * 5))\n        .style('cursor', d => d.children || d._children ? 'pointer' : 'default');\n\n      node = nodeGroup.selectAll('g.francy-node');\n      \n      if (node.node()) {\n        this._applyEvents(node);\n\n        let nodeOnClick = node.on('click');\n        node.on('click', (d) => {\n        // any callbacks will be handled here\n          nodeOnClick.call(this, d.data);\n          // default, highlight connected nodes\n          click.call(this, d);\n        });\n      }\n\n      // Toggle children on click.\n      let self = this;\n\n      function click(d) {\n        if (d.children) {\n          d._children = d.children;\n          d.children = null;\n        } else {\n          d.children = d._children;\n          d._children = null;\n        }\n        update.call(self, d);\n      }\n\n      setTimeout(() => {\n        this.parent.zoomToFit();\n      }, this.transitionDuration);\n    }\n\n    return this;\n\n  }\n\n  unrender() {}\n\n  /**\n   * Transforms flat data into tree data by analysing the parents of each node\n   * @returns {Object} the data transformed in tree data\n   */\n  get treeData() {\n    let canvasNodes = this.data.canvas.graph.nodes ? Object.values(this.data.canvas.graph.nodes) : [];\n    let dataMap = canvasNodes.reduce(function (map, node) {\n      map[node.id] = node;\n      return map;\n    }, {});\n    let treeData = [];\n    canvasNodes.forEach(function(node) {\n      let parent = dataMap[node.parent];\n      if (parent) {\n        (parent.children || (parent.children = [])).push(node);\n      } else {\n        treeData.push(node);\n      }\n    });\n    return treeData[0];\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/graph-tree.js","import Menu from './menu';\nimport { requires } from '../util/data-decorator';\n\n/* global d3 */\n\nexport default class ContextMenu extends Menu {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @requires('menus')\n  render() {\n\n    d3.event.preventDefault();\n\n    this.element = this.HTMLParent.select('div.francy-context-menu-holder');\n    // check if the window is already present\n    if (!this.element.node()) {\n      this.element = this.HTMLParent.append('div')\n        .attr('class', 'francy-context-menu-holder');\n    }\n\n    let pos = d3.mouse(this.SVGParent.node());\n\n    this.element.style('left', pos[0] + 5 + 'px').style('top', pos[1] + 5 + 'px');\n\n    // show the context menu\n    this.element.style('display', 'block');\n\n    // check if it exists already\n    if (this.element.selectAll('*').node()) {\n      return;\n    }\n\n    // destroy menu\n    d3.select('body').on('click.francy-context-menu', () => this.unrender());\n\n    // this gets executed when a contextmenu event occurs\n    let menu = this.element.append('div').attr('class', 'francy-context-menu').append('ul');\n    let menusIterator = this.iterator(Object.values(this.data.menus));\n    this.traverse(menu, menusIterator);\n\n    return this;\n  }\n\n  unrender() {\n    if (this.element) {\n      this.element.selectAll('*').remove();\n      this.element.style('display', null);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/menu-context.js","import Modal from './modal';\nimport { RegisterJupyterKeyboardEvents } from '../util/component';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class RequiredArgsModal extends Modal {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n    let self = this;\n\n    let modalId = this.data.callback.id;\n\n    this.logger.debug(`Creating Callback Modal [${modalId}]...`);\n\n    this.element = this.holder.append('div')\n      .attr('id', modalId)\n      .attr('class', 'francy-modal');\n\n    let form = this.element.append('form');\n\n    let header = form.append('div').attr('class', 'francy-modal-header');\n\n    let headerTitle = header.append('span').html('Required arguments&nbsp;');\n    if (this.data.title) {\n      headerTitle.append('span').attr('style', 'font-weight: bold;').text(`for ${this.data.title}`);\n    }\n\n    let content = form.append('div').attr('class', 'francy-modal-content').append('div').attr('class', 'francy-table').append('div').attr('class', 'francy-table-body');\n\n    for (let arg of Object.values(this.data.callback.requiredArgs)) {\n      let row = content.append('div').attr('class', 'francy-table-row');\n      row.append('div').attr('class', 'francy-table-cell').append('label').attr('for', arg.id).text(arg.title);\n      let input = row.append('div').attr('class', 'francy-table-cell').append('input').attr('id', arg.id).attr('class', 'francy-arg')\n        .attr('required', '')\n        .attr('name', arg.id)\n        .attr('type', arg.type)\n        .attr('value', arg.value)\n        .on('change', function () {\n          self.data.callback.requiredArgs[this.id].value = this.value;\n        })\n        .on('input', this.onchange)\n        .on('keyup', this.onchange)\n        .on('paste', this.onchange);\n      // wait, if it is boolean we create a checkbox\n      if (arg.type === 'boolean') {\n        // well, a checkbox works this way so we need to initialize \n        // the value to false and update the value based on the checked \n        // property that triggers the onchange event\n        arg.value = arg.value || false;\n        input.attr('type', 'checkbox').attr('required', null)\n          .attr('value', arg.value)\n          .on('change', function() {\n            self.data.callback.requiredArgs[this.id].value = this.value = this.checked; \n          });\n      }\n      row.append('span').attr('class', 'validity');\n    }\n\n    let footer = form.append('div').attr('class', 'francy-modal-footer');\n\n    footer.append('button').text('Ok').on('click', () => {\n      if (form.node().checkValidity()) {\n        d3.event.preventDefault();\n        this.options.callbackHandler(this.data.callback);\n        this.unrender.call(this);\n      }\n      return false;\n    });\n    footer.append('button').text('Cancel').on('click', () => { \n      d3.event.preventDefault(); \n      this.unrender.call(this); \n    });\n\n    // disable keyboard shortcuts when using this modal in Jupyter\n    RegisterJupyterKeyboardEvents(['.francy', '.francy-arg', '.francy-overlay', '.francy-modal']);\n\n    let inputElement = content.selectAll('.francy-arg').node();\n    if (inputElement) {\n      inputElement.focus();\n    }\n\n    this.logger.debug(`Callback Modal updated [${modalId}]...`);\n\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/modal-required.js","import Graph from './graph';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class GenericGraph extends Graph {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n    var self = this;\n    \n    let simulationActive = this.data.canvas.graph.simulation;\n\n    let canvasNodes = this.data.canvas.graph.nodes ? Object.values(this.data.canvas.graph.nodes) : [],\n      canvasLinks = this.data.canvas.graph.links ? Object.values(this.data.canvas.graph.links) : [];\n\n    let linkGroup = this.element.selectAll('g.francy-links');\n\n    if (!linkGroup.node()) {\n      linkGroup = this.element.append('g').attr('class', 'francy-links');\n    }\n\n    let links = linkGroup.selectAll('g.francy-link').data();\n    let linksToAdd = this._filterNewElements(canvasLinks, links);\n\n    let link = linkGroup.selectAll('g.francy-link').data(linksToAdd, d => d.id);\n\n    let nodeGroup = this.element.selectAll('g.francy-nodes');\n\n    if (!nodeGroup.node()) {\n      nodeGroup = this.element.append('g').attr('class', 'francy-nodes');\n    }\n\n    let nodes = nodeGroup.selectAll('g.francy-node').data();\n    let nodesToAdd = this._filterNewElements(canvasNodes, nodes);\n\n    let node = nodeGroup.selectAll('g.francy-node').data(nodesToAdd, d => d.id);\n\n    if (node.exit().data().length === 0 &&\n      node.enter().data().length === 0 &&\n      link.enter().data().length === 0 &&\n      link.exit().data().length === 0) {\n      return;\n    }\n\n    let linkEnter = link.enter().append('g').attr('class', 'francy-link');\n\n    linkEnter.append('line').attr('class', 'francy-edge');\n\n    link.exit().remove();\n\n    link = linkGroup.selectAll('g.francy-link line.francy-edge');\n\n    if (this.data.canvas.graph.type === 'directed') {\n      // this means we need arrows, so we append the marker\n      self.parent.append('defs').selectAll('marker')\n        .data(['arrow'])\n        .enter().append('marker')\n        .attr('class', 'francy-arrows')\n        .attr('id', d => d)\n        .attr('viewBox', '0 -5 10 10')\n        .attr('refX', 25)\n        .attr('refY', 0)\n        .attr('markerWidth', 10)\n        .attr('markerHeight', 10)\n        .attr('orient', 'auto')\n        .append('path')\n        .attr('d', 'M0,-5L10,0L0,5 L10,0 L0, -5');\n      // update the style of the link\n      link.style('marker-end', 'url(#arrow)');\n    }\n\n    let nodeEnter = node.enter().append('g')\n      .attr('class', 'francy-node').attr('id', d => d.id);\n\n    nodeEnter.append('path')\n      .attr('d', d3.symbol().type(d => Graph.getSymbol(d.type)).size(d => d.size * 100))\n      .style('fill', d => Graph.colors(d.layer * 5))\n      .attr('class', d => 'francy-symbol' + (d.highlight ? ' francy-highlight' : '') + (Object.values(d.menus).length ? ' francy-context' : ''));\n\n    nodeEnter.append('text')\n      .attr('class', 'francy-label')\n      .text(d => d.title)\n      .attr('x', function() {\n        let bound = this.getBBox();\n        return -(bound.width / 2);\n      });\n\n    node.exit().remove();\n\n    node = nodeGroup.selectAll('g.francy-node');\n\n    if (this.data.canvas.graph.drag) {\n      node.call(d3.drag()\n        .on('start', dragstarted)\n        .on('drag', dragged)\n        .on('end', dragended));\n    }\n\n    if (node && !node.empty()) {\n\n      this._applyEvents(node);\n\n      if (this.data.canvas.graph.showNeighbours) {\n        let nodeOnClick = node.on('click');\n        node.on('click', function(d) {\n          // default, highlight connected nodes\n          connectedNodes.call(this);\n          // any callbacks will be handled here\n          nodeOnClick.call(this, d);\n        });\n      }\n    }\n\n    if (simulationActive) {\n      //iterate through the data and get the widest node group including label\n      let radius = 0;\n      node.each(function(){\n        let bound = this.getBBox();\n        if (radius < bound.width) {\n          radius = bound.width;\n        }\n      });\n      //Canvas Forces\n      //let centerForce = d3.forceCenter().x(this.width / 2).y(this.height / 2);\n      let manyForce = d3.forceManyBody().strength(-canvasNodes.length * 75);\n      let linkForce = d3.forceLink(canvasLinks).id(d => d.id).distance(75);\n      let collideForce = d3.forceCollide().radius(radius/2).iterations(3);\n\n      //Generic gravity for the X position\n      let forceX = d3.forceX(this.width).strength(0.05);\n      //Generic gravity for the Y position - undirected/directed graphs fall here\n      let forceY = d3.forceY(-this.height).strength(0.25);\n\n      if (this.data.canvas.graph.type === 'hasse') {\n        //Generic gravity for the X position\n        forceX = d3.forceX(this.width).strength(0.4);\n        //Strong y positioning based on layer to simulate the hasse diagram\n        forceY = d3.forceY(d => d.layer * 75).strength(0.7);\n      }\n\n      var simulation = d3.forceSimulation().nodes(nodesToAdd)\n        .force('charge', manyForce)\n        .force('link', linkForce)\n        //.force('center', centerForce)\n        .force('x', forceX)\n        .force('y', forceY)\n        .force('collide', collideForce)\n        .on('tick', ticked)\n        .on('end', function() {\n          // zoom to fit when simulation is over\n          self.parent.zoomToFit();\n        });\n\n      //force simulation restart\n      simulation.restart();\n    } else {\n      // well, simulation is off, apply fixed positions and zoom to fit now\n      ticked();\n      self.parent.zoomToFit();\n    }\n\n    function ticked() {\n      link\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y);\n\n      node.attr('transform', d => `translate(${d.x},${d.y})`);\n    }\n\n    // HIGHLIGHT\n    //Toggle stores whether the highlighting is on\n    let toggle = 0;\n    //Create an array logging what is connected to what\n    let linkedByIndex = {};\n\n    for (let i = 0; i < canvasNodes.length; i++) {\n      linkedByIndex[`${i},${i}`] = 1;\n    }\n\n    canvasLinks.forEach(function(d) {\n      linkedByIndex[`${d.source.index},${d.target.index}`] = 1;\n    });\n\n    function connectedNodes() {\n      //This function looks up whether a pair are neighbours\n      function neighboring(a, b) {\n        return linkedByIndex[`${a.index},${b.index}`];\n      }\n      d3.event.preventDefault();\n      if (toggle === 0) {\n        //Reduce the opacity of all but the neighbouring nodes\n        let d = d3.select(this).node().__data__;\n        node.style('opacity', o => neighboring(d, o) || neighboring(o, d) ? 1 : 0.1);\n        link.style('opacity', o => d.index === o.source.index || d.index === o.target.index ? 1 : 0.1);\n        //Reduce the op\n        toggle = 1;\n      } else {\n        //Put them back to opacity=1\n        node.style('opacity', 1);\n        link.style('opacity', 1);\n        toggle = 0;\n      }\n    }\n\n    function dragstarted(d) {\n      if (!d3.event.active && simulationActive) {\n        simulation.alphaTarget(0.01).restart();\n      }\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(d) {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    }\n\n    function dragended(d) {\n      if (!d3.event.active && simulationActive) {\n        simulation.alphaTarget(0);\n      }\n      d.fx = null;\n      d.fy = null;\n    }\n\n    return this;\n\n  }\n\n  unrender() {}\n  \n  _filterNewElements(canvasObjects, d3Element) {\n    let newElements = [];\n    canvasObjects.forEach(o => {\n      let link = d3Element.find(d => d.id === o.id);\n      if (link) {\n        newElements.push(link);\n      } else {\n        newElements.push(o);\n      }\n    });\n    return newElements;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/graph-generic.js","import Renderer from './renderer';\nimport BarChart from './chart-bar';\nimport LineChart from './chart-line';\nimport ScatterChart from './chart-scatter';\nimport { requires } from '../util/data-decorator';\n\nexport default class ChartFactory extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @requires('canvas.chart')\n  render() {\n    \n    let element = undefined;\n    switch (this.data.canvas.chart.type) {\n    case 'bar':\n      element = new BarChart(this.options).load(this.data).render();\n      break;\n    case 'line':\n      element = new LineChart(this.options).load(this.data).render();\n      break;\n    case 'scatter':\n      element = new ScatterChart(this.options).load(this.data).render();\n      break;\n    }\n\n    return element;\n  }\n\n  unrender() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/chart-factory.js","import Chart from './chart';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class BarChart extends Chart {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n    \n    this.xScale = d3.scaleBand().range([0, this.width]).padding(0.1).domain(this.axis.x.domain);\n\n    if (!this.axis.x.domain.length) {\n      this.axis.x.domain = Chart.domainRange(this.allValues.length / this.datasetNames.length);\n      this.xScale.domain(this.axis.x.domain);\n    }\n\n    let barsGroup = this.element.selectAll('g.francy-bars');\n\n    if (!barsGroup.node()) {\n      barsGroup = this.element.append('g').attr('class', 'francy-bars');\n    }\n\n    var self = this;\n    \n    this.datasetNames.forEach(function(key, index) {\n      let bar = barsGroup.selectAll(`.francy-bar-${index}`).data(self.datasets[key]);\n\n      bar.exit().transition().duration(750)\n        .style('fill-opacity', 1e-6)\n        .remove();\n\n      // append the rectangles for the bar chart\n      let barEnter = bar.enter()\n        .append('rect')\n        .style('fill', () => Chart.colors(index * 5))\n        .attr('class', `francy-bar-${index}`)\n        .attr('x', function(d, i) {\n          return self.xScale(self.axis.x.domain[i]) + index * (self.xScale.bandwidth() / self.datasetNames.length);\n        })\n        .attr('width', (self.xScale.bandwidth() / self.datasetNames.length) - 1)\n        .attr('y', function(d) {\n          return self.yScale(d);\n        })\n        .attr('height', function(d) {\n          return self.height - self.yScale(d);\n        })\n        .on('mouseenter', function(d) {\n          d3.select(this).transition()\n            .duration(250).style('fill-opacity', 0.5);\n          self.tooltip.load(Chart.tooltip(key, d), true).render();\n        })\n        .on('mouseleave', function() {\n          d3.select(this).transition()\n            .duration(250).style('fill-opacity', 1);\n          self.tooltip.unrender();\n        });\n\n      barEnter.merge(bar)\n        .attr('x', function(d, i) {\n          return self.xScale(self.axis.x.domain[i]) + index * (self.xScale.bandwidth() / self.datasetNames.length); \n        })\n        .attr('width', (self.xScale.bandwidth() / self.datasetNames.length) - 1)\n        .attr('y', function(d) {\n          return self.yScale(d); \n        })\n        .attr('height', function(d) {\n          return self.height - self.yScale(d); \n        });\n    });\n\n    this._renderAxis();\n    this._renderLegend();\n\n    return this;\n  }\n\n  unrender() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/chart-bar.js","import Chart from './chart';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class LineChart extends Chart {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n    \n    let linesGroup = this.element.selectAll('g.francy-lines');\n\n    if (!linesGroup.node()) {\n      linesGroup = this.element.append('g').attr('class', 'francy-lines');\n    }\n\n    var self = this;\n    \n    this.datasetNames.forEach(function(key, index) {\n      let valueLine = d3.line()\n        .x(function(d, i) {\n          return self.xScale(i);\n        })\n        .y(function(d) {\n          return self.yScale(d);\n        });\n\n      let line = linesGroup.selectAll(`.francy-line-${index}`).data([self.datasets[key]]);\n\n      line.exit().transition().duration(750)\n        .style('fill-opacity', 1e-6)\n        .remove();\n\n      // append the rectangles for the bar chart\n      let lineEnter = line.enter()\n        .append('path')\n        .style('stroke', () => Chart.colors(index * 5))\n        .style('stroke-width', '5px')\n        .attr('class', `francy-line-${index}`)\n        .attr('d', valueLine)\n        .on('mouseenter', function(d) {\n          d3.select(this).transition()\n            .duration(250)\n            .style('stroke-opacity', 0.5)\n            .style('stroke-width', '10px');\n          self.tooltip.load(Chart.tooltip(key, d), true).render();\n        })\n        .on('mouseleave', function() {\n          d3.select(this).transition()\n            .duration(250)\n            .style('stroke-opacity', 1)\n            .style('stroke-width', '5px');\n          self.tooltip.unrender();\n        });\n\n      lineEnter.merge(line);\n    });\n\n    this._renderAxis();\n    this._renderLegend();\n\n    return this;\n  }\n\n  unrender() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/chart-line.js","import Chart from './chart';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class ScatterChart extends Chart {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n\n    let scatterGroup = this.element.selectAll('g.francy-scatters');\n\n    if (!scatterGroup.node()) {\n      scatterGroup = this.element.append('g').attr('class', 'francy-scatters');\n    }\n    \n    let self = this;\n\n    this.datasetNames.forEach(function(key, index) {\n      let scatter = scatterGroup.selectAll(`.francy-scatter-${index}`).data(self.datasets[key]);\n\n      scatter.exit().transition().duration(750)\n        .style('fill-opacity', 1e-6)\n        .remove();\n\n      // append the rectangles for the bar chart\n      let scatterEnter = scatter\n        .enter()\n        .append('circle')\n        .style('fill', () => Chart.colors(index * 5))\n        .attr('class', `francy-scatter-${index}`)\n        .attr('r', 5)\n        .attr('cx', function(d, i) {\n          return self.xScale(i);\n        })\n        .attr('cy', function(d) {\n          return self.yScale(d);\n        })\n        .on('mouseenter', function(d) {\n          d3.select(this).transition()\n            .duration(250)\n            .style('fill-opacity', 0.5)\n            .attr('r', 10);\n          self.tooltip.load(Chart.tooltip(key, d), true).render();\n        })\n        .on('mouseleave', function() {\n          d3.select(this).transition()\n            .duration(250)\n            .style('fill-opacity', 1)\n            .attr('r', 5);\n          self.tooltip.unrender();\n        });\n\n      scatterEnter.merge(scatter);\n    });\n\n    this._renderAxis();\n\n    this._renderLegend();\n\n    return this;\n  }\n\n  unrender() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/chart-scatter.js","import Menu from './menu';\nimport AboutModal from './modal-about';\nimport * as SvgToPng from '../../node_modules/save-svg-as-png/saveSvgAsPng';\n\n/* global d3 window */\n\nexport default class MainMenu extends Menu {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  render() {\n    let aboutModal = new AboutModal(this.options);\n\n    // Otherwise clashes with the canvas itself!\n    const menuId = `MainMenu-${this.data.canvas.id}`;\n    this.element = d3.select(`#${menuId}`);\n\n    // Check if the menu is already present\n    if (!this.element.node()) {\n      // create a div element detached from the DOM!\n      this.logger.debug(`Creating Main Menu [${menuId}]...`);\n      this.element = this.parent.append('div').attr('class', 'francy-main-menu-holder').attr('id', menuId);\n    }\n\n    // Force rebuild menu again\n    this.element.selectAll('*').remove();\n\n    this.element = this.element.append('ul').attr('class', 'francy-main-menu');\n\n    if (this.data.canvas.title) {\n      this.element.append('li').attr('class', 'francy-title').append('a').html(this.data.canvas.title);\n    }\n\n    let entry = this.element.append('li');\n    entry.append('a').html('Francy');\n    let content = entry.append('ul');\n    content.append('li').append('a').on('click', () => this.options.appendTo.canvas.zoomToFit()).attr('title', 'Zoom to Fit').html('Zoom to Fit');\n    content.append('li').append('a').on('click', () => SvgToPng.saveSvgAsPng(this.SVGParent.node(), 'diagram.png')).attr('title', 'Save to PNG').html('Save to PNG');\n    content.append('li').append('a').on('click', () => aboutModal.load(this.data).render()).attr('title', 'About').html('About');\n\n    // Traverse all menus and flatten them!\n    let menusIterator = this.iterator(Object.values(this.data.canvas.menus));\n    this.traverse(this.element, menusIterator);\n\n    this.logger.debug(`Main Menu updated [${menuId}]...`);\n\n    return this;\n  }\n\n  unrender() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/menu-main.js","import Modal from './modal';\nimport { RegisterJupyterKeyboardEvents, syntaxHighlight } from '../util/component';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class AboutModal extends Modal {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n\n    let modalId = 'AboutModalWindow';\n\n    this.logger.debug(`Creating About Modal [${modalId}]...`);\n\n    this.element = this.holder.append('div')\n      .attr('id', modalId)\n      .attr('class', 'francy-modal');\n\n    let form = this.element.append('form');\n\n    let header = form.append('div').attr('class', 'francy-modal-header');\n\n    header.append('span').html(`About Francy v${this.data.version || 'N/A'}`);\n\n    let content = form.append('div').attr('class', 'francy-modal-content')\n      .append('div').attr('class', 'francy-table')\n      .append('div').attr('class', 'francy-table-body');\n\n    content.append('span').text('Loaded Object:');\n    content.append('pre').attr('class', 'francy').html(syntaxHighlight(JSON.stringify(this.data.canvas, null, 2)));\n    content.append('span').append('a').attr('href', 'https://github.com/mcmartins/francy').text('Francy on Github');\n\n    let footer = form.append('div').attr('class', 'francy-modal-footer');\n\n    footer.append('button').text('Ok').on('click', () => { \n      d3.event.preventDefault(); \n      this.unrender.call(this); \n    });\n\n    // disable keyboard shortcuts when using this modal in Jupyter\n    RegisterJupyterKeyboardEvents(['.francy', '.francy-arg', '.francy-overlay', '.francy-modal']);\n\n    this.logger.debug(`Callback About updated [${modalId}]...`);\n\n    return this;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/modal-about.js","(function() {\n  var out$ = typeof exports != 'undefined' && exports || typeof define != 'undefined' && {} || this;\n\n  var doctype = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\" [<!ENTITY nbsp \"&#160;\">]>';\n\n  function isElement(obj) {\n    return obj instanceof HTMLElement || obj instanceof SVGElement;\n  }\n\n  function requireDomNode(el) {\n    if (!isElement(el)) {\n      throw new Error('an HTMLElement or SVGElement is required; got ' + el);\n    }\n  }\n\n  function isExternal(url) {\n    return url && url.lastIndexOf('http',0) == 0 && url.lastIndexOf(window.location.host) == -1;\n  }\n\n  function inlineImages(el, callback) {\n    requireDomNode(el);\n\n    var images = el.querySelectorAll('image'),\n        left = images.length,\n        checkDone = function() {\n          if (left === 0) {\n            callback();\n          }\n        };\n\n    checkDone();\n    for (var i = 0; i < images.length; i++) {\n      (function(image) {\n        var href = image.getAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\");\n        if (href) {\n          if (isExternal(href.value)) {\n            console.warn(\"Cannot render embedded images linking to external hosts: \"+href.value);\n            return;\n          }\n        }\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        var img = new Image();\n        img.crossOrigin=\"anonymous\";\n        href = href || image.getAttribute('href');\n        if (href) {\n          img.src = href;\n          img.onload = function() {\n            canvas.width = img.width;\n            canvas.height = img.height;\n            ctx.drawImage(img, 0, 0);\n            image.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", canvas.toDataURL('image/png'));\n            left--;\n            checkDone();\n          }\n          img.onerror = function() {\n            console.log(\"Could not load \"+href);\n            left--;\n            checkDone();\n          }\n        } else {\n          left--;\n          checkDone();\n        }\n      })(images[i]);\n    }\n  }\n\n  function styles(el, options, cssLoadedCallback) {\n    var selectorRemap = options.selectorRemap;\n    var modifyStyle = options.modifyStyle;\n    var css = \"\";\n    // each font that has extranl link is saved into queue, and processed\n    // asynchronously\n    var fontsQueue = [];\n    var sheets = document.styleSheets;\n    for (var i = 0; i < sheets.length; i++) {\n      try {\n        var rules = sheets[i].cssRules;\n      } catch (e) {\n        console.warn(\"Stylesheet could not be loaded: \"+sheets[i].href);\n        continue;\n      }\n\n      if (rules != null) {\n        for (var j = 0, match; j < rules.length; j++, match = null) {\n          var rule = rules[j];\n          if (typeof(rule.style) != \"undefined\") {\n            var selectorText;\n\n            try {\n              selectorText = rule.selectorText;\n            } catch(err) {\n              console.warn('The following CSS rule has an invalid selector: \"' + rule + '\"', err);\n            }\n\n            try {\n              if (selectorText) {\n                match = el.querySelector(selectorText) || el.parentNode.querySelector(selectorText);\n              }\n            } catch(err) {\n              console.warn('Invalid CSS selector \"' + selectorText + '\"', err);\n            }\n\n            if (match) {\n              var selector = selectorRemap ? selectorRemap(rule.selectorText) : rule.selectorText;\n              var cssText = modifyStyle ? modifyStyle(rule.style.cssText) : rule.style.cssText;\n              css += selector + \" { \" + cssText + \" }\\n\";\n            } else if(rule.cssText.match(/^@font-face/)) {\n              // below we are trying to find matches to external link. E.g.\n              // @font-face {\n              //   // ...\n              //   src: local('Abel'), url(https://fonts.gstatic.com/s/abel/v6/UzN-iejR1VoXU2Oc-7LsbvesZW2xOQ-xsNqO47m55DA.woff2);\n              // }\n              //\n              // This regex will save extrnal link into first capture group\n              var fontUrlRegexp = /url\\([\"']?(.+?)[\"']?\\)/;\n              // TODO: This needs to be changed to support multiple url declarations per font.\n              var fontUrlMatch = rule.cssText.match(fontUrlRegexp);\n\n              var externalFontUrl = (fontUrlMatch && fontUrlMatch[1]) || '';\n              var fontUrlIsDataURI = externalFontUrl.match(/^data:/);\n              if (fontUrlIsDataURI) {\n                // We should ignore data uri - they are already embedded\n                externalFontUrl = '';\n              }\n\n              if (externalFontUrl) {\n                // okay, we are lucky. We can fetch this font later\n\n                //handle url if relative\n                if (externalFontUrl.startsWith('../')) {\n                  externalFontUrl = sheets[i].href + '/../' + externalFontUrl\n                } else if (externalFontUrl.startsWith('./')) {\n                  externalFontUrl = sheets[i].href + '/.' + externalFontUrl\n                }\n\n                fontsQueue.push({\n                  text: rule.cssText,\n                  // Pass url regex, so that once font is downladed, we can run `replace()` on it\n                  fontUrlRegexp: fontUrlRegexp,\n                  format: getFontMimeTypeFromUrl(externalFontUrl),\n                  url: externalFontUrl\n                });\n              } else {\n                // otherwise, use previous logic\n                css += rule.cssText + '\\n';\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // Now all css is processed, it's time to handle scheduled fonts\n    processFontQueue(fontsQueue);\n\n    function getFontMimeTypeFromUrl(fontUrl) {\n      var supportedFormats = {\n        'woff2': 'font/woff2',\n        'woff': 'font/woff',\n        'otf': 'application/x-font-opentype',\n        'ttf': 'application/x-font-ttf',\n        'eot': 'application/vnd.ms-fontobject',\n        'sfnt': 'application/font-sfnt',\n        'svg': 'image/svg+xml'\n      };\n      var extensions = Object.keys(supportedFormats);\n      for (var i = 0; i < extensions.length; ++i) {\n        var extension = extensions[i];\n        // TODO: This is not bullet proof, it needs to handle edge cases...\n        if (fontUrl.indexOf('.' + extension) > 0) {\n          return supportedFormats[extension];\n        }\n      }\n\n      // If you see this error message, you probably need to update code above.\n      console.error('Unknown font format for ' + fontUrl+ '; Fonts may not be working correctly');\n      return 'application/octet-stream';\n    }\n\n    function processFontQueue(queue) {\n      if (queue.length > 0) {\n        // load fonts one by one until we have anything in the queue:\n        var font = queue.pop();\n        processNext(font);\n      } else {\n        // no more fonts to load.\n        cssLoadedCallback(css);\n      }\n\n      function processNext(font) {\n        // TODO: This could benefit from caching.\n        var oReq = new XMLHttpRequest();\n        oReq.addEventListener('load', fontLoaded);\n        oReq.addEventListener('error', transferFailed);\n        oReq.addEventListener('abort', transferFailed);\n        oReq.open('GET', font.url);\n        oReq.responseType = 'arraybuffer';\n        oReq.send();\n\n        function fontLoaded() {\n          // TODO: it may be also worth to wait until fonts are fully loaded before\n          // attempting to rasterize them. (e.g. use https://developer.mozilla.org/en-US/docs/Web/API/FontFaceSet )\n          var fontBits = oReq.response;\n          var fontInBase64 = arrayBufferToBase64(fontBits);\n          updateFontStyle(font, fontInBase64);\n        }\n\n        function transferFailed(e) {\n          console.warn('Failed to load font from: ' + font.url);\n          console.warn(e)\n          css += font.text + '\\n';\n          processFontQueue();\n        }\n\n        function updateFontStyle(font, fontInBase64) {\n          var dataUrl = 'url(\"data:' + font.format + ';base64,' + fontInBase64 + '\")';\n          css += font.text.replace(font.fontUrlRegexp, dataUrl) + '\\n';\n\n          // schedule next font download on next tick.\n          setTimeout(function() {\n            processFontQueue(queue)\n          }, 0);\n        }\n\n      }\n    }\n\n    function arrayBufferToBase64(buffer) {\n      var binary = '';\n      var bytes = new Uint8Array(buffer);\n      var len = bytes.byteLength;\n\n      for (var i = 0; i < len; i++) {\n          binary += String.fromCharCode(bytes[i]);\n      }\n\n      return window.btoa(binary);\n    }\n  }\n\n  function getDimension(el, clone, dim) {\n    var v = (el.viewBox && el.viewBox.baseVal && el.viewBox.baseVal[dim]) ||\n      (clone.getAttribute(dim) !== null && !clone.getAttribute(dim).match(/%$/) && parseInt(clone.getAttribute(dim))) ||\n      el.getBoundingClientRect()[dim] ||\n      parseInt(clone.style[dim]) ||\n      parseInt(window.getComputedStyle(el).getPropertyValue(dim));\n    return (typeof v === 'undefined' || v === null || isNaN(parseFloat(v))) ? 0 : v;\n  }\n\n  function reEncode(data) {\n    data = encodeURIComponent(data);\n    data = data.replace(/%([0-9A-F]{2})/g, function(match, p1) {\n      var c = String.fromCharCode('0x'+p1);\n      return c === '%' ? '%25' : c;\n    });\n    return decodeURIComponent(data);\n  }\n\n  out$.prepareSvg = function(el, options, cb) {\n    requireDomNode(el);\n\n    options = options || {};\n    options.scale = options.scale || 1;\n    options.responsive = options.responsive || false;\n    var xmlns = \"http://www.w3.org/2000/xmlns/\";\n\n    inlineImages(el, function() {\n      var outer = document.createElement(\"div\");\n      var clone = el.cloneNode(true);\n      var width, height;\n      if(el.tagName == 'svg') {\n        width = options.width || getDimension(el, clone, 'width');\n        height = options.height || getDimension(el, clone, 'height');\n      } else if(el.getBBox) {\n        var box = el.getBBox();\n        width = box.x + box.width;\n        height = box.y + box.height;\n        clone.setAttribute('transform', clone.getAttribute('transform').replace(/translate\\(.*?\\)/, ''));\n\n        var svg = document.createElementNS('http://www.w3.org/2000/svg','svg')\n        svg.appendChild(clone)\n        clone = svg;\n      } else {\n        console.error('Attempted to render non-SVG element', el);\n        return;\n      }\n\n      clone.setAttribute(\"version\", \"1.1\");\n      if (!clone.getAttribute('xmlns')) {\n        clone.setAttributeNS(xmlns, \"xmlns\", \"http://www.w3.org/2000/svg\");\n      }\n      if (!clone.getAttribute('xmlns:xlink')) {\n        clone.setAttributeNS(xmlns, \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n      }\n\n      if (options.responsive) {\n        clone.removeAttribute('width');\n        clone.removeAttribute('height');\n        clone.setAttribute('preserveAspectRatio', 'xMinYMin meet');\n      } else {\n        clone.setAttribute(\"width\", width * options.scale);\n        clone.setAttribute(\"height\", height * options.scale);\n      }\n\n      clone.setAttribute(\"viewBox\", [\n        options.left || 0,\n        options.top || 0,\n        width,\n        height\n      ].join(\" \"));\n\n      var fos = clone.querySelectorAll('foreignObject > *');\n      for (var i = 0; i < fos.length; i++) {\n        if (!fos[i].getAttribute('xmlns')) {\n          fos[i].setAttributeNS(xmlns, \"xmlns\", \"http://www.w3.org/1999/xhtml\");\n        }\n      }\n\n      outer.appendChild(clone);\n\n      // In case of custom fonts we need to fetch font first, and then inline\n      // its url into data-uri format (encode as base64). That's why style\n      // processing is done asynchonously. Once all inlining is finshed\n      // cssLoadedCallback() is called.\n      styles(el, options, cssLoadedCallback);\n\n      function cssLoadedCallback(css) {\n        // here all fonts are inlined, so that we can render them properly.\n        var s = document.createElement('style');\n        s.setAttribute('type', 'text/css');\n        s.innerHTML = \"<![CDATA[\\n\" + css + \"\\n]]>\";\n        var defs = document.createElement('defs');\n        defs.appendChild(s);\n        clone.insertBefore(defs, clone.firstChild);\n\n        if (cb) {\n          var outHtml = outer.innerHTML;\n          outHtml = outHtml.replace(/NS\\d+:href/gi, 'xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href');\n          cb(outHtml, width, height);\n        }\n      }\n    });\n  }\n\n  out$.svgAsDataUri = function(el, options, cb) {\n    out$.prepareSvg(el, options, function(svg) {\n      var uri = 'data:image/svg+xml;base64,' + window.btoa(reEncode(doctype + svg));\n      if (cb) {\n        cb(uri);\n      }\n    });\n  }\n\n  out$.svgAsPngUri = function(el, options, cb) {\n    requireDomNode(el);\n\n    options = options || {};\n    options.encoderType = options.encoderType || 'image/png';\n    options.encoderOptions = options.encoderOptions || 0.8;\n\n    var convertToPng = function(src, w, h) {\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = w;\n      canvas.height = h;\n\n      if(options.canvg) {\n        options.canvg(canvas, src);\n      } else {\n        context.drawImage(src, 0, 0);\n      }\n\n      if(options.backgroundColor){\n        context.globalCompositeOperation = 'destination-over';\n        context.fillStyle = options.backgroundColor;\n        context.fillRect(0, 0, canvas.width, canvas.height);\n      }\n\n      var png;\n      try {\n        png = canvas.toDataURL(options.encoderType, options.encoderOptions);\n      } catch (e) {\n        if ((typeof SecurityError !== 'undefined' && e instanceof SecurityError) || e.name == \"SecurityError\") {\n          console.error(\"Rendered SVG images cannot be downloaded in this browser.\");\n          return;\n        } else {\n          throw e;\n        }\n      }\n      cb(png);\n    }\n\n    if(options.canvg) {\n      out$.prepareSvg(el, options, convertToPng);\n    } else {\n      out$.svgAsDataUri(el, options, function(uri) {\n        var image = new Image();\n\n        image.onload = function() {\n          convertToPng(image, image.width, image.height);\n        }\n\n        image.onerror = function() {\n          console.error(\n            'There was an error loading the data URI as an image on the following SVG\\n',\n            window.atob(uri.slice(26)), '\\n',\n            \"Open the following link to see browser's diagnosis\\n\",\n            uri);\n        }\n\n        image.src = uri;\n      });\n    }\n  }\n\n  out$.download = function(name, uri) {\n    if (navigator.msSaveOrOpenBlob) {\n      navigator.msSaveOrOpenBlob(uriToBlob(uri), name);\n    } else {\n      var saveLink = document.createElement('a');\n      var downloadSupported = 'download' in saveLink;\n      if (downloadSupported) {\n        saveLink.download = name;\n        saveLink.style.display = 'none';\n        document.body.appendChild(saveLink);\n        try {\n          var blob = uriToBlob(uri);\n          var url = URL.createObjectURL(blob);\n          saveLink.href = url;\n          saveLink.onclick = function() {\n            requestAnimationFrame(function() {\n              URL.revokeObjectURL(url);\n            })\n          };\n        } catch (e) {\n          console.warn('This browser does not support object URLs. Falling back to string URL.');\n          saveLink.href = uri;\n        }\n        saveLink.click();\n        document.body.removeChild(saveLink);\n      }\n      else {\n        window.open(uri, '_temp', 'menubar=no,toolbar=no,status=no');\n      }\n    }\n  }\n\n  function uriToBlob(uri) {\n    var byteString = window.atob(uri.split(',')[1]);\n    var mimeString = uri.split(',')[0].split(':')[1].split(';')[0]\n    var buffer = new ArrayBuffer(byteString.length);\n    var intArray = new Uint8Array(buffer);\n    for (var i = 0; i < byteString.length; i++) {\n      intArray[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([buffer], {type: mimeString});\n  }\n\n  out$.saveSvg = function(el, name, options) {\n    requireDomNode(el);\n\n    options = options || {};\n    out$.svgAsDataUri(el, options, function(uri) {\n      out$.download(name, uri);\n    });\n  }\n\n  out$.saveSvgAsPng = function(el, name, options) {\n    requireDomNode(el);\n\n    options = options || {};\n    out$.svgAsPngUri(el, options, function(uri) {\n      out$.download(name, uri);\n    });\n  }\n\n  // if define is defined create as an AMD module\n  if (typeof define !== 'undefined') {\n    define(function() {\n      return out$;\n    });\n  }\n\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/save-svg-as-png/saveSvgAsPng.js","import Renderer from './renderer';\nimport { requires } from '../util/data-decorator';\n\n/* global d3 */\n\nexport default class Message extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @requires('canvas.messages')\n  render() {\n\n    let messages = Object.keys(this.data.canvas.messages).map((key) => {\n      return {\n        id: key,\n        type: this.data.canvas.messages[key].type,\n        title: this.data.canvas.messages[key].title,\n        text: this.data.canvas.messages[key].text\n      };\n    });\n\n    let alertsId = `Messages-${this.data.canvas.id}`;\n    this.element = d3.select(`#${alertsId}`);\n    // check if the div is already present\n    if (!this.element.node()) {\n      this.element = this.parent.append('div').attr('class', 'francy-message-holder').attr('id', alertsId);\n    }\n\n    let message = this.element.selectAll('div.francy-alert').data(messages, d => d.id);\n    let messageEnter = message.enter().append('div').attr('id', d => d.id)\n      .attr('class', d => `francy-alert alert-${d.type}`).on('click', function() {\n        d3.select(this).style('display', 'none');\n      });\n    messageEnter.append('span').attr('class', 'strong').text(d => d.title);\n    messageEnter.append('span').text(d => d.text);\n    messageEnter.append('span').attr('class', 'strong closeme').style('display', 'none').text('x');\n\n    messageEnter.merge(message);\n\n    message.exit().remove();\n\n    this.element.style('display', 'block');\n\n    return this;\n  }\n\n  unrender() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/message.js"],"sourceRoot":""}