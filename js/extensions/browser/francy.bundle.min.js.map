{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0ea77bb2a70e787bcfb0","webpack:///./src/render/renderer.js","webpack:///./src/util/data-decorator.js","webpack:///./src/util/initialize-decorator.js","webpack:///./src/util/component.js","webpack:///./src/render/chart.js","webpack:///./src/render/composite.js","webpack:///./src/render/base.js","webpack:///./src/util/logger.js","webpack:///./src/render/graph.js","webpack:///./src/render/menu.js","webpack:///./src/render/callback.js","webpack:///./src/render/modal.js","webpack:///./src/render/tooltip.js","webpack:///./src/francy.js","webpack:///./src/render/frame.js","webpack:///./src/util/json-utils.js","webpack:///./src/render/canvas.js","webpack:///./src/render/graph-factory.js","webpack:///./src/render/graph-tree.js","webpack:///./src/render/menu-context.js","webpack:///./src/render/modal-required.js","webpack:///./src/render/graph-generic.js","webpack:///./src/render/chart-factory.js","webpack:///./src/render/chart-bar.js","webpack:///./src/render/chart-line.js","webpack:///./src/render/chart-scatter.js","webpack:///./src/render/menu-main.js","webpack:///./src/render/modal-about.js","webpack:///./node_modules/save-svg-as-png/saveSvgAsPng.js","webpack:///./src/render/message.js"],"names":["Renderer","verbose","appendTo","callbackHandler","new","target","TypeError","render","undefined","unrender","logger","debug","element","transitionDuration","options","node","tagName","toLowerCase","d3","select","parentNode","top","right","bottom","left","width","parent","attr","getBoundingClientRect","margin","height","requires","props","decorator","name","descriptor","oldValue","value","hasData","getProperty","data","apply","arguments","obj","propertyPath","tmp","properties","split","property","hasOwnProperty","Array","length","Object","values","initialize","key","_initialize","RegisterMathJax","RegisterJupyterKeyboardEvents","syntaxHighlight","_convertMathJaxOutputSVG","_convertMathJaxOutputHTML","setTimeout","MathJax","Hub","Config","showMathMenu","skipStartupTypeset","font","linebreaks","automatic","Queue","Configured","e","info","SVG","Register","StartupHook","selectAll","each","self","mathJax","bound","append","remove","classes","map","cl","Jupyter","keyboard_manager","register_events","json","replace","match","cls","test","Chart","axis","yScale","xScale","datasets","datasetNames","tooltip","canvas","chart","keys","scaleLinear","range","domain","x","y","allValues","forEach","concat","max","d","xAxisGroup","call","axisBottom","style","text","title","yAxisGroup","axisLeft","showLegend","legendGroup","legend","slice","exit","enter","i","merge","colors","dataset","from","_","scaleSequential","interpolator","interpolateRainbow","Composite","renderers","renderer","push","settings","load","Base","log","Error","partial","parse","Logger","console","message","_format","error","level","Date","toISOString","Graph","contextMenu","callback","on","executeCallback","messages","event","callbacks","cb","trigger","execute","type","symbolCross","symbolDiamond","symbolSquare","symbolTriangle","symbolStar","symbolWye","symbolCircle","Menu","menusIterator","hasNext","menuItem","next","entry","action","html","menus","content","subMenusIterator","iterator","traverse","array","nextIndex","CallbackHandler","requiredArgs","callbackObj","_execute","calbackObj","JSON","stringify","Modal","overlay","holder","Tooltip","HTMLParent","pos","mouse","SVGParent","table","row","ALL_CANVAS","Francy","frame","id","exports","window","oldResize","onresize","zoomToFit","Frame","menu","add","frameId","renderChildren","JsonUtils","input","jsonRegex","exec","mime","MIME","Canvas","graph","chartFactory","zoom","updateZoom","translateX","translateY","scale","transform","zoomIdentity","translate","zoomed","stopped","defaultPrevented","stopPropagation","bounds","getBBox","clientBounds","fullWidth","fullHeight","midX","midY","Math","transition","duration","canvasId","TreeGraph","root","hierarchy","treeData","children","x0","y0","levelWidth","childCount","n","newHeight","treemap","tree","size","collapsed","collapse","update","_children","source","nodes","descendants","links","depth","linkGroup","link","linkEnter","o","diagonal","s","nodeGroup","nodeEnter","symbol","getSymbol","nodeUpdate","layer","_applyEvents","nodeOnClick","click","canvasNodes","dataMap","reduce","ContextMenu","preventDefault","RequiredArgsModal","modalId","form","header","headerTitle","arg","onchange","checked","footer","checkValidity","inputElement","focus","GenericGraph","simulationActive","simulation","canvasLinks","linksToAdd","_filterNewElements","nodesToAdd","highlight","drag","dragstarted","dragged","dragended","empty","showNeighbours","connectedNodes","radius","manyForce","forceManyBody","strength","linkForce","forceLink","distance","collideForce","forceCollide","iterations","forceX","forceY","forceSimulation","force","ticked","restart","toggle","linkedByIndex","index","neighboring","a","b","__data__","active","alphaTarget","fx","fy","canvasObjects","d3Element","newElements","find","ChartFactory","BarChart","scaleBand","padding","domainRange","barsGroup","bar","barEnter","bandwidth","_renderAxis","_renderLegend","LineChart","linesGroup","valueLine","line","lineEnter","ScatterChart","scatterGroup","scatter","scatterEnter","SvgToPng","MainMenu","aboutModal","menuId","saveSvgAsPng","AboutModal","version","out$","doctype","isElement","HTMLElement","SVGElement","requireDomNode","el","isExternal","url","lastIndexOf","location","host","inlineImages","images","querySelectorAll","checkDone","image","href","getAttributeNS","warn","document","createElement","ctx","getContext","img","Image","crossOrigin","getAttribute","src","onload","drawImage","setAttributeNS","toDataURL","onerror","styles","cssLoadedCallback","selectorRemap","modifyStyle","css","fontsQueue","sheets","styleSheets","rules","cssRules","j","rule","selectorText","err","querySelector","selector","cssText","fontUrlRegexp","fontUrlMatch","externalFontUrl","fontUrlIsDataURI","startsWith","format","getFontMimeTypeFromUrl","processFontQueue","fontUrl","supportedFormats","extensions","extension","indexOf","queue","pop","processNext","oReq","XMLHttpRequest","addEventListener","fontLoaded","transferFailed","open","responseType","send","fontBits","response","fontInBase64","arrayBufferToBase64","updateFontStyle","dataUrl","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","getDimension","clone","dim","v","viewBox","baseVal","parseInt","getComputedStyle","getPropertyValue","isNaN","parseFloat","reEncode","encodeURIComponent","p1","c","decodeURIComponent","prepareSvg","responsive","xmlns","outer","cloneNode","box","setAttribute","svg","createElementNS","appendChild","removeAttribute","join","fos","innerHTML","defs","insertBefore","firstChild","outHtml","svgAsDataUri","uri","svgAsPngUri","encoderType","encoderOptions","convertToPng","w","h","context","canvg","backgroundColor","globalCompositeOperation","fillStyle","fillRect","png","SecurityError","atob","download","navigator","msSaveOrOpenBlob","uriToBlob","saveLink","downloadSupported","display","body","blob","URL","createObjectURL","onclick","requestAnimationFrame","revokeObjectURL","removeChild","byteString","mimeString","ArrayBuffer","intArray","charCodeAt","Blob","saveSvg","define","Message","alertsId","messageEnter"],"mappings":"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","file":"francy.bundle.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0ea77bb2a70e787bcfb0","import Base from './base';\n\n/* global d3 */\n\nexport default class Renderer extends Base {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    if (new.target === Renderer) {\n      throw new TypeError('Cannot construct [Renderer] instances directly!');\n    }\n    if (this.render === undefined || typeof this.render !== 'function') {\n      throw new TypeError('Must override [render()] method!');\n    }\n    if (this.unrender === undefined) {\n      this.logger.debug('No [unrender()] method specified...');\n    }\n    this.element = undefined;\n    this.transitionDuration = 750; //ms\n  }\n  \n  _initialize() {}\n\n  get HTMLParent() {\n    return this.options.appendTo.element.node().tagName.toLowerCase() === 'svg' ? d3.select(this.options.appendTo.element.node().parentNode) : this.options.appendTo.element;\n  }\n\n  get SVGParent() {\n    return this.options.appendTo.element.node().tagName.toLowerCase() === 'div' ? this.options.appendTo.element.select('svg') : this.options.appendTo.element;\n  }\n  \n  get parent() {\n    return this.options.appendTo.element;\n  }\n  \n  get margin() {\n    return { top: 50, right: 50, bottom: 50, left: 50 };\n  }\n  \n  get width() {\n    let width = +this.parent.attr('width') || d3.select('body').node().getBoundingClientRect().width;\n    return width - this.margin.left - this.margin.right;\n  }\n  \n  get height() {\n    let height = +this.parent.attr('height') || d3.select('body').node().getBoundingClientRect().height;\n    return height - this.margin.top - this.margin.bottom;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/renderer.js","export function requires(props) {\n  return function decorator(target, name, descriptor) {\n    var oldValue = descriptor.value;\n\n    descriptor.value = function() {\n      if (!hasData(getProperty(this.data, props))) {\n        this.logger.debug(`No data here [${props}], nothing to render... continuing...`);\n        return;\n      }\n      return oldValue.apply(this, arguments);\n    };\n\n    return descriptor;\n  };\n}\n\nfunction getProperty(obj, propertyPath) {\n\n  var tmp = obj;\n\n  if (tmp && propertyPath) {\n    var properties = propertyPath.split('.');\n\n    for (var property of properties) {\n      if (!tmp.hasOwnProperty(property)) {\n        tmp = undefined;\n        break;\n      } else {\n        tmp = tmp[property];\n      }\n    }\n  }\n\n  return tmp;\n}\n\nfunction hasData(obj) {\n  return obj && ((obj instanceof Array && obj.length) || (obj instanceof Object && Object.values(obj).length));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/data-decorator.js","export function initialize() {\n  return function (target, key, descriptor) {\n    var oldValue = descriptor.value;\n\n    descriptor.value = function() {\n      this._initialize();\n      return oldValue.apply(this, arguments);\n    };\n    return descriptor;\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/initialize-decorator.js","import Logger from './logger';\n\n/* global Jupyter, MathJax, d3 */\n\nexport function RegisterMathJax(element) {\n  if (!element) {\n    return;\n  } else if (element.node().tagName.toLowerCase() === 'svg') {\n    return _convertMathJaxOutputSVG(element);\n  } else if (element.node().tagName.toLowerCase() === 'div') {\n    return _convertMathJaxOutputHTML(element);\n  }\n}\n\nfunction _convertMathJaxOutputHTML(element) {\n  setTimeout(() => {\n    try {\n      MathJax.Hub.Config({\n        showMathMenu: false,\n        skipStartupTypeset: true,\n        'HTML-CSS': { \n          font: 'STIX-Web', \n          linebreaks: { \n            automatic: true \n          }\n        }\n      });\n\n      MathJax.Hub.Queue(\n        ['setRenderer', MathJax.Hub, 'HTML-CSS'],\n        ['Typeset', MathJax.Hub, element.node()]\n      );\n      \n      MathJax.Hub.Configured();\n    } catch (e) {\n      if (e.name === 'ReferenceError') {\n        new Logger().info('It seems MathJax is not loaded...', e);\n      }\n    }\n\n  }, 10);\n}\n\nfunction _convertMathJaxOutputSVG(element) {\n  setTimeout(() => {\n    try {\n      MathJax.Hub.Config({\n        showMathMenu: false,\n        skipStartupTypeset: true,\n        SVG: { \n          font: 'STIX-Web', \n          linebreaks: { \n            automatic: true \n          }\n        }\n      });\n\n      MathJax.Hub.Register.StartupHook('End', function() {\n        setTimeout(() => {\n          element.selectAll('.francy-label').each(function() {\n            var self = d3.select(this),\n              mathJax = self.select('text>span>svg');\n            if (mathJax.node()) {\n              setTimeout(() => {\n                setTimeout(() => {\n                  let bound = mathJax.node().getBoundingClientRect();\n                  mathJax.attr('x', -bound.width / 2);\n                  mathJax.attr('y', -15);\n                }, 10);\n                d3.select(self.node().parentNode).append(function() {\n                  return mathJax.node();\n                });\n                self.selectAll('*').remove();\n              }, 10);\n            }\n          });\n        }, 250);\n      });\n\n      MathJax.Hub.Queue(\n        ['setRenderer', MathJax.Hub, 'SVG'], \n        ['Typeset', MathJax.Hub, element.node()]\n      );\n      \n      MathJax.Hub.Configured();\n    } catch (e) {\n      if (e.name === 'ReferenceError') {\n        new Logger().info('It seems MathJax is not loaded...', e);\n      }\n    }\n\n  }, 10);\n}\n\nexport function RegisterJupyterKeyboardEvents(classes) {\n  // disable keyboard shortcuts in Jupyter for classes\n  if (!classes) return;\n  try {\n    classes.map((cl) => {\n      Jupyter.keyboard_manager.register_events(cl);\n    });\n  } catch (e) {\n    if (e.name === 'ReferenceError') {\n      new Logger().info('It seems we\\'re not running on Jupyter...', e);\n    }\n  }\n}\n\n// credits here: https://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript#answer-7220510\nexport function syntaxHighlight(json) {\n  json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function(match) {\n    let cls = 'number';\n    if (/^\"/.test(match)) {\n      if (/:$/.test(match)) {\n        cls = 'key';\n      } else {\n        cls = 'string';\n      }\n    } else if (/true|false/.test(match)) {\n      cls = 'boolean';\n    } else if (/null/.test(match)) {\n      cls = 'null';\n    }\n    return '<span class=\"' + cls + '\">' + match + '</span>';\n  });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/component.js","import Renderer from './renderer';\nimport Tooltip from './tooltip';\n\n/* global d3 */\n\nexport default class Chart extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    this.axis = undefined;\n    this.yScale = undefined;\n    this.xScale = undefined;\n    this.datasets = undefined;\n    this.datasetNames = undefined;\n    this.tooltip = undefined;\n  }\n  \n  _initialize() {\n    this.tooltip = new Tooltip(this.options);\n    \n    this.element = this.parent.select('g.francy-content');\n    \n    this.axis = this.data.canvas.chart.axis;\n    this.datasets = this.data.canvas.chart.data;\n    this.datasetNames = Object.keys(this.datasets);\n\n    this.xScale = d3.scaleLinear().range([0, this.width]).domain(this.axis.x.domain);\n    this.yScale = d3.scaleLinear().range([this.height, 0]).domain(this.axis.y.domain);\n    \n    this.allValues = [];\n    this.datasetNames.forEach(key => this.allValues = this.allValues.concat(this.datasets[key]));\n\n    if (!this.axis.y.domain.length) {\n      this.yScale.domain([0, d3.max(this.allValues, d => d)]);\n    }\n\n    if (!this.axis.x.domain.length) {\n      this.xScale.domain([0, this.allValues.length / this.datasetNames.length]);\n    }\n  }\n  \n  _renderAxis() {\n    // force rebuild axis again\n    let xAxisGroup = this.element.selectAll('g.francy-x-axis');\n\n    if (!xAxisGroup.node()) {\n      xAxisGroup = this.element.append('g').attr('class', 'francy-x-axis');\n    }\n\n    xAxisGroup.selectAll('*').remove();\n\n    // add the x Axis\n    xAxisGroup\n      .attr('transform', `translate(0,${this.height})`)\n      .call(d3.axisBottom(this.xScale))\n      .append('text')\n      .attr('dy', 50)\n      .attr('dx', this.width / 2)\n      .attr('fill', 'black')\n      .attr('class', 'francy-axis')\n      .style('text-anchor', 'end')\n      .text(this.axis.x.title);\n\n    // force rebuild axis again\n    let yAxisGroup = this.element.selectAll('g.francy-y-axis');\n\n    if (!yAxisGroup.node()) {\n      yAxisGroup = this.element.append('g').attr('class', 'francy-y-axis');\n    }\n\n    yAxisGroup.selectAll('*').remove();\n\n    // add the y Axis\n    yAxisGroup\n      .call(d3.axisLeft(this.yScale))\n      .append('text')\n      .attr('dx', -50)\n      .attr('dy', this.height / 2)\n      .attr('fill', 'black')\n      .attr('class', 'francy-axis')\n      .style('text-anchor', 'end')\n      .text(this.axis.y.title);\n  }\n  \n  _renderLegend() {\n    if (this.data.canvas.chart.showLegend) {\n\n      let legendGroup = this.element.selectAll('.francy-legend');\n\n      if (!legendGroup.node()) {\n        legendGroup = this.element.append('g').attr('class', 'francy-legend');\n      }\n\n      // force rebuild legend again\n      legendGroup.selectAll('*').remove();\n\n      let legend = legendGroup.selectAll('g').data(this.datasetNames.slice());\n\n      legend.exit().remove();\n\n      legend = legend.enter()\n        .append('g')\n        .attr('transform', (d, i) => `translate(0,${i * 20})`)\n        .merge(legend);\n\n      legend.append('rect')\n        .attr('x', this.width + 20)\n        .attr('width', 19)\n        .attr('height', 19)\n        .style('fill', (d, i) => Chart.colors(i * 5));\n\n      legend.append('text')\n        .attr('x', this.width + 80)\n        .attr('y', 9)\n        .attr('dy', '.35em')\n        .style('text-anchor', 'end')\n        .text(d => d);\n    }\n  }\n\n  static tooltip(dataset, value) {\n    return { 'A': { 'title': 'Dataset', 'text': dataset }, 'B': { 'title': 'Value', 'text': value } };\n  }\n\n  static get colors() {\n    return d3.scaleSequential().domain([0, 100]).interpolator(d3.interpolateRainbow);\n  }\n\n  static domainRange(max) {\n    return Array.from(new Array(max), (_, i) => i).map(x => x);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/chart.js","import Renderer from './renderer';\n\nexport default class Composite extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    if (new.target === Composite) {\n      throw new TypeError('Cannot construct [Composite] instances directly!');\n    }\n    this.renderers = [];\n  }\n\n  add(renderer) {\n    this.renderers.push(renderer);\n    return this;\n  }\n\n  renderChildren() {\n    // update children rendering with a new parent!\n    let options = this.options;\n    options.appendTo = this;\n    // render other components\n    for (let renderer of this.renderers) {\n      renderer.settings(options).load(this.data).render();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/composite.js","import Logger from '../util/logger';\nimport JsonUtils from '../util/json-utils';\n\nexport default class Base {\n\n  constructor({ verbose = false, appendTo = 'body', callbackHandler }) {\n    this.settings({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    /**\n     * @type {Logger} the logger for this class\n     */\n    this.log = new Logger(this.options);\n  }\n\n  settings({ verbose, appendTo, callbackHandler }) {\n    this.options = this.options || {};\n    if (!this.options.callbackHandler && !callbackHandler) {\n      throw new Error('A Callback Handler must be provided! This will be used to trigger events from the graphics produced...');\n    }\n    if (!this.options.appendTo && !appendTo) {\n      throw new Error('Missing an element or id to append the graphics to...!');\n    }\n    /**\n     * @typedef {Object} Options\n     * @property {Boolean} verbose prints extra log information to console.log, default false\n     * @property {Boolean} appendTo where the generated html/svg components will be attached to, default body\n     * @property {Function} callbackHandler this handler will be used to invoke actions from the menu, default console.log\n     */\n    this.options.verbose = verbose || this.options.verbose;\n    this.options.appendTo = appendTo || this.options.appendTo;\n    this.options.callbackHandler = callbackHandler || this.options.callbackHandler;\n    return this;\n  }\n\n  load(json, partial) {\n    let data = JsonUtils.parse(json, partial);\n    if (data) {\n      this.data = data;\n    }\n    return this;\n  }\n\n  get logger() {\n    return this.log;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/base.js","/**\n * This class provides a logger for the Francy application.\n */\nexport default class Logger {\n\n  /**\n   * Logger constructor\n   * @param verbose prints extra log information to console.log, defaults to false\n   */\n  constructor({ verbose = false } = {}) {\n    this.verbose = verbose;\n    this.console = console;\n  }\n\n  /**\n   * Creates a [DEBUG] entry in the console log\n   * @param message the message to print\n   */\n  debug(message) {\n    if (this.verbose) {\n      this.console.debug(Logger._format('DEBUG', message));\n    }\n  }\n\n  /**\n   * Creates a [INFO] entry in the console log\n   * @param message the message to print\n   */\n  info(message) {\n    this.console.info(Logger._format('INFO', message));\n  }\n\n  /**\n   * Creates a [ERROR] entry in the console log\n   * @param message the message to print\n   * @param error the error Object to attach to the message\n   */\n  error(message, error) {\n    this.console.error(Logger._format('ERROR', message), error);\n  }\n\n  /**\n   * Creates a [WARN] entry in the console log\n   * @param message the message to print\n   * @param error the error Object to attach to the message\n   */\n  warn(message, error) {\n    error = error || {};\n    this.console.error(Logger._format('WARN', message), error);\n  }\n\n  /**\n   * This is a private method that formats all log messages\n   * @param level the log level\n   * @param message the message to print\n   */\n  static _format(level, message) {\n    return `[${level}] - ${new Date().toISOString()} - ${message}`;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/logger.js","import Renderer from './renderer';\nimport ContextMenu from './menu-context';\nimport Tooltip from './tooltip';\nimport Callback from './callback';\n\n/* global d3 */\n\nexport default class Graph extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n  \n  _initialize() {\n    this.element = this.parent.select('g.francy-content');\n  }\n\n  _applyEvents(element) {\n    if (!element) return;\n\n    let tooltip = new Tooltip(this.options);\n    let contextMenu = new ContextMenu(this.options);\n    let callback = new Callback(this.options);\n\n    element\n      .on('contextmenu', function(d) {\n        d = d.data || d;\n        // default, build context menu\n        contextMenu.load(d, true).render();\n        // any callbacks will be handled here\n        executeCallback.call(this, d, 'contextmenu');\n      })\n      .on('click', function(d) {\n        d = d.data || d;\n        // any callbacks will be handled here\n        executeCallback.call(this, d, 'click');\n      })\n      .on('dblclick', function(d) {\n        d = d.data || d;\n        // any callbacks will be handled here\n        executeCallback.call(this, d, 'dblclick');\n      })\n      .on('mouseenter', d => {\n        d = d.data || d;\n        // default, show tooltip\n        tooltip.load(d.messages, true).render();\n      })\n      .on('mouseleave', () => {\n        // default, hide tooltip\n        tooltip.unrender();\n      });\n\n    function executeCallback(data, event) {\n      if (data.callbacks) {\n        Object.values(data.callbacks).forEach((cb) => {\n          // execute the ones that match the event!\n          cb.trigger === event && callback.load({ callback: cb }, true).execute();\n        });\n      }\n    }\n  }\n\n  static get colors() {\n    return d3.scaleSequential().domain([0, 100]).interpolator(d3.interpolateRainbow);\n  }\n\n  static getSymbol(type) {\n    \n    let element = undefined;\n    switch (type) {\n    case 'cross':\n      element = d3.symbolCross;\n      break;\n    case 'diamond':\n      element = d3.symbolDiamond;\n      break;\n    case 'square':\n      element = d3.symbolSquare;\n      break;\n    case 'triangle':\n      element = d3.symbolTriangle;\n      break;\n    case 'star':\n      element = d3.symbolStar;\n      break;\n    case 'wye':\n      element = d3.symbolWye;\n      break;\n    case 'circle':\n    default:\n      element = d3.symbolCircle;\n    }\n\n    return element;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/graph.js","import Renderer from './renderer';\nimport Callback from './callback';\n\nexport default class Menu extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  traverse(appendTo, menusIterator) {\n    while (menusIterator.hasNext()) {\n      let menuItem = menusIterator.next();\n      let entry = appendTo.append('li');\n      let action = entry.selectAll('a').data([menuItem]).enter().append('a').attr('title', menuItem.title).html(menuItem.title);\n      if (menuItem.callback && Object.values(menuItem.callback).length) {\n        action.on('click', (d) => new Callback(this.options).load(d, true).execute());\n      }\n      if (menuItem.menus && Object.values(menuItem.menus).length > 0) {\n        let content = entry.append('ul');\n        let subMenusIterator = this.iterator(Object.values(menuItem.menus));\n        this.traverse(content, subMenusIterator);\n      }\n    }\n  }\n\n  iterator(array) {\n    let nextIndex = 0;\n    return {\n      next: function() {\n        return this.hasNext() ? array[nextIndex++] : undefined;\n      },\n      hasNext: function() {\n        return nextIndex < array.length;\n      }\n    };\n  }\n\n  unrender() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/menu.js","import Base from './base';\nimport RequiredArgsModal from './modal-required';\nimport { requires } from '../util/data-decorator';\n\nexport default class CallbackHandler extends Base {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    this.callback = callbackHandler;\n  }\n\n  @requires('callback')\n  execute() {\n    if (Object.keys(this.data.callback.requiredArgs).length) {\n      let options = this.options;\n      options.callbackHandler = (callbackObj) => this._execute.call(this, callbackObj);\n      return new RequiredArgsModal(options).load(this.data, true).render();\n    }\n    \n    // Trigger is the expected command on GAP for this events!\n    this._execute(this.data.callback);\n    \n  }\n\n  _execute(calbackObj) {\n    this.callback(`Trigger(${JSON.stringify(JSON.stringify(calbackObj))});`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/callback.js","import Renderer from './renderer';\n\n/* global d3 */\n\nexport default class Modal extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    this.overlay = undefined;\n    this.holder = undefined;\n  }\n  \n  _initialize() {\n    // we want to overlay everything, hence 'body' must be used\n    this.overlay = d3.select('body').append('div').attr('class', 'francy-overlay');\n    this.holder = d3.select('body').append('div').attr('class', 'francy');\n  }\n  \n  unrender() {\n    this.overlay.remove();\n    this.element.remove();\n    this.holder.remove();\n    return false;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/modal.js","import Renderer from './renderer';\nimport { requires } from '../util/data-decorator';\n\n/* global d3 */\n\nexport default class Tooltip extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @requires()\n  render() {\n\n    this.element = this.HTMLParent.select('div.francy-tooltip-holder');\n    // check if the window is already present\n    if (!this.element.node()) {\n      this.element = this.HTMLParent.append('div')\n        .attr('class', 'francy-tooltip-holder');\n    }\n\n    // check if it exists already\n    if (this.element.selectAll('*').node()) {\n      return;\n    }\n\n    let pos = d3.mouse(this.SVGParent.node());\n\n    // TODO fix always visible tooltip, fine until someone complains about :P\n    this.element.style('left', (pos[0] + 5) + 'px').style('top', (pos[1] - 5) + 'px');\n\n    let table = this.element.append('div').attr('class', 'francy-tooltip')\n      .append('div').attr('class', 'francy-table')\n      .append('div').attr('class', 'francy-table-body');\n    let self = this;\n    Object.keys(this.data).map(function(key) {\n      let row = table.append('div').attr('class', 'francy-table-row');\n      row.append('div').attr('class', 'francy-table-cell').text(self.data[key].title);\n      row.append('div').attr('class', 'francy-table-cell').text(self.data[key].text);\n    });\n\n    // show tooltip\n    this.element.style('display', 'block');\n\n    return this;\n  }\n\n  unrender() {\n    if (this.element) {\n      this.element.selectAll('*').remove();\n      this.element.style('display', null);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/tooltip.js","import Frame from './render/frame';\nimport Renderer from './render/renderer';\nimport { requires } from './util/data-decorator';\n\n/* global d3 */\n\nlet ALL_CANVAS = {};\n\n/**\n * Francy is the main entry point for the whole framework. By passing an input string/object to the {Francy.load} function,\n * Francy will handle the creation of that json as long it is a valid and understandable json object to Francy.\n *  \n * @access public\n * \n * @version 0.5.0\n * \n * @example\n * let francy = new Francy({verbose: true, appendTo: '#div-id', callbackHandler: console.log});\n * francy.load(json).render();\n */\nexport default class Francy extends Renderer {\n\n  /**\n   * Creates an instance of Francy with the following options:\n   * @typedef {Object} Options\n   * @property {Boolean} verbose prints extra log information to console.log, default false\n   * @property {Boolean} appendTo where the generated html/svg components will be attached to, default body\n   * @property {Function} callbackHandler this handler will be used to invoke actions from the menu, default console.log\n   */\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    if (!d3) {\n      throw new Error('D3 is not imported! Francy won\\'t work without it... please import D3 v4+.');\n    }\n  }\n\n  /**\n   * Main entry point. Calling render passing a json representation string will \n   * trigger the drawing of a json object.\n   * @returns {Object} the html element created\n   */\n  @requires('canvas')\n  render() {\n    let frame = new Frame(this.options).load(this.data).render();\n    ALL_CANVAS[this.data.canvas.id] = frame;\n    return frame.element.node();\n  }\n\n  static unrender(id) {\n    delete ALL_CANVAS[id];\n  }\n}\n\ntry {\n  exports.Francy = window.Francy = Francy;\n  // handle events on resize\n  let oldResize = window.onresize;\n  window.onresize = function() {\n    // zoom to fit all canvas on resize\n    Object.values(ALL_CANVAS).forEach(function(frame) {\n      frame.canvas.zoomToFit();\n    });\n    // call old resize function if any!\n    if (typeof oldResize === 'function') {\n      oldResize();\n    }\n  };\n} catch (e) {\n  exports.Francy = Francy;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/francy.js","import Composite from './composite';\nimport Canvas from './canvas';\nimport MainMenu from './menu-main';\nimport Message from './message';\nimport { requires } from '../util/data-decorator';\n\n/* global d3 */\n\nexport default class Frame extends Composite {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    this.canvas = new Canvas(this.options);\n    this.menu = new MainMenu(this.options);\n    this.messages = new Message(this.options);\n    this.add(this.messages).add(this.menu).add(this.canvas);\n  }\n\n  @requires('canvas')\n  render() {\n    let parent = d3.select(this.options.appendTo);\n\n    const frameId = `Frame-${this.data.canvas.id}`;\n    this.element = d3.select(`div#${frameId}`);\n    // check if the canvas is already present\n    if (!this.element.node()) {\n      // create a svg element detached from the DOM!\n      this.logger.debug(`Creating Frame [${frameId}]...`);\n      this.element = parent.append('div').attr('class', 'francy').attr('id', frameId);\n    }\n\n    // cannot continue if canvas is not present\n    if (!this.element.node()) {\n      throw new Error(`Oops, could not create frame with id [${frameId}]... Cannot proceed.`);\n    }\n\n    this.logger.debug(`Frame updated [${frameId}]...`);\n\n    this.renderChildren();\n\n    return this;\n  }\n\n  unrender() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/frame.js","/**\n * This class contains methods to deal with JSON.\n */\nexport default class JsonUtils {\n\n  /**\n   * Parses an input nd checks whether this input is valid and returns a JSON object.\n   * @param input - the input to parse\n   * @param partial - if the input is not a complete Francy JSON Object, defaults to false\n   * @returns {json} - if the input is a valid JSON object, otherwise returns {undefined}\n   */\n  static parse(input, partial = false) {\n    if (!input) return;\n    input = typeof input !== 'string' ? JSON.stringify(input) : input;\n    input = input.replace(/[\\n\\r\\b\\\\]+|(gap>)/g, '');\n    let jsonRegex = /{(?:[^])*}/g;\n    let match = jsonRegex.exec(input);\n    if (match) {\n      input = match[0];\n      try {\n        let json = JSON.parse(input);\n        return json.mime === JsonUtils.MIME || partial ? json : undefined;\n      } catch (e) {\n        /* eslint-disable no-console */\n        console.error(e);\n        /* eslint-enable no-console */\n      }\n    }\n  }\n\n  /**\n   * Returns a static string representing the mime type supported by this package\n   */\n  static get MIME() {\n    return 'application/vnd.francy+json';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/json-utils.js","import Composite from './composite';\nimport GraphFactory from './graph-factory';\nimport ChartFactory from './chart-factory';\nimport { requires } from '../util/data-decorator';\n\n/* global d3 */\n\nexport default class Canvas extends Composite {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n    this.graph = new GraphFactory(this.options);\n    this.chartFactory = new ChartFactory(this.options);\n    this.add(this.graph).add(this.chartFactory);\n  }\n\n  @requires('canvas')\n  render() {\n    let content;\n    let zoom = d3.zoom();\n    let self = this;\n\n    function updateZoom(translateX, translateY, scale) {\n      self.element.call(zoom.transform, d3.zoomIdentity.translate(translateX, translateY).scale(scale, scale));\n    }\n\n    function zoomed() {\n      content.attr('transform', d3.event.transform);\n    }\n\n    function stopped() {\n      if (d3.event.defaultPrevented) {\n        d3.event.stopPropagation(); \n      }\n    }\n\n    function zoomToFit() {\n      // only execute if enable, of course\n      if (self.data.canvas.zoomToFit) {\n        let bounds = content.node().getBBox();\n\n        let clientBounds = self.element.node().getBoundingClientRect(),\n          fullWidth = clientBounds.right - clientBounds.left,\n          fullHeight = clientBounds.bottom - clientBounds.top;\n\n        let width = +bounds.width,\n          height = +bounds.height;\n\n        if (width === 0 || height === 0) return;\n\n        let midX = bounds.x + width / 2,\n          midY = bounds.y + height / 2;\n\n        let scale = 0.9 / Math.max(width / fullWidth, height / fullHeight);\n        let translateX = fullWidth / 2 - scale * midX,\n          translateY = fullHeight / 2 - scale * midY;\n\n        content.transition()\n          .duration(self.transitionDuration)\n          .attr('transform', `translate(${translateX},${translateY})scale(${scale},${scale})`)\n          .on('end', () => updateZoom(translateX, translateY, scale));\n      }\n    }\n\n    const canvasId = `Canvas-${this.data.canvas.id}`;\n    this.element = d3.select(`svg#${canvasId}`);\n    // check if the canvas is already present\n    if (!this.element.node()) {\n      // create a svg element detached from the DOM!\n      this.logger.debug(`Creating Canvas [${canvasId}]...`);\n      this.element = this.parent.append('svg')\n        .attr('class', 'francy-canvas')\n        .attr('id', canvasId);\n    }\n\n    // cannot continue if canvas is not present\n    if (!this.element.node()) {\n      throw new Error(`Oops, could not create canvas with id [${canvasId}]... Cannot proceed.`);\n    }\n\n    this.element.attr('width', this.data.canvas.width).attr('height', this.data.canvas.height);\n\n    content = this.element.select('g.francy-content');\n\n    if (!content.node()) {\n      content = this.element.append('g').attr('class', 'francy-content');\n      zoom.on('zoom', zoomed);\n      // remove zoom on double click!\n      this.element.call(zoom).on('dblclick.zoom', null);\n    }\n\n    this.element.on('click', stopped, true);\n\n    this.element.zoomToFit = this.zoomToFit = zoomToFit;\n\n    this.logger.debug(`Canvas updated [${canvasId}]...`);\n\n    this.renderChildren();\n\n    setTimeout(() => {\n      zoomToFit();\n    }, this.transitionDuration);\n\n    return this;\n  }\n\n  unrender() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/canvas.js","import Renderer from './renderer';\nimport TreeGraph from './graph-tree';\nimport GenericGraph from './graph-generic';\nimport { requires } from '../util/data-decorator';\n\nexport default class Graph extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @requires('canvas.graph')\n  render() {\n\n    let element = undefined;\n    switch (this.data.canvas.graph.type) {\n    case 'tree':\n      element = new TreeGraph(this.options).load(this.data).render();\n      break;\n    default:\n      element = new GenericGraph(this.options).load(this.data).render();\n    }\n\n    return element;\n  }\n\n  unrender() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/graph-factory.js","import Graph from './graph';\nimport { RegisterMathJax } from '../util/component';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class TreeGraph extends Graph {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n\n    let i = 0,\n      root;\n\n    root = d3.hierarchy(this.treeData, d => d.children);\n    root.x0 = this.height / 2;\n    root.y0 = 0;\n\n    // compute height based on the depth of the graph\n    let levelWidth = [1];\n    let childCount = function (level, n) {\n\n      if (n.children && n.children.length > 0) {\n        if (levelWidth.length <= level + 1) levelWidth.push(0);\n\n        levelWidth[level + 1] += n.children.length;\n        n.children.forEach(function (d) {\n          childCount(level + 1, d);\n        });\n      }\n    };\n    childCount(0, root);\n    let newHeight = d3.max(levelWidth) * 100;\n\n    let treemap = d3.tree().size([newHeight, this.width]);\n\n    if (this.data.canvas.graph.collapsed) {\n      root.children.forEach(collapse);\n    }\n\n    update.call(this, root);\n\n    function collapse(d) {\n      if (d.children) {\n        d._children = d.children;\n        d._children.forEach(collapse);\n        d.children = null;\n      }\n    }\n\n    function update(source) {\n      let treeData = treemap(root);\n\n      let nodes = treeData.descendants(),\n        links = treeData.descendants().slice(1);\n\n      nodes.forEach(d => d.y = d.depth * 180);\n\n      let linkGroup = this.element.selectAll('g.francy-links');\n\n      if (!linkGroup.node()) {\n        linkGroup = this.element.append('g').attr('class', 'francy-links');\n      }\n\n      let link = linkGroup.selectAll('path.francy-edge')\n        .data(links, d => d.id || (d.id = ++i));\n\n      let linkEnter = link.enter()\n        .append('path').attr('class', 'francy-edge')\n        .attr('d', () => {\n          let o = {x: source.x0, y: source.y0};\n          return diagonal(o, o);\n        });\n\n      linkEnter.merge(link)\n        .transition().duration(this.transitionDuration).attr('d', d => diagonal(d, d.parent));\n\n      link.exit().transition().duration(this.transitionDuration)\n        .attr('d', () => {\n          let o = {x: source.x, y: source.y};\n          return diagonal(o, o);\n        }).remove();\n\n      linkGroup.selectAll('path.francy-edge')\n        .style('fill', 'none')\n        .style('stroke', '#ccc')\n        .style('stroke-width', '1px');\n\n      nodes.forEach((d) => {\n        d.x0 = d.x;\n        d.y0 = d.y;\n      });\n\n      function diagonal(s, d) {\n        return `M ${s.y} ${s.x}\n            C ${(s.y + d.y) / 2} ${s.x},\n              ${(s.y + d.y) / 2} ${d.x},\n              ${d.y} ${d.x}`;\n      }\n\n      let nodeGroup = this.element.selectAll('g.francy-nodes');\n\n      if (!nodeGroup.node()) {\n        nodeGroup = this.element.append('g').attr('class', 'francy-nodes');\n      }\n\n      let node = nodeGroup.selectAll('g.francy-node')\n        .data(nodes, d => d.id || (d.id = ++i));\n\n      let nodeEnter = node.enter().append('g')\n        .attr('class', 'francy-node')\n        .attr('transform', () => `translate(${source.y0},${source.x0})`);\n\n      nodeEnter.append('path')\n        .attr('d', d3.symbol().type(d => Graph.getSymbol(d.data.type)).size(d => d.data.size * 100))\n        .attr('class', 'francy-symbol');\n\n      nodeEnter.append('text')\n        .attr('class', 'francy-label')\n        .text(d => d.data.title)\n        .attr('x',  function() {\n          let bound = this.getBBox();\n          return -(bound.width / 2);\n        })\n        .style('cursor', d => d.children || d._children ? 'pointer' : 'default');\n\n      let nodeUpdate = nodeEnter.merge(node);\n\n      nodeUpdate.transition()\n        .duration(this.transitionDuration)\n        .attr('transform', d => `translate(${d.y},${d.x})`);\n\n      node.exit().transition().duration(this.transitionDuration)\n        .attr('transform', () => `translate(${source.y},${source.x})`)\n        .remove();\n\n      nodeGroup.selectAll('path.francy-symbol')\n        .style('fill', d => d.children || d._children ? 'lightsteelblue' : Graph.colors(d.data.layer * 5))\n        .style('cursor', d => d.children || d._children ? 'pointer' : 'default');\n\n      node = nodeGroup.selectAll('g.francy-node');\n      \n      if (node.node()) {\n        this._applyEvents(node);\n\n        let nodeOnClick = node.on('click');\n        node.on('click', (d) => {\n        // any callbacks will be handled here\n          nodeOnClick.call(this, d.data);\n          // default, highlight connected nodes\n          click.call(this, d);\n        });\n      }\n\n      // Toggle children on click.\n      let self = this;\n\n      function click(d) {\n        if (d.children) {\n          d._children = d.children;\n          d.children = null;\n        } else {\n          d.children = d._children;\n          d._children = null;\n        }\n        update.call(self, d);\n      }\n\n      RegisterMathJax(this.SVGParent);\n\n      setTimeout(() => {\n        this.parent.zoomToFit();\n      }, this.transitionDuration);\n    }\n\n    return this;\n\n  }\n\n  unrender() {}\n\n  /**\n   * Transforms flat data into tree data by analysing the parents of each node\n   * @returns {Object} the data transformed in tree data\n   */\n  get treeData() {\n    let canvasNodes = this.data.canvas.graph.nodes ? Object.values(this.data.canvas.graph.nodes) : [];\n    let dataMap = canvasNodes.reduce(function (map, node) {\n      map[node.id] = node;\n      return map;\n    }, {});\n    let treeData = [];\n    canvasNodes.forEach(function(node) {\n      let parent = dataMap[node.parent];\n      if (parent) {\n        (parent.children || (parent.children = [])).push(node);\n      } else {\n        treeData.push(node);\n      }\n    });\n    return treeData[0];\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/graph-tree.js","import Menu from './menu';\nimport { requires } from '../util/data-decorator';\n\n/* global d3 */\n\nexport default class ContextMenu extends Menu {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @requires('menus')\n  render() {\n\n    d3.event.preventDefault();\n\n    this.element = this.HTMLParent.select('div.francy-context-menu-holder');\n    // check if the window is already present\n    if (!this.element.node()) {\n      this.element = this.HTMLParent.append('div')\n        .attr('class', 'francy-context-menu-holder');\n    }\n\n    let pos = d3.mouse(this.SVGParent.node());\n\n    this.element.style('left', pos[0] + 5 + 'px').style('top', pos[1] + 5 + 'px');\n\n    // show the context menu\n    this.element.style('display', 'block');\n\n    // check if it exists already\n    if (this.element.selectAll('*').node()) {\n      return;\n    }\n\n    // destroy menu\n    d3.select('body').on('click.francy-context-menu', () => this.unrender());\n\n    // this gets executed when a contextmenu event occurs\n    let menu = this.element.append('div').attr('class', 'francy-context-menu').append('ul');\n    let menusIterator = this.iterator(Object.values(this.data.menus));\n    this.traverse(menu, menusIterator);\n\n    return this;\n  }\n\n  unrender() {\n    if (this.element) {\n      this.element.selectAll('*').remove();\n      this.element.style('display', null);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/menu-context.js","import Modal from './modal';\nimport { RegisterJupyterKeyboardEvents } from '../util/component';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class RequiredArgsModal extends Modal {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n    let self = this;\n\n    let modalId = this.data.callback.id;\n\n    this.logger.debug(`Creating Callback Modal [${modalId}]...`);\n\n    this.element = this.holder.append('div')\n      .attr('id', modalId)\n      .attr('class', 'francy-modal');\n\n    let form = this.element.append('form');\n\n    let header = form.append('div').attr('class', 'francy-modal-header');\n\n    let headerTitle = header.append('span').html('Required arguments&nbsp;');\n    if (this.data.title) {\n      headerTitle.append('span').attr('style', 'font-weight: bold;').text(`for ${this.data.title}`);\n    }\n\n    let content = form.append('div').attr('class', 'francy-modal-content').append('div').attr('class', 'francy-table').append('div').attr('class', 'francy-table-body');\n\n    for (let arg of Object.values(this.data.callback.requiredArgs)) {\n      let row = content.append('div').attr('class', 'francy-table-row');\n      row.append('div').attr('class', 'francy-table-cell').append('label').attr('for', arg.id).text(arg.title);\n      let input = row.append('div').attr('class', 'francy-table-cell').append('input').attr('id', arg.id).attr('class', 'francy-arg')\n        .attr('required', '')\n        .attr('name', arg.id)\n        .attr('type', arg.type)\n        .attr('value', arg.value)\n        .on('change', function () {\n          self.data.callback.requiredArgs[this.id].value = this.value;\n        })\n        .on('input', this.onchange)\n        .on('keyup', this.onchange)\n        .on('paste', this.onchange);\n      // wait, if it is boolean we create a checkbox\n      if (arg.type === 'boolean') {\n        // well, a checkbox works this way so we need to initialize \n        // the value to false and update the value based on the checked \n        // property that triggers the onchange event\n        arg.value = arg.value || false;\n        input.attr('type', 'checkbox').attr('required', null)\n          .attr('value', arg.value)\n          .on('change', function() {\n            self.data.callback.requiredArgs[this.id].value = this.value = this.checked; \n          });\n      }\n      row.append('span').attr('class', 'validity');\n    }\n\n    let footer = form.append('div').attr('class', 'francy-modal-footer');\n\n    footer.append('button').text('Ok').on('click', () => {\n      if (form.node().checkValidity()) {\n        d3.event.preventDefault();\n        this.options.callbackHandler(this.data.callback);\n        this.unrender.call(this);\n      }\n      return false;\n    });\n    footer.append('button').text('Cancel').on('click', () => { \n      d3.event.preventDefault(); \n      this.unrender.call(this); \n    });\n\n    // disable keyboard shortcuts when using this modal in Jupyter\n    RegisterJupyterKeyboardEvents(['.francy', '.francy-arg', '.francy-overlay', '.francy-modal']);\n\n    let inputElement = content.selectAll('.francy-arg').node();\n    if (inputElement) {\n      inputElement.focus();\n    }\n\n    this.logger.debug(`Callback Modal updated [${modalId}]...`);\n\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/modal-required.js","import Graph from './graph';\nimport { RegisterMathJax } from '../util/component';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class GenericGraph extends Graph {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n    var self = this;\n    \n    let simulationActive = this.data.canvas.graph.simulation;\n\n    let canvasNodes = this.data.canvas.graph.nodes ? Object.values(this.data.canvas.graph.nodes) : [],\n      canvasLinks = this.data.canvas.graph.links ? Object.values(this.data.canvas.graph.links) : [];\n\n    let linkGroup = this.element.selectAll('g.francy-links');\n\n    if (!linkGroup.node()) {\n      linkGroup = this.element.append('g').attr('class', 'francy-links');\n    }\n\n    let links = linkGroup.selectAll('g.francy-link').data();\n    let linksToAdd = this._filterNewElements(canvasLinks, links);\n\n    let link = linkGroup.selectAll('g.francy-link').data(linksToAdd, d => d.id);\n\n    let nodeGroup = this.element.selectAll('g.francy-nodes');\n\n    if (!nodeGroup.node()) {\n      nodeGroup = this.element.append('g').attr('class', 'francy-nodes');\n    }\n\n    let nodes = nodeGroup.selectAll('g.francy-node').data();\n    let nodesToAdd = this._filterNewElements(canvasNodes, nodes);\n\n    let node = nodeGroup.selectAll('g.francy-node').data(nodesToAdd, d => d.id);\n\n    if (node.exit().data().length === 0 &&\n      node.enter().data().length === 0 &&\n      link.enter().data().length === 0 &&\n      link.exit().data().length === 0) {\n      return;\n    }\n\n    let linkEnter = link.enter().append('g').attr('class', 'francy-link');\n\n    linkEnter.append('line').attr('class', 'francy-edge');\n\n    link.exit().remove();\n\n    link = linkGroup.selectAll('g.francy-link line.francy-edge');\n\n    if (this.data.canvas.graph.type === 'directed') {\n      // this means we need arrows, so we append the marker\n      self.parent.append('defs').selectAll('marker')\n        .data(['arrow'])\n        .enter().append('marker')\n        .attr('class', 'francy-arrows')\n        .attr('id', d => d)\n        .attr('viewBox', '0 -5 10 10')\n        .attr('refX', 25)\n        .attr('refY', 0)\n        .attr('markerWidth', 10)\n        .attr('markerHeight', 10)\n        .attr('orient', 'auto')\n        .append('path')\n        .attr('d', 'M0,-5L10,0L0,5 L10,0 L0, -5');\n      // update the style of the link\n      link.style('marker-end', 'url(#arrow)');\n    }\n\n    let nodeEnter = node.enter().append('g')\n      .attr('class', 'francy-node').attr('id', d => d.id);\n\n    nodeEnter.append('path')\n      .attr('d', d3.symbol().type(d => Graph.getSymbol(d.type)).size(d => d.size * 100))\n      .style('fill', d => Graph.colors(d.layer * 5))\n      .attr('class', d => 'francy-symbol' + (d.highlight ? ' francy-highlight' : '') + (Object.values(d.menus).length ? ' francy-context' : ''));\n\n    nodeEnter.append('text')\n      .attr('class', 'francy-label')\n      .text(d => d.title)\n      .attr('x', function() {\n        let bound = this.getBBox();\n        return -(bound.width / 2);\n      });\n\n    node.exit().remove();\n\n    node = nodeGroup.selectAll('g.francy-node');\n\n    if (this.data.canvas.graph.drag) {\n      node.call(d3.drag()\n        .on('start', dragstarted)\n        .on('drag', dragged)\n        .on('end', dragended));\n    }\n\n    if (node && !node.empty()) {\n\n      this._applyEvents(node);\n\n      if (this.data.canvas.graph.showNeighbours) {\n        let nodeOnClick = node.on('click');\n        node.on('click', function(d) {\n          // default, highlight connected nodes\n          connectedNodes.call(this);\n          // any callbacks will be handled here\n          nodeOnClick.call(this, d);\n        });\n      }\n    }\n\n    if (simulationActive) {\n      //iterate through the data and get the widest node group including label\n      let radius = 0;\n      node.each(function(){\n        let bound = this.getBBox();\n        if (radius < bound.width) {\n          radius = bound.width;\n        }\n      });\n      //Canvas Forces\n      //let centerForce = d3.forceCenter().x(this.width / 2).y(this.height / 2);\n      let manyForce = d3.forceManyBody().strength(-canvasNodes.length * 75);\n      let linkForce = d3.forceLink(canvasLinks).id(d => d.id).distance(75);\n      let collideForce = d3.forceCollide().radius(radius/2).iterations(3);\n\n      //Generic gravity for the X position\n      let forceX = d3.forceX(this.width).strength(0.05);\n      //Generic gravity for the Y position - undirected/directed graphs fall here\n      let forceY = d3.forceY(-this.height).strength(0.25);\n\n      if (this.data.canvas.graph.type === 'hasse') {\n        //Generic gravity for the X position\n        forceX = d3.forceX(this.width).strength(0.4);\n        //Strong y positioning based on layer to simulate the hasse diagram\n        forceY = d3.forceY(d => d.layer * 75).strength(0.7);\n      }\n\n      var simulation = d3.forceSimulation().nodes(nodesToAdd)\n        .force('charge', manyForce)\n        .force('link', linkForce)\n        //.force('center', centerForce)\n        .force('x', forceX)\n        .force('y', forceY)\n        .force('collide', collideForce)\n        .on('tick', ticked)\n        .on('end', function() {\n          // zoom to fit when simulation is over\n          self.parent.zoomToFit();\n        });\n\n      //force simulation restart\n      simulation.restart();\n    } else {\n      // well, simulation is off, apply fixed positions and zoom to fit now\n      ticked();\n      self.parent.zoomToFit();\n    }\n\n    function ticked() {\n      link\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y);\n\n      node.attr('transform', d => `translate(${d.x},${d.y})`);\n    }\n\n    // HIGHLIGHT\n    //Toggle stores whether the highlighting is on\n    let toggle = 0;\n    //Create an array logging what is connected to what\n    let linkedByIndex = {};\n\n    for (let i = 0; i < canvasNodes.length; i++) {\n      linkedByIndex[`${i},${i}`] = 1;\n    }\n\n    canvasLinks.forEach(function(d) {\n      linkedByIndex[`${d.source.index},${d.target.index}`] = 1;\n    });\n\n    function connectedNodes() {\n      //This function looks up whether a pair are neighbours\n      function neighboring(a, b) {\n        return linkedByIndex[`${a.index},${b.index}`];\n      }\n      d3.event.preventDefault();\n      if (toggle === 0) {\n        //Reduce the opacity of all but the neighbouring nodes\n        let d = d3.select(this).node().__data__;\n        node.style('opacity', o => neighboring(d, o) || neighboring(o, d) ? 1 : 0.1);\n        link.style('opacity', o => d.index === o.source.index || d.index === o.target.index ? 1 : 0.1);\n        //Reduce the op\n        toggle = 1;\n      } else {\n        //Put them back to opacity=1\n        node.style('opacity', 1);\n        link.style('opacity', 1);\n        toggle = 0;\n      }\n    }\n\n    function dragstarted(d) {\n      if (!d3.event.active && simulationActive) {\n        simulation.alphaTarget(0.01).restart();\n      }\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(d) {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    }\n\n    function dragended(d) {\n      if (!d3.event.active && simulationActive) {\n        simulation.alphaTarget(0);\n      }\n      d.fx = null;\n      d.fy = null;\n    }\n\n    RegisterMathJax(this.SVGParent);\n\n    return this;\n\n  }\n\n  unrender() {}\n  \n  _filterNewElements(canvasObjects, d3Element) {\n    let newElements = [];\n    canvasObjects.forEach(o => {\n      let link = d3Element.find(d => d.id === o.id);\n      if (link) {\n        newElements.push(link);\n      } else {\n        newElements.push(o);\n      }\n    });\n    return newElements;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/graph-generic.js","import Renderer from './renderer';\nimport BarChart from './chart-bar';\nimport LineChart from './chart-line';\nimport ScatterChart from './chart-scatter';\nimport { requires } from '../util/data-decorator';\n\nexport default class ChartFactory extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @requires('canvas.chart')\n  render() {\n    \n    let element = undefined;\n    switch (this.data.canvas.chart.type) {\n    case 'bar':\n      element = new BarChart(this.options).load(this.data).render();\n      break;\n    case 'line':\n      element = new LineChart(this.options).load(this.data).render();\n      break;\n    case 'scatter':\n      element = new ScatterChart(this.options).load(this.data).render();\n      break;\n    }\n\n    return element;\n  }\n\n  unrender() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/chart-factory.js","import Chart from './chart';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class BarChart extends Chart {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n    \n    this.xScale = d3.scaleBand().range([0, this.width]).padding(0.1).domain(this.axis.x.domain);\n\n    if (!this.axis.x.domain.length) {\n      this.axis.x.domain = Chart.domainRange(this.allValues.length / this.datasetNames.length);\n      this.xScale.domain(this.axis.x.domain);\n    }\n\n    let barsGroup = this.element.selectAll('g.francy-bars');\n\n    if (!barsGroup.node()) {\n      barsGroup = this.element.append('g').attr('class', 'francy-bars');\n    }\n\n    var self = this;\n    \n    this.datasetNames.forEach(function(key, index) {\n      let bar = barsGroup.selectAll(`.francy-bar-${index}`).data(self.datasets[key]);\n\n      bar.exit().transition().duration(750)\n        .style('fill-opacity', 1e-6)\n        .remove();\n\n      // append the rectangles for the bar chart\n      let barEnter = bar.enter()\n        .append('rect')\n        .style('fill', () => Chart.colors(index * 5))\n        .attr('class', `francy-bar-${index}`)\n        .attr('x', function(d, i) {\n          return self.xScale(self.axis.x.domain[i]) + index * (self.xScale.bandwidth() / self.datasetNames.length);\n        })\n        .attr('width', (self.xScale.bandwidth() / self.datasetNames.length) - 1)\n        .attr('y', function(d) {\n          return self.yScale(d);\n        })\n        .attr('height', function(d) {\n          return self.height - self.yScale(d);\n        })\n        .on('mouseenter', function(d) {\n          d3.select(this).transition()\n            .duration(250).style('fill-opacity', 0.5);\n          self.tooltip.load(Chart.tooltip(key, d), true).render();\n        })\n        .on('mouseleave', function() {\n          d3.select(this).transition()\n            .duration(250).style('fill-opacity', 1);\n          self.tooltip.unrender();\n        });\n\n      barEnter.merge(bar)\n        .attr('x', function(d, i) {\n          return self.xScale(self.axis.x.domain[i]) + index * (self.xScale.bandwidth() / self.datasetNames.length); \n        })\n        .attr('width', (self.xScale.bandwidth() / self.datasetNames.length) - 1)\n        .attr('y', function(d) {\n          return self.yScale(d); \n        })\n        .attr('height', function(d) {\n          return self.height - self.yScale(d); \n        });\n    });\n\n    this._renderAxis();\n    this._renderLegend();\n\n    return this;\n  }\n\n  unrender() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/chart-bar.js","import Chart from './chart';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class LineChart extends Chart {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n    \n    let linesGroup = this.element.selectAll('g.francy-lines');\n\n    if (!linesGroup.node()) {\n      linesGroup = this.element.append('g').attr('class', 'francy-lines');\n    }\n\n    var self = this;\n    \n    this.datasetNames.forEach(function(key, index) {\n      let valueLine = d3.line()\n        .x(function(d, i) {\n          return self.xScale(i);\n        })\n        .y(function(d) {\n          return self.yScale(d);\n        });\n\n      let line = linesGroup.selectAll(`.francy-line-${index}`).data([self.datasets[key]]);\n\n      line.exit().transition().duration(750)\n        .style('fill-opacity', 1e-6)\n        .remove();\n\n      // append the rectangles for the bar chart\n      let lineEnter = line.enter()\n        .append('path')\n        .style('stroke', () => Chart.colors(index * 5))\n        .style('stroke-width', '5px')\n        .attr('class', `francy-line-${index}`)\n        .attr('d', valueLine)\n        .on('mouseenter', function(d) {\n          d3.select(this).transition()\n            .duration(250)\n            .style('stroke-opacity', 0.5)\n            .style('stroke-width', '10px');\n          self.tooltip.load(Chart.tooltip(key, d), true).render();\n        })\n        .on('mouseleave', function() {\n          d3.select(this).transition()\n            .duration(250)\n            .style('stroke-opacity', 1)\n            .style('stroke-width', '5px');\n          self.tooltip.unrender();\n        });\n\n      lineEnter.merge(line);\n    });\n\n    this._renderAxis();\n    this._renderLegend();\n\n    return this;\n  }\n\n  unrender() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/chart-line.js","import Chart from './chart';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class ScatterChart extends Chart {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n\n    let scatterGroup = this.element.selectAll('g.francy-scatters');\n\n    if (!scatterGroup.node()) {\n      scatterGroup = this.element.append('g').attr('class', 'francy-scatters');\n    }\n    \n    let self = this;\n\n    this.datasetNames.forEach(function(key, index) {\n      let scatter = scatterGroup.selectAll(`.francy-scatter-${index}`).data(self.datasets[key]);\n\n      scatter.exit().transition().duration(750)\n        .style('fill-opacity', 1e-6)\n        .remove();\n\n      // append the rectangles for the bar chart\n      let scatterEnter = scatter\n        .enter()\n        .append('circle')\n        .style('fill', () => Chart.colors(index * 5))\n        .attr('class', `francy-scatter-${index}`)\n        .attr('r', 5)\n        .attr('cx', function(d, i) {\n          return self.xScale(i);\n        })\n        .attr('cy', function(d) {\n          return self.yScale(d);\n        })\n        .on('mouseenter', function(d) {\n          d3.select(this).transition()\n            .duration(250)\n            .style('fill-opacity', 0.5)\n            .attr('r', 10);\n          self.tooltip.load(Chart.tooltip(key, d), true).render();\n        })\n        .on('mouseleave', function() {\n          d3.select(this).transition()\n            .duration(250)\n            .style('fill-opacity', 1)\n            .attr('r', 5);\n          self.tooltip.unrender();\n        });\n\n      scatterEnter.merge(scatter);\n    });\n\n    this._renderAxis();\n\n    this._renderLegend();\n\n    return this;\n  }\n\n  unrender() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/chart-scatter.js","import Menu from './menu';\nimport AboutModal from './modal-about';\nimport * as SvgToPng from '../../node_modules/save-svg-as-png/saveSvgAsPng';\n\n/* global d3 window */\n\nexport default class MainMenu extends Menu {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  render() {\n    let aboutModal = new AboutModal(this.options);\n\n    // Otherwise clashes with the canvas itself!\n    const menuId = `MainMenu-${this.data.canvas.id}`;\n    this.element = d3.select(`#${menuId}`);\n\n    // Check if the menu is already present\n    if (!this.element.node()) {\n      // create a div element detached from the DOM!\n      this.logger.debug(`Creating Main Menu [${menuId}]...`);\n      this.element = this.parent.append('div').attr('class', 'francy-main-menu-holder').attr('id', menuId);\n    }\n\n    // Force rebuild menu again\n    this.element.selectAll('*').remove();\n\n    this.element = this.element.append('ul').attr('class', 'francy-main-menu');\n\n    if (this.data.canvas.title) {\n      this.element.append('li').attr('class', 'francy-title').append('a').html(this.data.canvas.title);\n    }\n\n    let entry = this.element.append('li');\n    entry.append('a').html('Francy');\n    let content = entry.append('ul');\n    content.append('li').append('a').on('click', () => this.options.appendTo.canvas.zoomToFit()).attr('title', 'Zoom to Fit').html('Zoom to Fit');\n    content.append('li').append('a').on('click', () => SvgToPng.saveSvgAsPng(this.SVGParent.node(), 'diagram.png')).attr('title', 'Save to PNG').html('Save to PNG');\n    content.append('li').append('a').on('click', () => aboutModal.load(this.data).render()).attr('title', 'About').html('About');\n\n    // Traverse all menus and flatten them!\n    let menusIterator = this.iterator(Object.values(this.data.canvas.menus));\n    this.traverse(this.element, menusIterator);\n\n    this.logger.debug(`Main Menu updated [${menuId}]...`);\n\n    return this;\n  }\n\n  unrender() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/menu-main.js","import Modal from './modal';\nimport { RegisterJupyterKeyboardEvents, syntaxHighlight } from '../util/component';\nimport { initialize } from '../util/initialize-decorator';\n\n/* global d3 */\n\nexport default class AboutModal extends Modal {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @initialize()\n  render() {\n\n    let modalId = 'AboutModalWindow';\n\n    this.logger.debug(`Creating About Modal [${modalId}]...`);\n\n    this.element = this.holder.append('div')\n      .attr('id', modalId)\n      .attr('class', 'francy-modal');\n\n    let form = this.element.append('form');\n\n    let header = form.append('div').attr('class', 'francy-modal-header');\n\n    header.append('span').html(`About Francy v${this.data.version || 'N/A'}`);\n\n    let content = form.append('div').attr('class', 'francy-modal-content')\n      .append('div').attr('class', 'francy-table')\n      .append('div').attr('class', 'francy-table-body');\n\n    content.append('span').text('Loaded Object:');\n    content.append('pre').attr('class', 'francy').html(syntaxHighlight(JSON.stringify(this.data.canvas, null, 2)));\n    content.append('span').append('a').attr('href', 'https://github.com/mcmartins/francy').text('Francy on Github');\n\n    let footer = form.append('div').attr('class', 'francy-modal-footer');\n\n    footer.append('button').text('Ok').on('click', () => { \n      d3.event.preventDefault(); \n      this.unrender.call(this); \n    });\n\n    // disable keyboard shortcuts when using this modal in Jupyter\n    RegisterJupyterKeyboardEvents(['.francy', '.francy-arg', '.francy-overlay', '.francy-modal']);\n\n    this.logger.debug(`Callback About updated [${modalId}]...`);\n\n    return this;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/modal-about.js","(function() {\n  var out$ = typeof exports != 'undefined' && exports || typeof define != 'undefined' && {} || this;\n\n  var doctype = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\" [<!ENTITY nbsp \"&#160;\">]>';\n\n  function isElement(obj) {\n    return obj instanceof HTMLElement || obj instanceof SVGElement;\n  }\n\n  function requireDomNode(el) {\n    if (!isElement(el)) {\n      throw new Error('an HTMLElement or SVGElement is required; got ' + el);\n    }\n  }\n\n  function isExternal(url) {\n    return url && url.lastIndexOf('http',0) == 0 && url.lastIndexOf(window.location.host) == -1;\n  }\n\n  function inlineImages(el, callback) {\n    requireDomNode(el);\n\n    var images = el.querySelectorAll('image'),\n        left = images.length,\n        checkDone = function() {\n          if (left === 0) {\n            callback();\n          }\n        };\n\n    checkDone();\n    for (var i = 0; i < images.length; i++) {\n      (function(image) {\n        var href = image.getAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\");\n        if (href) {\n          if (isExternal(href.value)) {\n            console.warn(\"Cannot render embedded images linking to external hosts: \"+href.value);\n            return;\n          }\n        }\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        var img = new Image();\n        img.crossOrigin=\"anonymous\";\n        href = href || image.getAttribute('href');\n        if (href) {\n          img.src = href;\n          img.onload = function() {\n            canvas.width = img.width;\n            canvas.height = img.height;\n            ctx.drawImage(img, 0, 0);\n            image.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", canvas.toDataURL('image/png'));\n            left--;\n            checkDone();\n          }\n          img.onerror = function() {\n            console.log(\"Could not load \"+href);\n            left--;\n            checkDone();\n          }\n        } else {\n          left--;\n          checkDone();\n        }\n      })(images[i]);\n    }\n  }\n\n  function styles(el, options, cssLoadedCallback) {\n    var selectorRemap = options.selectorRemap;\n    var modifyStyle = options.modifyStyle;\n    var css = \"\";\n    // each font that has extranl link is saved into queue, and processed\n    // asynchronously\n    var fontsQueue = [];\n    var sheets = document.styleSheets;\n    for (var i = 0; i < sheets.length; i++) {\n      try {\n        var rules = sheets[i].cssRules;\n      } catch (e) {\n        console.warn(\"Stylesheet could not be loaded: \"+sheets[i].href);\n        continue;\n      }\n\n      if (rules != null) {\n        for (var j = 0, match; j < rules.length; j++, match = null) {\n          var rule = rules[j];\n          if (typeof(rule.style) != \"undefined\") {\n            var selectorText;\n\n            try {\n              selectorText = rule.selectorText;\n            } catch(err) {\n              console.warn('The following CSS rule has an invalid selector: \"' + rule + '\"', err);\n            }\n\n            try {\n              if (selectorText) {\n                match = el.querySelector(selectorText) || el.parentNode.querySelector(selectorText);\n              }\n            } catch(err) {\n              console.warn('Invalid CSS selector \"' + selectorText + '\"', err);\n            }\n\n            if (match) {\n              var selector = selectorRemap ? selectorRemap(rule.selectorText) : rule.selectorText;\n              var cssText = modifyStyle ? modifyStyle(rule.style.cssText) : rule.style.cssText;\n              css += selector + \" { \" + cssText + \" }\\n\";\n            } else if(rule.cssText.match(/^@font-face/)) {\n              // below we are trying to find matches to external link. E.g.\n              // @font-face {\n              //   // ...\n              //   src: local('Abel'), url(https://fonts.gstatic.com/s/abel/v6/UzN-iejR1VoXU2Oc-7LsbvesZW2xOQ-xsNqO47m55DA.woff2);\n              // }\n              //\n              // This regex will save extrnal link into first capture group\n              var fontUrlRegexp = /url\\([\"']?(.+?)[\"']?\\)/;\n              // TODO: This needs to be changed to support multiple url declarations per font.\n              var fontUrlMatch = rule.cssText.match(fontUrlRegexp);\n\n              var externalFontUrl = (fontUrlMatch && fontUrlMatch[1]) || '';\n              var fontUrlIsDataURI = externalFontUrl.match(/^data:/);\n              if (fontUrlIsDataURI) {\n                // We should ignore data uri - they are already embedded\n                externalFontUrl = '';\n              }\n\n              if (externalFontUrl) {\n                // okay, we are lucky. We can fetch this font later\n\n                //handle url if relative\n                if (externalFontUrl.startsWith('../')) {\n                  externalFontUrl = sheets[i].href + '/../' + externalFontUrl\n                } else if (externalFontUrl.startsWith('./')) {\n                  externalFontUrl = sheets[i].href + '/.' + externalFontUrl\n                }\n\n                fontsQueue.push({\n                  text: rule.cssText,\n                  // Pass url regex, so that once font is downladed, we can run `replace()` on it\n                  fontUrlRegexp: fontUrlRegexp,\n                  format: getFontMimeTypeFromUrl(externalFontUrl),\n                  url: externalFontUrl\n                });\n              } else {\n                // otherwise, use previous logic\n                css += rule.cssText + '\\n';\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // Now all css is processed, it's time to handle scheduled fonts\n    processFontQueue(fontsQueue);\n\n    function getFontMimeTypeFromUrl(fontUrl) {\n      var supportedFormats = {\n        'woff2': 'font/woff2',\n        'woff': 'font/woff',\n        'otf': 'application/x-font-opentype',\n        'ttf': 'application/x-font-ttf',\n        'eot': 'application/vnd.ms-fontobject',\n        'sfnt': 'application/font-sfnt',\n        'svg': 'image/svg+xml'\n      };\n      var extensions = Object.keys(supportedFormats);\n      for (var i = 0; i < extensions.length; ++i) {\n        var extension = extensions[i];\n        // TODO: This is not bullet proof, it needs to handle edge cases...\n        if (fontUrl.indexOf('.' + extension) > 0) {\n          return supportedFormats[extension];\n        }\n      }\n\n      // If you see this error message, you probably need to update code above.\n      console.error('Unknown font format for ' + fontUrl+ '; Fonts may not be working correctly');\n      return 'application/octet-stream';\n    }\n\n    function processFontQueue(queue) {\n      if (queue.length > 0) {\n        // load fonts one by one until we have anything in the queue:\n        var font = queue.pop();\n        processNext(font);\n      } else {\n        // no more fonts to load.\n        cssLoadedCallback(css);\n      }\n\n      function processNext(font) {\n        // TODO: This could benefit from caching.\n        var oReq = new XMLHttpRequest();\n        oReq.addEventListener('load', fontLoaded);\n        oReq.addEventListener('error', transferFailed);\n        oReq.addEventListener('abort', transferFailed);\n        oReq.open('GET', font.url);\n        oReq.responseType = 'arraybuffer';\n        oReq.send();\n\n        function fontLoaded() {\n          // TODO: it may be also worth to wait until fonts are fully loaded before\n          // attempting to rasterize them. (e.g. use https://developer.mozilla.org/en-US/docs/Web/API/FontFaceSet )\n          var fontBits = oReq.response;\n          var fontInBase64 = arrayBufferToBase64(fontBits);\n          updateFontStyle(font, fontInBase64);\n        }\n\n        function transferFailed(e) {\n          console.warn('Failed to load font from: ' + font.url);\n          console.warn(e)\n          css += font.text + '\\n';\n          processFontQueue();\n        }\n\n        function updateFontStyle(font, fontInBase64) {\n          var dataUrl = 'url(\"data:' + font.format + ';base64,' + fontInBase64 + '\")';\n          css += font.text.replace(font.fontUrlRegexp, dataUrl) + '\\n';\n\n          // schedule next font download on next tick.\n          setTimeout(function() {\n            processFontQueue(queue)\n          }, 0);\n        }\n\n      }\n    }\n\n    function arrayBufferToBase64(buffer) {\n      var binary = '';\n      var bytes = new Uint8Array(buffer);\n      var len = bytes.byteLength;\n\n      for (var i = 0; i < len; i++) {\n          binary += String.fromCharCode(bytes[i]);\n      }\n\n      return window.btoa(binary);\n    }\n  }\n\n  function getDimension(el, clone, dim) {\n    var v = (el.viewBox && el.viewBox.baseVal && el.viewBox.baseVal[dim]) ||\n      (clone.getAttribute(dim) !== null && !clone.getAttribute(dim).match(/%$/) && parseInt(clone.getAttribute(dim))) ||\n      el.getBoundingClientRect()[dim] ||\n      parseInt(clone.style[dim]) ||\n      parseInt(window.getComputedStyle(el).getPropertyValue(dim));\n    return (typeof v === 'undefined' || v === null || isNaN(parseFloat(v))) ? 0 : v;\n  }\n\n  function reEncode(data) {\n    data = encodeURIComponent(data);\n    data = data.replace(/%([0-9A-F]{2})/g, function(match, p1) {\n      var c = String.fromCharCode('0x'+p1);\n      return c === '%' ? '%25' : c;\n    });\n    return decodeURIComponent(data);\n  }\n\n  out$.prepareSvg = function(el, options, cb) {\n    requireDomNode(el);\n\n    options = options || {};\n    options.scale = options.scale || 1;\n    options.responsive = options.responsive || false;\n    var xmlns = \"http://www.w3.org/2000/xmlns/\";\n\n    inlineImages(el, function() {\n      var outer = document.createElement(\"div\");\n      var clone = el.cloneNode(true);\n      var width, height;\n      if(el.tagName == 'svg') {\n        width = options.width || getDimension(el, clone, 'width');\n        height = options.height || getDimension(el, clone, 'height');\n      } else if(el.getBBox) {\n        var box = el.getBBox();\n        width = box.x + box.width;\n        height = box.y + box.height;\n        clone.setAttribute('transform', clone.getAttribute('transform').replace(/translate\\(.*?\\)/, ''));\n\n        var svg = document.createElementNS('http://www.w3.org/2000/svg','svg')\n        svg.appendChild(clone)\n        clone = svg;\n      } else {\n        console.error('Attempted to render non-SVG element', el);\n        return;\n      }\n\n      clone.setAttribute(\"version\", \"1.1\");\n      if (!clone.getAttribute('xmlns')) {\n        clone.setAttributeNS(xmlns, \"xmlns\", \"http://www.w3.org/2000/svg\");\n      }\n      if (!clone.getAttribute('xmlns:xlink')) {\n        clone.setAttributeNS(xmlns, \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n      }\n\n      if (options.responsive) {\n        clone.removeAttribute('width');\n        clone.removeAttribute('height');\n        clone.setAttribute('preserveAspectRatio', 'xMinYMin meet');\n      } else {\n        clone.setAttribute(\"width\", width * options.scale);\n        clone.setAttribute(\"height\", height * options.scale);\n      }\n\n      clone.setAttribute(\"viewBox\", [\n        options.left || 0,\n        options.top || 0,\n        width,\n        height\n      ].join(\" \"));\n\n      var fos = clone.querySelectorAll('foreignObject > *');\n      for (var i = 0; i < fos.length; i++) {\n        if (!fos[i].getAttribute('xmlns')) {\n          fos[i].setAttributeNS(xmlns, \"xmlns\", \"http://www.w3.org/1999/xhtml\");\n        }\n      }\n\n      outer.appendChild(clone);\n\n      // In case of custom fonts we need to fetch font first, and then inline\n      // its url into data-uri format (encode as base64). That's why style\n      // processing is done asynchonously. Once all inlining is finshed\n      // cssLoadedCallback() is called.\n      styles(el, options, cssLoadedCallback);\n\n      function cssLoadedCallback(css) {\n        // here all fonts are inlined, so that we can render them properly.\n        var s = document.createElement('style');\n        s.setAttribute('type', 'text/css');\n        s.innerHTML = \"<![CDATA[\\n\" + css + \"\\n]]>\";\n        var defs = document.createElement('defs');\n        defs.appendChild(s);\n        clone.insertBefore(defs, clone.firstChild);\n\n        if (cb) {\n          var outHtml = outer.innerHTML;\n          outHtml = outHtml.replace(/NS\\d+:href/gi, 'xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href');\n          cb(outHtml, width, height);\n        }\n      }\n    });\n  }\n\n  out$.svgAsDataUri = function(el, options, cb) {\n    out$.prepareSvg(el, options, function(svg) {\n      var uri = 'data:image/svg+xml;base64,' + window.btoa(reEncode(doctype + svg));\n      if (cb) {\n        cb(uri);\n      }\n    });\n  }\n\n  out$.svgAsPngUri = function(el, options, cb) {\n    requireDomNode(el);\n\n    options = options || {};\n    options.encoderType = options.encoderType || 'image/png';\n    options.encoderOptions = options.encoderOptions || 0.8;\n\n    var convertToPng = function(src, w, h) {\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = w;\n      canvas.height = h;\n\n      if(options.canvg) {\n        options.canvg(canvas, src);\n      } else {\n        context.drawImage(src, 0, 0);\n      }\n\n      if(options.backgroundColor){\n        context.globalCompositeOperation = 'destination-over';\n        context.fillStyle = options.backgroundColor;\n        context.fillRect(0, 0, canvas.width, canvas.height);\n      }\n\n      var png;\n      try {\n        png = canvas.toDataURL(options.encoderType, options.encoderOptions);\n      } catch (e) {\n        if ((typeof SecurityError !== 'undefined' && e instanceof SecurityError) || e.name == \"SecurityError\") {\n          console.error(\"Rendered SVG images cannot be downloaded in this browser.\");\n          return;\n        } else {\n          throw e;\n        }\n      }\n      cb(png);\n    }\n\n    if(options.canvg) {\n      out$.prepareSvg(el, options, convertToPng);\n    } else {\n      out$.svgAsDataUri(el, options, function(uri) {\n        var image = new Image();\n\n        image.onload = function() {\n          convertToPng(image, image.width, image.height);\n        }\n\n        image.onerror = function() {\n          console.error(\n            'There was an error loading the data URI as an image on the following SVG\\n',\n            window.atob(uri.slice(26)), '\\n',\n            \"Open the following link to see browser's diagnosis\\n\",\n            uri);\n        }\n\n        image.src = uri;\n      });\n    }\n  }\n\n  out$.download = function(name, uri) {\n    if (navigator.msSaveOrOpenBlob) {\n      navigator.msSaveOrOpenBlob(uriToBlob(uri), name);\n    } else {\n      var saveLink = document.createElement('a');\n      var downloadSupported = 'download' in saveLink;\n      if (downloadSupported) {\n        saveLink.download = name;\n        saveLink.style.display = 'none';\n        document.body.appendChild(saveLink);\n        try {\n          var blob = uriToBlob(uri);\n          var url = URL.createObjectURL(blob);\n          saveLink.href = url;\n          saveLink.onclick = function() {\n            requestAnimationFrame(function() {\n              URL.revokeObjectURL(url);\n            })\n          };\n        } catch (e) {\n          console.warn('This browser does not support object URLs. Falling back to string URL.');\n          saveLink.href = uri;\n        }\n        saveLink.click();\n        document.body.removeChild(saveLink);\n      }\n      else {\n        window.open(uri, '_temp', 'menubar=no,toolbar=no,status=no');\n      }\n    }\n  }\n\n  function uriToBlob(uri) {\n    var byteString = window.atob(uri.split(',')[1]);\n    var mimeString = uri.split(',')[0].split(':')[1].split(';')[0]\n    var buffer = new ArrayBuffer(byteString.length);\n    var intArray = new Uint8Array(buffer);\n    for (var i = 0; i < byteString.length; i++) {\n      intArray[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([buffer], {type: mimeString});\n  }\n\n  out$.saveSvg = function(el, name, options) {\n    requireDomNode(el);\n\n    options = options || {};\n    out$.svgAsDataUri(el, options, function(uri) {\n      out$.download(name, uri);\n    });\n  }\n\n  out$.saveSvgAsPng = function(el, name, options) {\n    requireDomNode(el);\n\n    options = options || {};\n    out$.svgAsPngUri(el, options, function(uri) {\n      out$.download(name, uri);\n    });\n  }\n\n  // if define is defined create as an AMD module\n  if (typeof define !== 'undefined') {\n    define(function() {\n      return out$;\n    });\n  }\n\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/save-svg-as-png/saveSvgAsPng.js","import Renderer from './renderer';\nimport { RegisterMathJax } from '../util/component';\nimport { requires } from '../util/data-decorator';\n\n/* global d3 */\n\nexport default class Message extends Renderer {\n\n  constructor({ verbose = false, appendTo, callbackHandler }) {\n    super({ verbose: verbose, appendTo: appendTo, callbackHandler: callbackHandler });\n  }\n\n  @requires('canvas.messages')\n  render() {\n\n    let messages = Object.keys(this.data.canvas.messages).map((key) => {\n      return {\n        id: key,\n        type: this.data.canvas.messages[key].type,\n        title: this.data.canvas.messages[key].title,\n        text: this.data.canvas.messages[key].text\n      };\n    });\n\n    let alertsId = `Messages-${this.data.canvas.id}`;\n    this.element = d3.select(`#${alertsId}`);\n    // check if the div is already present\n    if (!this.element.node()) {\n      this.element = this.parent.append('div').attr('class', 'francy-message-holder').attr('id', alertsId);\n    }\n\n    let message = this.element.selectAll('div.francy-alert').data(messages, d => d.id);\n    let messageEnter = message.enter().append('div').attr('id', d => d.id)\n      .attr('class', d => `francy-alert alert-${d.type}`).on('click', function() {\n        d3.select(this).style('display', 'none');\n      });\n    messageEnter.append('span').attr('class', 'strong').text(d => d.title);\n    messageEnter.append('span').text(d => d.text);\n    messageEnter.append('span').attr('class', 'strong closeme').style('display', 'none').text('x');\n\n    messageEnter.merge(message);\n\n    message.exit().remove();\n\n    this.element.style('display', 'block');\n    \n    RegisterMathJax(this.element);\n\n    return this;\n  }\n\n  unrender() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/render/message.js"],"sourceRoot":""}