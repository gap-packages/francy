define(function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));if(new.target===t)throw new TypeError("Cannot construct [Renderer] instances directly!");if(void 0===i.render||"function"!=typeof i.render)throw new TypeError("Must override [render(json)] method!");return void 0===i.unrender&&i.logger.debug("No [unrender()] method specified..."),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"HTMLParent",get:function(){return d3.select(this.options.appendTo.node().parentNode)}},{key:"SVGParent",get:function(){return this.options.appendTo}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));return i.tooltip=i.SVGParent.select("foreignObject.francy-tooltip-holder"),i.tooltip.node()||(i.tooltip=i.SVGParent.append("foreignObject").attr("class","francy-tooltip-holder")),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(e){if(e&&Object.values(e).length&&(this.tooltip.attr("transform","translate("+(d3.event.offsetX+5)+","+(d3.event.offsetY+5)+")"),!this.tooltip.selectAll("*").node())){var t=this.tooltip.append("xhtml:div").attr("class","francy-tooltip").append("div").attr("class","francy-table").append("div").attr("class","francy-table-body");Object.keys(e).map(function(n){var r=t.append("div").attr("class","francy-table-row");r.append("div").attr("class","francy-table-cell").text(e[n].title),r.append("div").attr("class","francy-table-cell").text(e[n].text)}),this.tooltip.style("display","block")}}},{key:"unrender",value:function(){this.tooltip.selectAll("*").remove(),this.tooltip.style("display",null)}}]),t}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(17)),l=r(n(18)),c=r(n(19)),u=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){if(e.canvas.chart){var t=void 0;switch(e.canvas.chart.type){case"bar":t=new i.default(this.options).render(e);break;case"line":t=new l.default(this.options).render(e);break;case"scatter":t=new c.default(this.options).render(e)}return t}}},{key:"unrender",value:function(){}}],[{key:"domainRange",value:function(e){return Array.from(new Array(e),function(e,t){return t}).map(function(e){return e})}},{key:"colors",get:function(){return d3.scaleSequential().domain([0,100]).interpolator(d3.interpolateRainbow)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(10)),o=function(){function e(t){var n=t.verbose,r=void 0!==n&&n,o=t.appendTo,i=t.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={verbose:r,appendTo:o,callbackHandler:i},this.logger=new a.default(this.options)}return r(e,[{key:"update",value:function(e){var t=e.verbose,n=void 0!==t&&t,r=e.appendTo,a=e.callbackHandler;return this.options={verbose:n,appendTo:r,callbackHandler:a},this}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(5)),l=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"traverse",value:function(e,t){for(var n=this;t.hasNext();){var r=t.next(),a=e.append("li"),o=a.selectAll("a").data([r]).enter().append("a").attr("title",r.title).html(r.title);if(r.callback&&Object.values(r.callback).length&&o.on("click",function(e){return new i.default(n.options).execute(e)}),r.menus&&Object.values(r.menus).length>0){var l=a.append("ul"),c=this.iterator(Object.values(r.menus));this.traverse(l,c)}}}},{key:"iterator",value:function(e){var t=0;return{next:function(){return this.hasNext()?e[t++]:void 0},hasNext:function(){return t<e.length}}}},{key:"unrender",value:function(){}}]),t}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(3)),i=r(n(13)),l=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"execute",value:function(e){return Object.keys(e.callback.requiredArgs).length?new i.default(this.options).render(e):this.options.callbackHandler(e.callback)}}]),t}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(7)),i=r(n(8)),l=r(n(12)),c=r(n(15)),u=r(n(2)),s={},f=function(){function e(t){var n=t.verbose,r=void 0!==n&&n,a=t.appendTo,o=t.callbackHandler;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!o)throw new Error("A Callback Handler must be provided! This will be used to trigger events from the graphics produced...");if(!a)throw new Error("Missing an element or id to append the graphics to...!");if(!d3)throw new Error("D3 is not imported! Francy won't work without it... please import D3 v4+.");this.options={verbose:r,appendTo:a,callbackHandler:o}}return a(e,[{key:"render",value:function(e){var t=o.default.parse(e);if(t){var n=new i.default(this.options),r=new l.default(this.options),a=new c.default(this.options),f=new u.default(this.options);n.add(r),n.add(a),n.add(f);var d=n.render(t);return s[t.canvas.id]=d,d.node()}}},{key:"unrender",value:function(e){delete s[e]}}]),e}();t.default=f;try{t.Francy=window.Francy=f,window.onresize=function(){Object.values(s).forEach(function(e){e.zoomToFit()}),d3.selectAll("foreignObject.francy-main-menu-holder").attr("width","100%")}}catch(e){t.Francy=f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"parse",value:function(e){e=(e="string"!=typeof e?JSON.stringify(e):e).replace(/[\n\r\b\\]+|(gap>)/g,"");var t=/{(?:[^])*}/g.exec(e);if(t){e=t[0];try{var n=JSON.parse(e);return"application/vnd.francy+json"===n.mime?n:void 0}catch(e){console.error(e)}}}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(9)),i=r(n(11)),l=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){function t(){l.attr("transform",d3.event.transform)}var n=d3.select(this.options.appendTo),r=e.canvas.id,a=d3.select("svg#"+r);if(a.node()||(this.logger.debug("Creating Canvas ["+r+"]..."),a=n.append("svg").attr("id",r).attr("class","francy francy-canvas")),!a.node())throw new Error("Oops, could not create canvas with id ["+r+"]... Cannot proceed.");a.attr("width",e.canvas.width).attr("height",e.canvas.height);var o=d3.zoom(),l=a.select("g.francy-content");l.node()||(l=a.append("g").attr("class","francy-content"),o.on("zoom",t),a.call(o).on("dblclick.zoom",null)),a.on("click",function(){d3.event.defaultPrevented&&d3.event.stopPropagation()},!0),a.zoomToFit=function(){if(e.canvas.zoomToFit){var t=l.node().getBBox(),n=a.node().clientWidth,r=a.node().clientHeight+45,i=t.width,c=t.height;if(0==i||0==c)return;var u=t.x+i/2,s=t.y+c/2,f=.75/Math.max(i/n,c/r),d=n/2-f*u,p=r/2-f*s;l.transition().duration(2e3).attr("transform","translate("+d+","+p+")scale("+f+","+f+")").on("end",function(){return function(e,t,n){a.call(o.transform,d3.zoomIdentity.translate(e,t).scale(n,n))}(d,p,f)})}},this.logger.debug("Canvas updated ["+r+"]..."),this.options.appendTo=a;return new i.default(this.options).render(e.canvas.messages),this.renderChildren(a,e),a}},{key:"unrender",value:function(){}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));if(new.target===t)throw new TypeError("Cannot construct [Composite] instances directly!");return i.renderers=[],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"add",value:function(e){this.renderers.push(e)}},{key:"renderChildren",value:function(e,t){var n=this.options;e&&(n.appendTo=e);var r=!0,a=!1,o=void 0;try{for(var i,l=this.renderers[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){i.value.update(n).render(t)}}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=null,o=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).verbose,n=void 0!==t&&t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a)return a;this.verbose=n,this.console=console,a=this}return r(e,[{key:"debug",value:function(e){this.verbose&&this.console.debug(this._format("DEBUG",e))}},{key:"info",value:function(e){this.console.info(this._format("INFO",e))}},{key:"error",value:function(e,t){this.console.error(this._format("ERROR",e),t)}},{key:"warn",value:function(e,t){t=t||{},this.console.error(this._format("WARN",e),t)}},{key:"_format",value:function(e,t){return"["+e+"] - "+(new Date).toISOString()+" - "+t}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));return i.alerts=i.SVGParent.select("foreignObject.francy-alerts-holder"),i.alerts.node()?i.alerts=i.alerts.select("div.francy-alerts"):i.alerts=i.SVGParent.append("foreignObject").attr("class","francy-alerts-holder").attr("transform","translate(10,55)").append("xhtml:div").attr("class","francy-alerts"),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(e){if(e&&Object.values(e).length){var t=this;Object.keys(e).map(function(n){if(!t.alerts.select("div#"+n).node()){var r=t.alerts.append("div").attr("id",n).attr("class","francy-alert alert-"+e[n].type).on("click",function(){d3.select(this).style("display","none")});r.append("span").attr("class","strong").text(e[n].title),r.append("span").text(e[n].text),r.append("span").attr("class","strong").style("display","none").text("x")}}),this.alerts.style("display","block")}}},{key:"unrender",value:function(){}}]),t}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(4)),i=r(n(14)),l=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){var t=this,n=this.options.appendTo,r=new i.default(this.options),a="M"+e.canvas.id,o=d3.select("#"+a);o.node()||(this.logger.debug("Creating Main Menu ["+a+"]..."),o=n.append("foreignObject").attr("transform","translate(0,0)").attr("class","francy-main-menu-holder").attr("id",a)),o.selectAll("*").remove(),o=o.append("xhtml:ul").attr("class","francy-main-menu"),e.canvas.title&&o.append("li").attr("class","francy-title").append("a").html(e.canvas.title);var l=o.append("li");l.append("a").html("Francy");var c=l.append("ul");e.canvas.zoomToFit&&c.append("li").append("a").on("click",function(){return n.zoomToFit()}).attr("title","Zoom to Fit").html("Zoom to Fit"),c.append("li").append("a").on("click",function(){return t.logger.info("Save to PNG pressed... Not Implemented!")}).attr("title","Save to PNG").html("Save to PNG"),c.append("li").append("a").on("click",function(){return r.render(e)}).attr("title","About").html("About");var u=this.iterator(Object.values(e.canvas.menus));return this.traverse(o,u),this.logger.debug("Main Menu updated ["+a+"]..."),o}},{key:"unrender",value:function(){}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(e){var t=this,n=e.callback.id;this.logger.debug("Creating Callback Modal ["+n+"]...");var r=d3.select("body").append("div").attr("class","francy-overlay"),a=d3.select("body").append("div").attr("class","francy"),o=a.append("div").attr("id",n).attr("class","francy-modal"),i=o.append("form"),l=i.append("div").attr("class","francy-modal-header").append("span").html("Required arguments&nbsp;");e.title&&l.append("span").attr("style","font-weight: bold;").text("for "+e.title);var c=i.append("div").attr("class","francy-modal-content").append("div").attr("class","francy-table").append("div").attr("class","francy-table-body"),u=!0,s=!1,f=void 0;try{for(var d,p=Object.values(e.callback.requiredArgs)[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var y=d.value,b=c.append("div").attr("class","francy-table-row");b.append("div").attr("class","francy-table-cell").append("label").attr("for",y.id).text(y.title);var h=b.append("div").attr("class","francy-table-cell").append("input").attr("id",y.id).attr("class","francy-arg").attr("required","").attr("name",y.id).attr("type",y.type).attr("value",y.value).on("change",function(){e.callback.requiredArgs[this.id].value=this.value}).on("input",this.onchange).on("keyup",this.onchange).on("paste",this.onchange);"boolean"===y.type&&(y.value=y.value||!1,h.attr("type","checkbox").attr("required",null).attr("value",y.value).on("change",function(){e.callback.requiredArgs[this.id].value=this.value=this.checked})),b.append("span").attr("class","validity")}}catch(e){s=!0,f=e}finally{try{!u&&p.return&&p.return()}finally{if(s)throw f}}var v=i.append("div").attr("class","francy-modal-footer");v.append("button").text("Ok").on("click",function(){return i.node().checkValidity()&&(t.options.callbackHandler(e.callback),r.remove(),o.remove(),a.remove(),event.preventDefault()),!1}),v.append("button").text("Cancel").on("click",function(){return event.preventDefault(),r.remove(),o.remove(),a.remove(),!1});try{Jupyter.keyboard_manager.register_events(".francy"),Jupyter.keyboard_manager.register_events(".francy-arg"),Jupyter.keyboard_manager.register_events(".francy-overlay"),Jupyter.keyboard_manager.register_events(".francy-modal")}catch(e){"ReferenceError"==e.name&&t.logger.debug("It seems we're not running on Jupyter...",e)}return c.selectAll(".francy-arg").node().focus(),this.logger.debug("Callback Modal updated ["+n+"]..."),o}},{key:"unrender",value:function(){}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(e){var t="AboutModalWindow";this.logger.debug("Creating About Modal ["+t+"]...");var n=d3.select("body").append("div").attr("class","francy-overlay"),r=d3.select("body").append("div").attr("class","francy"),a=r.append("div").attr("id",t).attr("class","francy-modal"),o=a.append("form");o.append("div").attr("class","francy-modal-header").append("span").html("About Francy v"+e.version);var i=o.append("div").attr("class","francy-modal-content").append("div").attr("class","francy-table").append("div").attr("class","francy-table-body");i.append("span").text("Loaded Object:"),i.append("pre").attr("class","francy").html(this.syntaxHighlight(JSON.stringify(e.canvas,null,2))),i.append("span").append("a").attr("href","https://github.com/mcmartins/francy").text("Francy on Github");o.append("div").attr("class","francy-modal-footer").append("button").text("Ok").on("click",function(){return a.remove(),r.remove(),n.remove(),event.preventDefault(),!1});try{Jupyter.keyboard_manager.register_events(".francy"),Jupyter.keyboard_manager.register_events(".francy-arg"),Jupyter.keyboard_manager.register_events(".francy-overlay"),Jupyter.keyboard_manager.register_events(".francy-modal")}catch(e){"ReferenceError"==e.name&&self.logger.debug("It seems we're not running on Jupyter...",e)}return this.logger.debug("Callback About updated ["+t+"]..."),a}},{key:"unrender",value:function(){}},{key:"syntaxHighlight",value:function(e){return(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})}}]),t}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(16)),l=r(n(1)),c=r(n(5)),u=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,null,[{key:"getSymbol",value:function(e){return"circle"===e?d3.symbolCircle:"cross"===e?d3.symbolCross:"diamond"===e?d3.symbolDiamond:"square"===e?d3.symbolSquare:"triangle"===e?d3.symbolTriangle:"star"===e?d3.symbolStar:"wye"===e?d3.symbolWye:d3.symbolCircle}},{key:"colors",get:function(){return d3.scaleSequential().domain([0,100]).interpolator(d3.interpolateRainbow)}}]),a(t,[{key:"render",value:function(e){function n(){x.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),O.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),P.attr("x",function(e){return e.x-e.title.length-Math.sqrt(e.size*e.title.length*2)}).attr("y",function(e){return e.y-Math.sqrt(2*e.size)}),O.each(function(e){var t=d3.quadtree(h);return function(n){var r=100*n.size+R,a=n.x-r,o=n.x+r,i=n.y-r,l=n.y+r;t.visit(function(t,c,u,s,f){if(t.point&&t.point!==n){var d=n.x-t.point.x,p=n.y-t.point.y,y=Math.sqrt(d*d+p*p);y<r&&(y=(y-r)/y*e,n.x-=d*=y,n.y-=p*=y,t.point.x+=d,t.point.y+=p)}return c>o||s<a||u>l||f<i})}}(1))}function r(){function e(e,t){return F[e.index+","+t.index]}if(d3.event.preventDefault(),0===z){var t=d3.select(this).node().__data__;O.style("opacity",function(n){return e(t,n)||e(n,t)?1:.1}),x.style("opacity",function(e){return t.index===e.source.index||t.index===e.target.index?1:.1}),z=1}else O.style("opacity",1),x.style("opacity",1),z=0}function a(e){d3.event.active||S.alphaTarget(.01).restart(),e.fx=e.x,e.fy=e.y}function o(e){e.fx=d3.event.x,e.fy=d3.event.y}function u(e){d3.event.active||S.alphaTarget(0),e.fx=null,e.fy=null}function s(e,t){e.callbacks&&Object.values(e.callbacks).forEach(function(e){e.trigger===t&&y.execute({callback:e})})}if(e.canvas.graph){var f=!1,d=new l.default(this.options),p=new i.default(this.options),y=new c.default(this.options),b=this.options.appendTo,h=e.canvas.graph.nodes?Object.values(e.canvas.graph.nodes):[],v=e.canvas.graph.links?Object.values(e.canvas.graph.links):[],g=b.select("g.francy-content"),m=+b.attr("width")||d3.select("body").node().getBoundingClientRect().width,_=+b.attr("height")||d3.select("body").node().getBoundingClientRect().height,w=g.selectAll("g.francy-links");w.node()||(w=g.append("g").attr("class","francy-links"));var x=w.selectAll("line.francy-link").data(v);(x.enter().data().length>0||x.enter().data().length>0)&&(f=!0),x.exit().remove(),x=x.enter().append("line").attr("class","francy-link").attr("id",function(e){return e.source+","+e.target}).attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}).merge(x),"directed"===e.canvas.graph.type&&(b.append("defs").selectAll("marker").data(["arrow"]).enter().append("marker").attr("class","francy-arrows").attr("id",function(e){return e}).attr("viewBox","0 -5 10 10").attr("refX",25).attr("refY",0).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5 L10,0 L0, -5"),x.style("marker-end","url(#arrow)"));var k=g.selectAll("g.francy-nodes");k.node()||(k=g.append("g").attr("class","francy-nodes"));var O=k.selectAll("path.francy-node").data(h);(O.enter().data().length>0||O.enter().data().length>0)&&(f=!0),O.exit().remove(),O=O.enter().append("path").merge(O).attr("d",d3.symbol().type(function(e){return t.getSymbol(e.type)}).size(function(e){return 100*e.size})).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).style("fill",function(e){return t.colors(5*e.layer)}).attr("class",function(e){return"francy-node"+(e.highlight?" francy-highlight":"")+(Object.values(e.menus).length?" francy-context":"")}).attr("id",function(e){return e.id}),e.canvas.graph.drag&&O.call(d3.drag().on("start",a).on("drag",o).on("end",u)),O.on("contextmenu",function(e){p.render(e),s.call(this,e,"contextmenu")}).on("click",function(e){r.call(this),s.call(this,e,"click")}).on("dblclick",function(e){s.call(this,e,"dblclick")}).on("mouseover",function(e){d.render(e.messages)}).on("mouseout",function(){d.unrender()});var j=g.selectAll(".francy-labels");j.node()||(j=g.append("g").attr("class","francy-labels"));var P=j.selectAll("text").data(h);if(P.exit().remove(),(P=P.enter().append("text").merge(P).attr("class","francy-label").text(function(e){return e.title}).attr("x",function(e){return e.x-e.title.length-Math.sqrt(e.size*e.title.length*2)}).attr("y",function(e){return e.y-Math.sqrt(2*e.size)})).on("contextmenu",function(e){p.render(e),s.call(this,e,"contextmenu")}).on("click",function(e){r.call(this),s.call(this,e,"click")}).on("dblclick",function(e){s.call(this,e,"dblclick")}).on("mouseover",function(e){d.render(e.messages)}).on("mouseout",function(){d.unrender()}),e.canvas.graph.simulation&&f){var T=d3.forceCenter().x(m/2).y(_/2),E=d3.forceManyBody().strength(30*-h.length),M=d3.forceLink(v).id(function(e){return e.id}).distance(50),A=d3.forceCollide(function(e){return 2*e.size}),C=d3.forceX(m/2).strength(.05),H=d3.forceY(_/2).strength(.25);"hasse"===e.canvas.graph.type&&(C=d3.forceX(m/2).strength(.5),H=d3.forceY(function(e){return 50*e.layer}).strength(5));var S=d3.forceSimulation(h).force("charge",E).force("link",M).force("center",T).force("x",C).force("y",H).force("collide",A).on("tick",n).on("end",function(){b.zoomToFit()});S.restart()}else b.zoomToFit();for(var R=10,z=0,F={},N=0;N<h.length;N++)F[N+","+N]=1;return v.forEach(function(e){F[e.source.index+","+e.target.index]=1}),g}this.logger.debug("No Graph to render here... continuing...")}},{key:"unrender",value:function(){}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(4)),o=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));return i.contextMenu=i.SVGParent.select("foreignObject.francy-context-menu-holder"),i.contextMenu.node()||(i.contextMenu=i.SVGParent.append("foreignObject").attr("class","francy-context-menu-holder")),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(e){var t=this;if(d3.event.preventDefault(),e.menus&&Object.values(e.menus).length){if(this.contextMenu.transition().duration(1e3).attr("transform","translate("+(d3.event.offsetX+5)+","+(d3.event.offsetY+5)+")"),this.contextMenu.style("display","block"),!this.contextMenu.selectAll("*").node()){d3.select("body").on("click.francy-context-menu",function(){return t.unrender()});var n=this.contextMenu.append("xhtml:div").append("div").attr("class","francy-context-menu").append("ul"),r=this.iterator(Object.values(e.menus));return this.traverse(n,r),this.contextMenu}}else this.logger.debug("No ContextMenu to render here... continuing...")}},{key:"unrender",value:function(){this.contextMenu.selectAll("*").remove(),this.contextMenu.style("display",null)}}]),t}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(1)),l=r(n(2)),c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){if(e.canvas.chart){var t=new i.default(this.options),n=this.options.appendTo,r=e.canvas.chart.axis,a=e.canvas.chart.data,o=Object.keys(a),c=n.select("g.francy-content"),u=50,s=50,f=50,d=50,p=+n.attr("width")||d3.select("body").node().getBoundingClientRect().width,y=+n.attr("height")||d3.select("body").node().getBoundingClientRect().height;p=p-d-s,y=y-u-f;var b=d3.scaleBand().range([0,p]).padding(.1).domain(r.x.domain),h=d3.scaleLinear().range([y,0]).domain(r.y.domain),v=[];o.forEach(function(e){return v=v.concat(a[e])}),r.y.domain.length||h.domain([0,d3.max(v,function(e){return e})]),r.x.domain.length||(r.x.domain=l.default.domainRange(v.length/o.length),b.domain(r.x.domain));var g=c.selectAll("g.francy-bars");g.node()||(g=c.append("g").attr("class","francy-bars")),o.forEach(function(e,n){var i=g.selectAll(".francy-bar"+n).data(a[e]);i.exit().remove(),i.enter().append("rect").style("fill",function(){return l.default.colors(5*n)}).attr("class","francy-bar"+n).attr("x",function(e,t){return b(r.x.domain[t])+n*(b.bandwidth()/o.length)}).attr("width",b.bandwidth()/o.length-1).attr("y",function(e){return h(e)}).attr("height",function(e){return y-h(e)}).on("mouseover",function(n){d3.select(this).transition().duration(250).style("fill-opacity",.5),t.render({Dataset:e,Value:n})}).on("mouseout",function(){d3.select(this).transition().duration(250).style("fill-opacity",1),t.unrender()}),i.merge(i)});var m=c.selectAll("g.francy-x-axis");m.node()||(m=c.append("g").attr("class","francy-x-axis")),m.selectAll("*").remove(),m.attr("transform","translate(0,"+y+")").call(d3.axisBottom(b)).append("text").attr("dy",50).attr("dx",p/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.x.title);var _=c.selectAll("g.francy-y-axis");_.node()||(_=c.append("g").attr("class","francy-y-axis")),_.selectAll("*").remove(),_.call(d3.axisLeft(h)).append("text").attr("dx",-50).attr("dy",y/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.y.title);var w=c.selectAll(".francy-legend");w.node()||(w=c.append("g").attr("class","francy-legend")),w.selectAll("*").remove();var x=w.selectAll("g").data(o.slice());return x.exit().remove(),(x=x.enter().append("g").attr("transform",function(e,t){return"translate(0,"+20*t+")"}).merge(x)).append("rect").attr("x",p+20).attr("width",19).attr("height",19).style("fill",function(e,t){return l.default.colors(5*t)}),x.append("text").attr("x",p+80).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(e){return e}),n.zoomToFit(),c}this.logger.debug("No BarChart to render here... continuing...")}},{key:"unrender",value:function(){}}]),t}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(1)),l=r(n(2)),c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){if(e.canvas.chart){var t=new i.default(this.options),n=this.options.appendTo,r=e.canvas.chart.axis,a=e.canvas.chart.data,o=Object.keys(a),c=n.select("g.francy-content"),u=50,s=50,f=50,d=50,p=+n.attr("width")||d3.select("body").node().getBoundingClientRect().width,y=+n.attr("height")||d3.select("body").node().getBoundingClientRect().height;p=p-d-s,y=y-u-f;var b=d3.scaleLinear().range([0,p]).domain(r.x.domain),h=d3.scaleLinear().range([y,0]).domain(r.y.domain),v=[];o.forEach(function(e){return v=v.concat(a[e])}),r.y.domain.length||h.domain([0,d3.max(v,function(e){return e})]),r.x.domain.length||b.domain([0,v.length/o.length]);var g=c.selectAll("g.francy-lines");g.node()||(g=c.append("g").attr("class","francy-lines")),o.forEach(function(e,n){var r=d3.line().x(function(e,t){return b(t)}).y(function(e){return h(e)}),o=g.selectAll(".line"+n).data([a[e]]);o.exit().remove(),o.enter().append("path").style("stroke",function(){return l.default.colors(5*n)}).style("stroke-width","5px").attr("class","francy-line"+n).attr("d",r).on("mouseover",function(n){d3.select(this).transition().duration(250).style("stroke-opacity",.5).style("stroke-width","10px"),t.render({Dataset:e,Value:n})}).on("mouseout",function(){d3.select(this).transition().duration(250).style("stroke-opacity",1).style("stroke-width","5px"),t.unrender()}),o.merge(o)});var m=c.selectAll("g.francy-x-axis");m.node()||(m=c.append("g").attr("class","francy-x-axis")),m.selectAll("*").remove(),m.attr("transform","translate(0,"+y+")").call(d3.axisBottom(b)).append("text").attr("dy",50).attr("dx",p/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.x.title);var _=c.selectAll("g.francy-y-axis");_.node()||(_=c.append("g").attr("class","francy-y-axis")),_.selectAll("*").remove(),_.call(d3.axisLeft(h)).append("text").attr("dx",-50).attr("dy",y/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.y.title);var w=c.selectAll(".francy-legend");w.node()||(w=c.append("g").attr("class","francy-legend")),w.selectAll("*").remove();var x=w.selectAll("g").data(o.slice());return x.exit().remove(),(x=x.enter().append("g").attr("transform",function(e,t){return"translate(0,"+20*t+")"}).merge(x)).append("rect").attr("x",p+20).attr("width",19).attr("height",19).style("fill",function(e,t){return l.default.colors(5*t)}),x.append("text").attr("x",p+80).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(e){return e}),n.zoomToFit(),c}this.logger.debug("No LineChart to render here... continuing...")}},{key:"unrender",value:function(){}}]),t}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),i=r(n(1)),l=r(n(2)),c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"render",value:function(e){if(e.canvas.chart){var t=new i.default(this.options),n=this.options.appendTo,r=e.canvas.chart.axis,a=e.canvas.chart.data,o=Object.keys(a),c=n.select("g.francy-content"),u=50,s=50,f=50,d=50,p=+n.attr("width")||d3.select("body").node().getBoundingClientRect().width,y=+n.attr("height")||d3.select("body").node().getBoundingClientRect().height;p=p-d-s,y=y-u-f;var b=d3.scaleLinear().range([0,p]).domain(r.x.domain),h=d3.scaleLinear().range([y,0]).domain(r.y.domain),v=[];o.forEach(function(e){return v=v.concat(a[e])}),r.y.domain.length||h.domain([0,d3.max(v,function(e){return e})]),r.x.domain.length||b.domain([0,v.length/o.length]);var g=c.selectAll("g.francy-scatters");g.node()||(g=c.append("g").attr("class","francy-scatters")),o.forEach(function(e,n){var r=g.selectAll(".scatter"+n).data(a[e]);r.exit().remove(),r.enter().append("circle").style("fill",function(){return l.default.colors(5*n)}).attr("class","francy-scatter"+n).attr("r",5).attr("cx",function(e,t){return b(t)}).attr("cy",function(e){return h(e)}).on("mouseover",function(n){d3.select(this).transition().duration(250).style("fill-opacity",.5).attr("r",10),t.render({Dataset:e,Value:n})}).on("mouseout",function(){d3.select(this).transition().duration(250).style("fill-opacity",1).attr("r",5),t.unrender()}),r.merge(r)});var m=c.selectAll("g.francy-x-axis");m.node()||(m=c.append("g").attr("class","francy-x-axis")),m.selectAll("*").remove(),m.attr("transform","translate(0,"+y+")").call(d3.axisBottom(b)).append("text").attr("dy",50).attr("dx",p/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.x.title);var _=c.selectAll("g.francy-y-axis");_.node()||(_=c.append("g").attr("class","francy-y-axis")),_.selectAll("*").remove(),_.call(d3.axisLeft(h)).append("text").attr("dx",-50).attr("dy",y/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(r.y.title);var w=c.selectAll(".francy-legend");w.node()||(w=c.append("g").attr("class","francy-legend")),w.selectAll("*").remove();var x=w.selectAll("g").data(o.slice());return x.exit().remove(),(x=x.enter().append("g").attr("transform",function(e,t){return"translate(0,"+20*t+")"}).merge(x)).append("rect").attr("x",p+20).attr("width",19).attr("height",19).style("fill",function(e,t){return l.default.colors(5*t)}),x.append("text").attr("x",p+80).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(e){return e}),n.zoomToFit(),c}this.logger.debug("No ScatterChart to render here... continuing...")}},{key:"unrender",value:function(){}}]),t}();t.default=c}])});