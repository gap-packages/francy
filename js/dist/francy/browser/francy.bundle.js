!function e(t,n,r){function a(i,l){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!l&&c)return c(i,!0);if(o)return o(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return a(n||e)},u,u.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t,n){!function(){var e=void 0!==n&&n||"undefined"!=typeof define&&{}||this;function t(e){if(!((t=e)instanceof HTMLElement||t instanceof SVGElement))throw new Error("an HTMLElement or SVGElement is required; got "+e);var t}function r(e,t,n){for(var r=t.selectorRemap,a=t.modifyStyle,o="",i=[],l=document.styleSheets,c=0;c<l.length;c++){try{var s=l[c].cssRules}catch(e){console.warn("Stylesheet could not be loaded: "+l[c].href);continue}if(null!=s)for(var u,d=0;d<s.length;d++,u=null){var f=s[d];if(void 0!==f.style){var p;try{p=f.selectorText}catch(e){console.warn('The following CSS rule has an invalid selector: "'+f+'"',e)}try{p&&(u=e.querySelector(p)||e.parentNode.querySelector(p))}catch(e){console.warn('Invalid CSS selector "'+p+'"',e)}if(u){var h=r?r(f.selectorText):f.selectorText,y=a?a(f.style.cssText):f.style.cssText;o+=h+" { "+y+" }\n"}else if(f.cssText.match(/^@font-face/)){var v=/url\(["']?(.+?)["']?\)/,b=f.cssText.match(v),g=b&&b[1]||"";g.match(/^data:/)&&(g=""),g?(g.startsWith("../")?g=l[c].href+"/../"+g:g.startsWith("./")&&(g=l[c].href+"/."+g),i.push({text:f.cssText,fontUrlRegexp:v,format:m(g),url:g})):o+=f.cssText+"\n"}}}}function m(e){for(var t={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},n=Object.keys(t),r=0;r<n.length;++r){var a=n[r];if(e.indexOf("."+a)>0)return t[a]}return console.error("Unknown font format for "+e+"; Fonts may not be working correctly"),"application/octet-stream"}function w(e){e.length>0?function(t){var n=new XMLHttpRequest;function r(e){console.warn("Failed to load font from: "+t.url),console.warn(e),o+=t.text+"\n",w()}function a(t,n){var r='url("data:'+t.format+";base64,"+n+'")';o+=t.text.replace(t.fontUrlRegexp,r)+"\n",setTimeout(function(){w(e)},0)}n.addEventListener("load",function(){var e=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,a=0;a<r;a++)t+=String.fromCharCode(n[a]);return window.btoa(t)}(n.response);a(t,e)}),n.addEventListener("error",r),n.addEventListener("abort",r),n.open("GET",t.url),n.responseType="arraybuffer",n.send()}(e.pop()):n(o)}!function(e){if(e.length>0){var t=e.pop();!function(t){var n=new XMLHttpRequest;function r(e){console.warn("Failed to load font from: "+t.url),console.warn(e),o+=t.text+"\n",w()}function a(t,n){var r='url("data:'+t.format+";base64,"+n+'")';o+=t.text.replace(t.fontUrlRegexp,r)+"\n",setTimeout(function(){w(e)},0)}n.addEventListener("load",function(){var e=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,a=0;a<r;a++)t+=String.fromCharCode(n[a]);return window.btoa(t)}(n.response);a(t,e)}),n.addEventListener("error",r),n.addEventListener("abort",r),n.open("GET",t.url),n.responseType="arraybuffer",n.send()}(t)}else n(o)}(i)}function a(e,t,n){var r=e.viewBox&&e.viewBox.baseVal&&e.viewBox.baseVal[n]||null!==t.getAttribute(n)&&!t.getAttribute(n).match(/%$/)&&parseInt(t.getAttribute(n))||e.getBoundingClientRect()[n]||parseInt(t.style[n])||parseInt(window.getComputedStyle(e).getPropertyValue(n));return void 0===r||null===r||isNaN(parseFloat(r))?0:r}function o(e){for(var t=window.atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),a=new Uint8Array(r),o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return new Blob([r],{type:n})}e.prepareSvg=function(e,n,o){t(e),(n=n||{}).scale=n.scale||1,n.responsive=n.responsive||!1;var i="http://www.w3.org/2000/xmlns/";!function(e,n){t(e);var r=e.querySelectorAll("image"),a=r.length,o=function(){0===a&&n()};o();for(var i=0;i<r.length;i++)!function(e){var t=e.getAttributeNS("http://www.w3.org/1999/xlink","href");if(t&&(n=t.value)&&0==n.lastIndexOf("http",0)&&-1==n.lastIndexOf(window.location.host))console.warn("Cannot render embedded images linking to external hosts: "+t.value);else{var n,r=document.createElement("canvas"),i=r.getContext("2d"),l=new Image;l.crossOrigin="anonymous",(t=t||e.getAttribute("href"))?(l.src=t,l.onload=function(){r.width=l.width,r.height=l.height,i.drawImage(l,0,0),e.setAttributeNS("http://www.w3.org/1999/xlink","href",r.toDataURL("image/png")),a--,o()},l.onerror=function(){console.log("Could not load "+t),a--,o()}):(a--,o())}}(r[i])}(e,function(){var t,l,c=document.createElement("div"),s=e.cloneNode(!0);if("svg"==e.tagName)t=n.width||a(e,s,"width"),l=n.height||a(e,s,"height");else{if(!e.getBBox)return void console.error("Attempted to render non-SVG element",e);var u=e.getBBox();t=u.x+u.width,l=u.y+u.height,s.setAttribute("transform",s.getAttribute("transform").replace(/translate\(.*?\)/,""));var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.appendChild(s),s=d}s.setAttribute("version","1.1"),s.getAttribute("xmlns")||s.setAttributeNS(i,"xmlns","http://www.w3.org/2000/svg"),s.getAttribute("xmlns:xlink")||s.setAttributeNS(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),n.responsive?(s.removeAttribute("width"),s.removeAttribute("height"),s.setAttribute("preserveAspectRatio","xMinYMin meet")):(s.setAttribute("width",t*n.scale),s.setAttribute("height",l*n.scale)),s.setAttribute("viewBox",[n.left||0,n.top||0,t,l].join(" "));for(var f=s.querySelectorAll("foreignObject > *"),p=0;p<f.length;p++)f[p].getAttribute("xmlns")||f[p].setAttributeNS(i,"xmlns","http://www.w3.org/1999/xhtml");c.appendChild(s),r(e,n,function(e){var n=document.createElement("style");n.setAttribute("type","text/css"),n.innerHTML="<![CDATA[\n"+e+"\n]]>";var r=document.createElement("defs");if(r.appendChild(n),s.insertBefore(r,s.firstChild),o){var a=c.innerHTML;a=a.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href'),o(a,t,l)}})})},e.svgAsDataUri=function(t,n,r){e.prepareSvg(t,n,function(e){var t,n="data:image/svg+xml;base64,"+window.btoa((t='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>'+e,t=(t=encodeURIComponent(t)).replace(/%([0-9A-F]{2})/g,function(e,t){var n=String.fromCharCode("0x"+t);return"%"===n?"%25":n}),decodeURIComponent(t)));r&&r(n)})},e.svgAsPngUri=function(n,r,a){t(n),(r=r||{}).encoderType=r.encoderType||"image/png",r.encoderOptions=r.encoderOptions||.8;var o=function(e,t,n){var o,i=document.createElement("canvas"),l=i.getContext("2d");i.width=t,i.height=n,r.canvg?r.canvg(i,e):l.drawImage(e,0,0),r.backgroundColor&&(l.globalCompositeOperation="destination-over",l.fillStyle=r.backgroundColor,l.fillRect(0,0,i.width,i.height));try{o=i.toDataURL(r.encoderType,r.encoderOptions)}catch(e){if("undefined"!=typeof SecurityError&&e instanceof SecurityError||"SecurityError"==e.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw e}a(o)};r.canvg?e.prepareSvg(n,r,o):e.svgAsDataUri(n,r,function(e){var t=new Image;t.onload=function(){o(t,t.width,t.height)},t.onerror=function(){console.error("There was an error loading the data URI as an image on the following SVG\n",window.atob(e.slice(26)),"\n","Open the following link to see browser's diagnosis\n",e)},t.src=e})},e.download=function(e,t){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(o(t),e);else{var n=document.createElement("a");if("download"in n){n.download=e,n.style.display="none",document.body.appendChild(n);try{var r=o(t),a=URL.createObjectURL(r);n.href=a,n.onclick=function(){requestAnimationFrame(function(){URL.revokeObjectURL(a)})}}catch(e){console.warn("This browser does not support object URLs. Falling back to string URL."),n.href=t}n.click(),document.body.removeChild(n)}else window.open(t,"_temp","menubar=no,toolbar=no,status=no")}},e.saveSvg=function(n,r,a){t(n),a=a||{},e.svgAsDataUri(n,a,function(t){e.download(r,t)})},e.saveSvgAsPng=function(n,r,a){t(n),a=a||{},e.svgAsPngUri(n,a,function(t){e.download(r,t)})},"undefined"!=typeof define&&define(function(){return e})}()},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.requires=function(e){return function(t,n,r){var a=r.value;return r.value=function(){var t;if((t=function(e,t){var n=e;if(n&&t){var r=t.split("."),a=!0,o=!1,i=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=l.value;if(!n.hasOwnProperty(s)){n=void 0;break}n=n[s]}}catch(e){o=!0,i=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw i}}}return n}(this.data,e))&&(t instanceof Array&&t.length||t instanceof Object&&Object.values(t).length))return a.apply(this,arguments);this.logger.debug("No data here ["+e+"], nothing to render... continuing...")},r}}},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(e("./render/frame")),o=i(e("./render/renderer"));function i(e){return e&&e.__esModule?e:{default:e}}var l={},c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));if(!d3)throw new Error("D3 is not imported! Francy won't work without it... please import D3 v4+.");return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"render",value:function(){var e=new a.default(this.options).load(this.data).render();return l[this.data.canvas.id]=e,e.element.node()}},{key:"unrender",value:function(e){delete l[e]}}]),t}();n.default=c;try{n.Francy=window.Francy=c;var s=window.onresize;window.onresize=function(){Object.values(l).forEach(function(e){e.canvas.zoomToFit()}),"function"==typeof s&&s()}}catch(e){n.Francy=c}},{"./render/frame":12,"./render/renderer":22}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(e("../util/logger")),o=i(e("../util/json-utils"));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){var n=t.verbose,r=void 0!==n&&n,o=t.appendTo,i=t.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings({verbose:r,appendTo:o,callbackHandler:i}),this.log=new a.default(this.options)}return r(e,[{key:"settings",value:function(e){var t=e.verbose,n=e.appendTo,r=e.callbackHandler;if(!r)throw new Error("A Callback Handler must be provided! This will be used to trigger events from the graphics produced...");if(!n)throw new Error("Missing an element or id to append the graphics to...!");return this.options={},this.options.verbose=t||this.options.verbose,this.options.appendTo=n||this.options.verbose,this.options.callbackHandler=r||this.options.callbackHandler,this}},{key:"load",value:function(e,t){var n=o.default.parse(e,t);return n&&(this.data=n),this}},{key:"logger",get:function(){return this.log}}]),e}();n.default=l},{"../util/json-utils":25,"../util/logger":26}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(e("./base")),l=c(e("./modal-required"));function c(e){return e&&e.__esModule?e:{default:e}}var s,u,d,f,p,h,y=(r=(0,e("../decorator/data").requires)("callback"),a=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));return i.callback=o,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"execute",value:function(){var e=this;if(Object.keys(this.data.callback.requiredArgs).length){var t=this.options;return t.callbackHandler=function(t){return e._execute.call(e,t)},new l.default(t).load(this.data,!0).render()}this._execute(this.data.callback)}},{key:"_execute",value:function(e){this.callback("Trigger("+JSON.stringify(JSON.stringify(e))+");")}}]),t}(),s=a.prototype,u="execute",d=[r],f=Object.getOwnPropertyDescriptor(a.prototype,"execute"),p=a.prototype,h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=d.slice().reverse().reduce(function(e,t){return t(s,u,e)||e},h),p&&void 0!==h.initializer&&(h.value=h.initializer?h.initializer.call(p):void 0,h.initializer=void 0),void 0===h.initializer&&(Object.defineProperty(s,u,h),h=null),a);n.default=y},{"../decorator/data":2,"./base":4,"./modal-required":21}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(e("./composite")),l=s(e("./graph")),c=s(e("./chart"));function s(e){return e&&e.__esModule?e:{default:e}}var u,d,f,p,h,y,v=(r=(0,e("../decorator/data").requires)("canvas"),a=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));return i.graph=new l.default(i.options),i.chart=new c.default(i.options),i.add(i.graph).add(i.chart),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"render",value:function(){var e=this.options.appendTo.element,t=this;function n(){if(t.data.canvas.zoomToFit){var e=o.node().getBBox(),n=t.element.node().getBoundingClientRect(),r=n.right-n.left,i=n.bottom-n.top,l=e.width,c=e.height;if(0==l||0==c)return;var s=e.x+l/2,u=e.y+c/2,d=.9/Math.max(l/r,c/i),f=r/2-d*s,p=i/2-d*u;o.transition().duration(t.transitionDuration).attr("transform","translate("+f+","+p+")scale("+d+","+d+")").on("end",function(){return e=f,n=p,r=d,void t.element.call(a.transform,d3.zoomIdentity.translate(e,n).scale(r,r));var e,n,r})}}var r="Canvas-"+this.data.canvas.id;if(this.element=d3.select("svg#"+r),this.element.node()||(this.logger.debug("Creating Canvas ["+r+"]..."),this.element=e.append("svg").attr("class","francy-canvas").attr("id",r)),!this.element.node())throw new Error("Oops, could not create canvas with id ["+r+"]... Cannot proceed.");this.element.attr("width",this.data.canvas.width).attr("height",this.data.canvas.height);var a=d3.zoom(),o=this.element.select("g.francy-content");return o.node()||(o=this.element.append("g").attr("class","francy-content"),a.on("zoom",function(){o.attr("transform",d3.event.transform)}),this.element.call(a).on("dblclick.zoom",null)),this.element.on("click",function(){d3.event.defaultPrevented&&d3.event.stopPropagation()},!0),this.element.zoomToFit=this.zoomToFit=n,this.logger.debug("Canvas updated ["+r+"]..."),this.renderChildren(),setTimeout(function(){n()},this.transitionDuration),this}},{key:"unrender",value:function(){}}]),t}(),u=a.prototype,d="render",f=[r],p=Object.getOwnPropertyDescriptor(a.prototype,"render"),h=a.prototype,y={},Object.keys(p).forEach(function(e){y[e]=p[e]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=f.slice().reverse().reduce(function(e,t){return t(u,d,e)||e},y),h&&void 0!==y.initializer&&(y.value=y.initializer?y.initializer.call(h):void 0,y.initializer=void 0),void 0===y.initializer&&(Object.defineProperty(u,d,y),y=null),a);n.default=v},{"../decorator/data":2,"./chart":10,"./composite":11,"./graph":15}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(e("./renderer")),o=l(e("./tooltip")),i=l(e("./chart"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(){var e=this.options.appendTo.element,t=new o.default(this.options),n=this.data.canvas.chart.axis,r=this.data.canvas.chart.data,a=Object.keys(r);this.element=e.select("g.francy-content");var l=50,c=50,s=50,u=50,d=+e.attr("width")||d3.select("body").node().getBoundingClientRect().width,f=+e.attr("height")||d3.select("body").node().getBoundingClientRect().height;d=d-u-c,f=f-l-s;var p=d3.scaleBand().range([0,d]).padding(.1).domain(n.x.domain),h=d3.scaleLinear().range([f,0]).domain(n.y.domain),y=[];a.forEach(function(e){return y=y.concat(r[e])}),n.y.domain.length||h.domain([0,d3.max(y,function(e){return e})]),n.x.domain.length||(n.x.domain=i.default.domainRange(y.length/a.length),p.domain(n.x.domain));var v=this.element.selectAll("g.francy-bars");v.node()||(v=this.element.append("g").attr("class","francy-bars")),a.forEach(function(e,o){var l=v.selectAll(".francy-bar-"+o).data(r[e]);l.exit().transition().duration(750).style("fill-opacity",1e-6).remove(),l.enter().append("rect").style("fill",function(){return i.default.colors(5*o)}).attr("class","francy-bar-"+o).attr("x",function(e,t){return p(n.x.domain[t])+o*(p.bandwidth()/a.length)}).attr("width",p.bandwidth()/a.length-1).attr("y",function(e){return h(e)}).attr("height",function(e){return f-h(e)}).on("mouseenter",function(n){d3.select(this).transition().duration(250).style("fill-opacity",.5),t.load(i.default.tooltip(e,n),!0).render()}).on("mouseleave",function(){d3.select(this).transition().duration(250).style("fill-opacity",1),t.unrender()}).merge(l).attr("x",function(e,t){return p(n.x.domain[t])+o*(p.bandwidth()/a.length)}).attr("width",p.bandwidth()/a.length-1).attr("y",function(e){return h(e)}).attr("height",function(e){return f-h(e)})});var b=this.element.selectAll("g.francy-x-axis");b.node()||(b=this.element.append("g").attr("class","francy-x-axis")),b.selectAll("*").remove(),b.attr("transform","translate(0,"+f+")").call(d3.axisBottom(p)).append("text").attr("dy",50).attr("dx",d/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(n.x.title);var g=this.element.selectAll("g.francy-y-axis");if(g.node()||(g=this.element.append("g").attr("class","francy-y-axis")),g.selectAll("*").remove(),g.call(d3.axisLeft(h)).append("text").attr("dx",-50).attr("dy",f/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(n.y.title),this.data.canvas.chart.showLegend){var m=this.element.selectAll(".francy-legend");m.node()||(m=this.element.append("g").attr("class","francy-legend")),m.selectAll("*").remove();var w=m.selectAll("g").data(a.slice());w.exit().remove(),(w=w.enter().append("g").attr("transform",function(e,t){return"translate(0,"+20*t+")"}).merge(w)).append("rect").attr("x",d+20).attr("width",19).attr("height",19).style("fill",function(e,t){return i.default.colors(5*t)}),w.append("text").attr("x",d+80).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(e){return e})}return this}},{key:"unrender",value:function(){}}]),t}();n.default=c},{"./chart":10,"./renderer":22,"./tooltip":23}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(e("./renderer")),o=l(e("./tooltip")),i=l(e("./chart"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(){var e=new o.default(this.options),t=this.options.appendTo.element,n=this.data.canvas.chart.axis,r=this.data.canvas.chart.data,a=Object.keys(r);this.element=t.select("g.francy-content");var l=50,c=50,s=50,u=50,d=+t.attr("width")||d3.select("body").node().getBoundingClientRect().width,f=+t.attr("height")||d3.select("body").node().getBoundingClientRect().height;d=d-u-c,f=f-l-s;var p=d3.scaleLinear().range([0,d]).domain(n.x.domain),h=d3.scaleLinear().range([f,0]).domain(n.y.domain),y=[];a.forEach(function(e){return y=y.concat(r[e])}),n.y.domain.length||h.domain([0,d3.max(y,function(e){return e})]),n.x.domain.length||p.domain([0,y.length/a.length]);var v=this.element.selectAll("g.francy-lines");v.node()||(v=this.element.append("g").attr("class","francy-lines")),a.forEach(function(t,n){var a=d3.line().x(function(e,t){return p(t)}).y(function(e){return h(e)}),o=v.selectAll(".francy-line-"+n).data([r[t]]);o.exit().transition().duration(750).style("fill-opacity",1e-6).remove(),o.enter().append("path").style("stroke",function(){return i.default.colors(5*n)}).style("stroke-width","5px").attr("class","francy-line-"+n).attr("d",a).on("mouseenter",function(n){d3.select(this).transition().duration(250).style("stroke-opacity",.5).style("stroke-width","10px"),e.load(i.default.tooltip(t,n),!0).render()}).on("mouseleave",function(){d3.select(this).transition().duration(250).style("stroke-opacity",1).style("stroke-width","5px"),e.unrender()}).merge(o)});var b=this.element.selectAll("g.francy-x-axis");b.node()||(b=this.element.append("g").attr("class","francy-x-axis")),b.selectAll("*").remove(),b.attr("transform","translate(0,"+f+")").call(d3.axisBottom(p)).append("text").attr("dy",50).attr("dx",d/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(n.x.title);var g=this.element.selectAll("g.francy-y-axis");if(g.node()||(g=this.element.append("g").attr("class","francy-y-axis")),g.selectAll("*").remove(),g.call(d3.axisLeft(h)).append("text").attr("dx",-50).attr("dy",f/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(n.y.title),this.data.canvas.chart.showLegend){var m=this.element.selectAll(".francy-legend");m.node()||(m=this.element.append("g").attr("class","francy-legend")),m.selectAll("*").remove();var w=m.selectAll("g").data(a.slice());w.exit().remove(),(w=w.enter().append("g").attr("transform",function(e,t){return"translate(0,"+20*t+")"}).merge(w)).append("rect").attr("x",d+20).attr("width",19).attr("height",19).style("fill",function(e,t){return i.default.colors(5*t)}),w.append("text").attr("x",d+80).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(e){return e})}return this}},{key:"unrender",value:function(){}}]),t}();n.default=c},{"./chart":10,"./renderer":22,"./tooltip":23}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(e("./renderer")),o=l(e("./tooltip")),i=l(e("./chart"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(){var e=new o.default(this.options),t=this.options.appendTo.element,n=this.data.canvas.chart.axis,r=this.data.canvas.chart.data,a=Object.keys(r);this.element=t.select("g.francy-content");var l=50,c=50,s=50,u=50,d=+t.attr("width")||d3.select("body").node().getBoundingClientRect().width,f=+t.attr("height")||d3.select("body").node().getBoundingClientRect().height;d=d-u-c,f=f-l-s;var p=d3.scaleLinear().range([0,d]).domain(n.x.domain),h=d3.scaleLinear().range([f,0]).domain(n.y.domain),y=[];a.forEach(function(e){return y=y.concat(r[e])}),n.y.domain.length||h.domain([0,d3.max(y,function(e){return e})]),n.x.domain.length||p.domain([0,y.length/a.length]);var v=this.element.selectAll("g.francy-scatters");v.node()||(v=this.element.append("g").attr("class","francy-scatters")),a.forEach(function(t,n){var a=v.selectAll(".francy-scatter-"+n).data(r[t]);a.exit().transition().duration(750).style("fill-opacity",1e-6).remove(),a.enter().append("circle").style("fill",function(){return i.default.colors(5*n)}).attr("class","francy-scatter-"+n).attr("r",5).attr("cx",function(e,t){return p(t)}).attr("cy",function(e){return h(e)}).on("mouseenter",function(n){d3.select(this).transition().duration(250).style("fill-opacity",.5).attr("r",10),e.load(i.default.tooltip(t,n),!0).render()}).on("mouseleave",function(){d3.select(this).transition().duration(250).style("fill-opacity",1).attr("r",5),e.unrender()}).merge(a)});var b=this.element.selectAll("g.francy-x-axis");b.node()||(b=this.element.append("g").attr("class","francy-x-axis")),b.selectAll("*").remove(),b.attr("transform","translate(0,"+f+")").call(d3.axisBottom(p)).append("text").attr("dy",50).attr("dx",d/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(n.x.title);var g=this.element.selectAll("g.francy-y-axis");if(g.node()||(g=this.element.append("g").attr("class","francy-y-axis")),g.selectAll("*").remove(),g.call(d3.axisLeft(h)).append("text").attr("dx",-50).attr("dy",f/2).attr("fill","black").attr("class","francy-axis").style("text-anchor","end").text(n.y.title),this.data.canvas.chart.showLegend){var m=this.element.selectAll(".francy-legend");m.node()||(m=this.element.append("g").attr("class","francy-legend")),m.selectAll("*").remove();var w=m.selectAll("g").data(a.slice());w.exit().remove(),(w=w.enter().append("g").attr("transform",function(e,t){return"translate(0,"+20*t+")"}).merge(w)).append("rect").attr("x",d+20).attr("width",19).attr("height",19).style("fill",function(e,t){return i.default.colors(5*t)}),w.append("text").attr("x",d+80).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(e){return e})}return this}},{key:"unrender",value:function(){}}]),t}();n.default=c},{"./chart":10,"./renderer":22,"./tooltip":23}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(e("./renderer")),l=u(e("./chart-bar")),c=u(e("./chart-line")),s=u(e("./chart-scatter"));function u(e){return e&&e.__esModule?e:{default:e}}var d,f,p,h,y,v,b=(r=(0,e("../decorator/data").requires)("canvas.chart"),a=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"render",value:function(){switch(this.data.canvas.chart.type){case"bar":this.element=new l.default(this.options).load(this.data).render();break;case"line":this.element=new c.default(this.options).load(this.data).render();break;case"scatter":this.element=new s.default(this.options).load(this.data).render()}return this}},{key:"unrender",value:function(){}}],[{key:"tooltip",value:function(e,t){return{A:{title:"Dataset",text:e},B:{title:"Value",text:t}}}},{key:"domainRange",value:function(e){return Array.from(new Array(e),function(e,t){return t}).map(function(e){return e})}},{key:"colors",get:function(){return d3.scaleSequential().domain([0,100]).interpolator(d3.interpolateRainbow)}}]),t}(),d=a.prototype,f="render",p=[r],h=Object.getOwnPropertyDescriptor(a.prototype,"render"),y=a.prototype,v={},Object.keys(h).forEach(function(e){v[e]=h[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=p.slice().reverse().reduce(function(e,t){return t(d,f,e)||e},v),y&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(y):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,f,v),v=null),a);n.default=b},{"../decorator/data":2,"./chart-bar":7,"./chart-line":8,"./chart-scatter":9,"./renderer":22}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./renderer"),i=(r=o)&&r.__esModule?r:{default:r};var l=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));if(new.target===t)throw new TypeError("Cannot construct [Composite] instances directly!");return i.renderers=[],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),a(t,[{key:"add",value:function(e){return this.renderers.push(e),this}},{key:"renderChildren",value:function(){var e=this.options;e.appendTo=this;var t=!0,n=!1,r=void 0;try{for(var a,o=this.renderers[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){a.value.settings(e).load(this.data).render()}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}]),t}();n.default=l},{"./renderer":22}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(e("./composite")),l=u(e("./canvas")),c=u(e("./menu-main")),s=u(e("./message"));function u(e){return e&&e.__esModule?e:{default:e}}var d,f,p,h,y,v,b=(r=(0,e("../decorator/data").requires)("canvas"),a=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));return i.canvas=new l.default(i.options),i.menu=new c.default(i.options),i.messages=new s.default(i.options),i.add(i.messages).add(i.menu).add(i.canvas),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"render",value:function(){var e=d3.select(this.options.appendTo),t="Frame-"+this.data.canvas.id;if(this.element=d3.select("div#"+t),this.element.node()||(this.logger.debug("Creating Frame ["+t+"]..."),this.element=e.append("div").attr("class","francy").attr("id",t)),!this.element.node())throw new Error("Oops, could not create frame with id ["+t+"]... Cannot proceed.");return this.logger.debug("Frame updated ["+t+"]..."),this.renderChildren(),this}},{key:"unrender",value:function(){}}]),t}(),d=a.prototype,f="render",p=[r],h=Object.getOwnPropertyDescriptor(a.prototype,"render"),y=a.prototype,v={},Object.keys(h).forEach(function(e){v[e]=h[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=p.slice().reverse().reduce(function(e,t){return t(d,f,e)||e},v),y&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(y):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,f,v),v=null),a);n.default=b},{"../decorator/data":2,"./canvas":6,"./composite":11,"./menu-main":17,"./message":19}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(e("./renderer")),o=l(e("./graph")),i=e("../util/component");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(){var e=this.options.appendTo.element,t=this.data.canvas.graph.simulation,n=this.data.canvas.graph.nodes?Object.values(this.data.canvas.graph.nodes):[],r=this.data.canvas.graph.links?Object.values(this.data.canvas.graph.links):[];this.element=e.select("g.francy-content");var a=+e.attr("width")||d3.select("body").node().getBoundingClientRect().width,l=+e.attr("height")||d3.select("body").node().getBoundingClientRect().height,c=this.element.selectAll("g.francy-links");c.node()||(c=this.element.append("g").attr("class","francy-links"));var s=c.selectAll("g.francy-link").data(),u=[];r.forEach(function(e){var t=s.find(function(t){return t.id===e.id});t?u.push(t):u.push(e)});var d=c.selectAll("g.francy-link").data(u,function(e){return e.id}),f=this.element.selectAll("g.francy-nodes");f.node()||(f=this.element.append("g").attr("class","francy-nodes"));var p=f.selectAll("g.francy-node").data(),h=[];n.forEach(function(e){var t=p.find(function(t){return t.id===e.id});t?h.push(t):h.push(e)});var y=f.selectAll("g.francy-node").data(h,function(e){return e.id});if(0!=y.exit().data().length||0!=y.enter().data().length||0!=d.enter().data().length||0!=d.exit().data().length){d.enter().append("g").attr("class","francy-link").append("line").attr("class","francy-edge"),d.exit().remove(),d=c.selectAll("g.francy-link line.francy-edge"),"directed"===this.data.canvas.graph.type&&(e.append("defs").selectAll("marker").data(["arrow"]).enter().append("marker").attr("class","francy-arrows").attr("id",function(e){return e}).attr("viewBox","0 -5 10 10").attr("refX",25).attr("refY",0).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5 L10,0 L0, -5"),d.style("marker-end","url(#arrow)"));var v=y.enter().append("g").attr("class","francy-node").attr("id",function(e){return e.id});if(v.append("path").attr("d",d3.symbol().type(function(e){return o.default.getSymbol(e.type)}).size(function(e){return 100*e.size})).style("fill",function(e){return o.default.colors(5*e.layer)}).attr("class",function(e){return"francy-symbol"+(e.highlight?" francy-highlight":"")+(Object.values(e.menus).length?" francy-context":"")}),v.append("text").attr("class","francy-label").attr("x",function(e){return-2.5*e.title.length}).text(function(e){return e.title}),y.exit().remove(),y=f.selectAll("g.francy-node"),this.data.canvas.graph.drag&&y.call(d3.drag().on("start",function(e){!d3.event.active&&t&&k.alphaTarget(.01).restart();e.fx=e.x,e.fy=e.y}).on("drag",function(e){e.fx=d3.event.x,e.fy=d3.event.y}).on("end",function(e){!d3.event.active&&t&&k.alphaTarget(0);e.fx=null,e.fy=null})),y&&!y.empty()&&(o.default.applyEvents(y,this.options),this.data.canvas.graph.showNeighbours)){var b=y.on("click");y.on("click",function(e){(function(){function e(e,t){return T[e.index+","+t.index]}if(d3.event.preventDefault(),0===j){var t=d3.select(this).node().__data__;y.style("opacity",function(n){return e(t,n)||e(n,t)?1:.1}),d.style("opacity",function(e){return t.index===e.source.index||t.index===e.target.index?1:.1}),j=1}else y.style("opacity",1),d.style("opacity",1),j=0}).call(this),b.call(this,e)})}if(t){var g=d3.forceCenter().x(a/2).y(l/2),m=d3.forceManyBody().strength(50*-n.length),w=d3.forceLink(r).id(function(e){return e.id}).distance(50),x=d3.forceCollide(function(e){return 2*e.size}),_=d3.forceX(a/2).strength(.05),O=d3.forceY(l/2).strength(.25);"hasse"===this.data.canvas.graph.type&&(_=d3.forceX(a/2).strength(.3),O=d3.forceY(function(e){return 75*e.layer}).strength(.7));var k=d3.forceSimulation().nodes(h).force("charge",m).force("link",w).force("center",g).force("x",_).force("y",O).force("collide",x).on("tick",E).on("end",function(){e.zoomToFit()});k.alpha(.5).restart()}else E(),e.zoomToFit();for(var j=0,T={},P=0;P<n.length;P++)T[P+","+P]=1;return r.forEach(function(e){T[e.source.index+","+e.target.index]=1}),(0,i.RegisterMathJax)(this.SVGParent),this}function E(){d.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),y.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})}}},{key:"unrender",value:function(){}}]),t}();n.default=c},{"../util/component":24,"./graph":15,"./renderer":22}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(e("./renderer")),o=l(e("./graph")),i=e("../util/component");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(){var e=this.options.appendTo.element;this.element=e.select("g.francy-content");var t,n=+e.attr("width")||d3.select("body").node().getBoundingClientRect().width,r=+e.attr("height")||d3.select("body").node().getBoundingClientRect().height,a=0;(t=d3.hierarchy(this.treeData,function(e){return e.children})).x0=r/2,t.y0=0;var l=[1];!function e(t,n){n.children&&n.children.length>0&&(l.length<=t+1&&l.push(0),l[t+1]+=n.children.length,n.children.forEach(function(n){e(t+1,n)}))}(0,t);var c=100*d3.max(l),s=d3.tree().size([c,n]);return this.data.canvas.graph.collapsed&&t.children.forEach(function e(t){t.children&&(t._children=t.children,t._children.forEach(e),t.children=null)}),function n(r){var l=this;var c=s(t);var u=c.descendants(),d=c.descendants().slice(1);u.forEach(function(e){return e.y=180*e.depth});var f=this.element.selectAll("g.francy-links");f.node()||(f=this.element.append("g").attr("class","francy-links"));var p=f.selectAll("path.francy-edge").data(d,function(e){return e.id||(e.id=++a)});var h=p.enter().append("path").attr("class","francy-edge").attr("d",function(){var e={x:r.x0,y:r.y0};return y(e,e)});h.merge(p).transition().duration(this.transitionDuration).attr("d",function(e){return y(e,e.parent)});p.exit().transition().duration(this.transitionDuration).attr("d",function(){var e={x:r.x,y:r.y};return y(e,e)}).remove();f.selectAll("path.francy-edge").style("fill","none").style("stroke","#ccc").style("stroke-width","1px");u.forEach(function(e){e.x0=e.x,e.y0=e.y});function y(e,t){return"M "+e.y+" "+e.x+"\n            C "+(e.y+t.y)/2+" "+e.x+",\n              "+(e.y+t.y)/2+" "+t.x+",\n              "+t.y+" "+t.x}var v=this.element.selectAll("g.francy-nodes");v.node()||(v=this.element.append("g").attr("class","francy-nodes"));var b=v.selectAll("g.francy-node").data(u,function(e){return e.id||(e.id=++a)});var g=b.enter().append("g").attr("class","francy-node").attr("transform",function(){return"translate("+r.y0+","+r.x0+")"});g.append("path").attr("d",d3.symbol().type(function(e){return o.default.getSymbol(e.data.type)}).size(function(e){return 100*e.data.size})).attr("class","francy-symbol");g.append("text").attr("class","francy-label").attr("x",function(e){return-2.5*e.data.title.length}).style("cursor",function(e){return e.children||e._children?"pointer":"default"}).text(function(e){return e.data.title});var m=g.merge(b);m.transition().duration(this.transitionDuration).attr("transform",function(e){return"translate("+e.y+","+e.x+")"});b.exit().transition().duration(this.transitionDuration).attr("transform",function(){return"translate("+r.y+","+r.x+")"}).remove();v.selectAll("path.francy-symbol").style("fill",function(e){return e.children||e._children?"lightsteelblue":o.default.colors(5*e.data.layer)}).style("cursor",function(e){return e.children||e._children?"pointer":"default"});b=v.selectAll("g.francy-node");o.default.applyEvents(b,this.options);var w=b.on("click");b.on("click",function(e){w.call(l,e.data),_.call(l,e)});var x=this;function _(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null),n.call(x,e)}(0,i.RegisterMathJax)(this.SVGParent);setTimeout(function(){e.zoomToFit()},this.transitionDuration)}.call(this,t),this}},{key:"unrender",value:function(){}},{key:"treeData",get:function(){var e=this.data.canvas.graph.nodes?Object.values(this.data.canvas.graph.nodes):[],t=e.reduce(function(e,t){return e[t.id]=t,e},{}),n=[];return e.forEach(function(e){var r=t[e.parent];r?(r.children||(r.children=[])).push(e):n.push(e)}),n[0]}}]),t}();n.default=c},{"../util/component":24,"./graph":15,"./renderer":22}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=f(e("./renderer")),l=f(e("./graph-tree")),c=f(e("./graph-generic")),s=f(e("./menu-context")),u=f(e("./tooltip")),d=f(e("./callback"));function f(e){return e&&e.__esModule?e:{default:e}}var p,h,y,v,b,g,m=(r=(0,e("../decorator/data").requires)("canvas.graph"),a=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"render",value:function(){var e=void 0;switch(this.data.canvas.graph.type){case"tree":e=new l.default(this.options).load(this.data).render();break;default:e=new c.default(this.options).load(this.data).render()}return e}},{key:"unrender",value:function(){}}],[{key:"applyEvents",value:function(e,t){if(e){var n=new u.default(t),r=new s.default(t),a=new d.default(t);e.on("contextmenu",function(e){e=e.data||e,r.load(e,!0).render(),o.call(this,e,"contextmenu")}).on("click",function(e){e=e.data||e,o.call(this,e,"click")}).on("dblclick",function(e){e=e.data||e,o.call(this,e,"dblclick")}).on("mouseenter",function(e){e=e.data||e,n.load(e.messages,!0).render()}).on("mouseleave",function(){n.unrender()})}function o(e,t){e.callbacks&&Object.values(e.callbacks).forEach(function(e){e.trigger===t&&a.load({callback:e},!0).execute()})}}},{key:"getSymbol",value:function(e){return"circle"===e?d3.symbolCircle:"cross"===e?d3.symbolCross:"diamond"===e?d3.symbolDiamond:"square"===e?d3.symbolSquare:"triangle"===e?d3.symbolTriangle:"star"===e?d3.symbolStar:"wye"===e?d3.symbolWye:d3.symbolCircle}},{key:"colors",get:function(){return d3.scaleSequential().domain([0,100]).interpolator(d3.interpolateRainbow)}}]),t}(),p=a.prototype,h="render",y=[r],v=Object.getOwnPropertyDescriptor(a.prototype,"render"),b=a.prototype,g={},Object.keys(v).forEach(function(e){g[e]=v[e]}),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=y.slice().reverse().reduce(function(e,t){return t(p,h,e)||e},g),b&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(b):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(p,h,g),g=null),a);n.default=m},{"../decorator/data":2,"./callback":5,"./graph-generic":13,"./graph-tree":14,"./menu-context":16,"./renderer":22,"./tooltip":23}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./menu"),c=(o=l)&&o.__esModule?o:{default:o};var s,u,d,f,p,h,y=(r=(0,e("../decorator/data").requires)("menus"),a=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default),i(t,[{key:"render",value:function(){var e=this;d3.event.preventDefault(),this.element=this.HTMLParent.select("div.francy-context-menu-holder"),this.element.node()||(this.element=this.HTMLParent.append("div").attr("class","francy-context-menu-holder"));var t=d3.mouse(this.SVGParent.node());if(this.element.style("left",t[0]+5+"px").style("top",t[1]+5+"px"),this.element.style("display","block"),!this.element.selectAll("*").node()){d3.select("body").on("click.francy-context-menu",function(){return e.unrender()});var n=this.element.append("div").attr("class","francy-context-menu").append("ul"),r=this.iterator(Object.values(this.data.menus));return this.traverse(n,r),this}}},{key:"unrender",value:function(){this.element&&(this.element.selectAll("*").remove(),this.element.style("display",null))}}]),t}(),s=a.prototype,u="render",d=[r],f=Object.getOwnPropertyDescriptor(a.prototype,"render"),p=a.prototype,h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=d.slice().reverse().reduce(function(e,t){return t(s,u,e)||e},h),p&&void 0!==h.initializer&&(h.value=h.initializer?h.initializer.call(p):void 0,h.initializer=void 0),void 0===h.initializer&&(Object.defineProperty(s,u,h),h=null),a);n.default=y},{"../decorator/data":2,"./menu":18}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(e("./menu")),o=l(e("./modal-about")),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../node_modules/save-svg-as-png/saveSvgAsPng"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"render",value:function(){var e=this,t=this.options.appendTo.element,n=new o.default(this.options),r="MainMenu-"+this.data.canvas.id;this.element=d3.select("#"+r),this.element.node()||(this.logger.debug("Creating Main Menu ["+r+"]..."),this.element=t.append("div").attr("class","francy-main-menu-holder").attr("id",r)),this.element.selectAll("*").remove(),this.element=this.element.append("ul").attr("class","francy-main-menu"),this.data.canvas.title&&this.element.append("li").attr("class","francy-title").append("a").html(this.data.canvas.title);var a=this.element.append("li");a.append("a").html("Francy");var l=a.append("ul");l.append("li").append("a").on("click",function(){return e.options.appendTo.canvas.zoomToFit()}).attr("title","Zoom to Fit").html("Zoom to Fit"),l.append("li").append("a").on("click",function(){return i.saveSvgAsPng(e.SVGParent.node(),"diagram.png")}).attr("title","Save to PNG").html("Save to PNG"),l.append("li").append("a").on("click",function(){return n.load(e.data).render()}).attr("title","About").html("About");var c=this.iterator(Object.values(this.data.canvas.menus));return this.traverse(this.element,c),this.logger.debug("Main Menu updated ["+r+"]..."),this}},{key:"unrender",value:function(){}}]),t}();n.default=c},{"../../node_modules/save-svg-as-png/saveSvgAsPng":1,"./menu":18,"./modal-about":20}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(e("./renderer")),o=i(e("./callback"));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"traverse",value:function(e,t){for(var n=this;t.hasNext();){var r=t.next(),a=e.append("li"),i=a.selectAll("a").data([r]).enter().append("a").attr("title",r.title).html(r.title);if(r.callback&&Object.values(r.callback).length&&i.on("click",function(e){return new o.default(n.options).load(e,!0).execute()}),r.menus&&Object.values(r.menus).length>0){var l=a.append("ul"),c=this.iterator(Object.values(r.menus));this.traverse(l,c)}}}},{key:"iterator",value:function(e){var t=0;return{next:function(){return this.hasNext()?e[t++]:void 0},hasNext:function(){return t<e.length}}}},{key:"unrender",value:function(){}}]),t}();n.default=l},{"./callback":5,"./renderer":22}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./renderer"),c=(o=l)&&o.__esModule?o:{default:o};var s,u,d,f,p,h,y=(r=(0,e("../decorator/data").requires)("canvas.messages"),a=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default),i(t,[{key:"render",value:function(){var e=this,t=this.options.appendTo.element,n=Object.keys(this.data.canvas.messages).map(function(t){return{id:t,type:e.data.canvas.messages[t].type,title:e.data.canvas.messages[t].title,text:e.data.canvas.messages[t].text}}),r="Messages-"+this.data.canvas.id;this.element=d3.select("#"+r),this.element.node()||(this.element=t.append("div").attr("class","francy-message-holder").attr("id",r));var a=this.element.selectAll("div.francy-alert").data(n,function(e){return e.id}),o=a.enter().append("div").attr("id",function(e){return e.id}).attr("class",function(e){return"francy-alert alert-"+e.type}).on("click",function(){d3.select(this).style("display","none")});return o.append("span").attr("class","strong").text(function(e){return e.title}),o.append("span").text(function(e){return e.text}),o.append("span").attr("class","strong").style("display","none").text("x"),o.merge(a),a.exit().remove(),this.element.style("display","block"),this}},{key:"unrender",value:function(){}}]),t}(),s=a.prototype,u="render",d=[r],f=Object.getOwnPropertyDescriptor(a.prototype,"render"),p=a.prototype,h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=d.slice().reverse().reduce(function(e,t){return t(s,u,e)||e},h),p&&void 0!==h.initializer&&(h.value=h.initializer?h.initializer.call(p):void 0,h.initializer=void 0),void 0===h.initializer&&(Object.defineProperty(s,u,h),h=null),a);n.default=y},{"../decorator/data":2,"./renderer":22}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./renderer"),i=(r=o)&&r.__esModule?r:{default:r},l=e("../util/component");var c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),a(t,[{key:"render",value:function(){var e=this,t="AboutModalWindow";this.logger.debug("Creating About Modal ["+t+"]...");var n=d3.select("body").append("div").attr("class","francy-overlay"),r=d3.select("body").append("div").attr("class","francy");this.element=r.append("div").attr("id",t).attr("class","francy-modal");var a=this.element.append("form");a.append("div").attr("class","francy-modal-header").append("span").html("About Francy v"+(this.data.version||"N/A"));var o=a.append("div").attr("class","francy-modal-content").append("div").attr("class","francy-table").append("div").attr("class","francy-table-body");return o.append("span").text("Loaded Object:"),o.append("pre").attr("class","francy").html(this.syntaxHighlight(JSON.stringify(this.data.canvas,null,2))),o.append("span").append("a").attr("href","https://github.com/mcmartins/francy").text("Francy on Github"),a.append("div").attr("class","francy-modal-footer").append("button").text("Ok").on("click",function(){return n.remove(),e.element.remove(),r.remove(),d3.event.preventDefault(),!1}),(0,l.RegisterJupyterKeyboardEvents)([".francy",".francy-arg",".francy-overlay",".francy-modal"]),this.logger.debug("Callback About updated ["+t+"]..."),this}},{key:"unrender",value:function(){}},{key:"syntaxHighlight",value:function(e){return(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})}}]),t}();n.default=c},{"../util/component":24,"./renderer":22}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./renderer"),i=(r=o)&&r.__esModule?r:{default:r},l=e("../util/component");var c=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),a(t,[{key:"render",value:function(){var e=this,t=this.data.callback.id;this.logger.debug("Creating Callback Modal ["+t+"]...");var n=d3.select("body").append("div").attr("class","francy-overlay"),r=d3.select("body").append("div").attr("class","francy");this.element=r.append("div").attr("id",t).attr("class","francy-modal");var a=this.element.append("form"),o=a.append("div").attr("class","francy-modal-header").append("span").html("Required arguments&nbsp;");this.data.title&&o.append("span").attr("style","font-weight: bold;").text("for "+this.data.title);var i=a.append("div").attr("class","francy-modal-content").append("div").attr("class","francy-table").append("div").attr("class","francy-table-body"),c=!0,s=!1,u=void 0;try{for(var d,f=Object.values(this.data.callback.requiredArgs)[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value,h=i.append("div").attr("class","francy-table-row");h.append("div").attr("class","francy-table-cell").append("label").attr("for",p.id).text(p.title);var y=h.append("div").attr("class","francy-table-cell").append("input").attr("id",p.id).attr("class","francy-arg").attr("required","").attr("name",p.id).attr("type",p.type).attr("value",p.value).on("change",function(){e.data.callback.requiredArgs[this.id].value=this.value}).on("input",this.onchange).on("keyup",this.onchange).on("paste",this.onchange);"boolean"===p.type&&(p.value=p.value||!1,y.attr("type","checkbox").attr("required",null).attr("value",p.value).on("change",function(){e.data.callback.requiredArgs[this.id].value=this.value=this.checked})),h.append("span").attr("class","validity")}}catch(e){s=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(s)throw u}}var v=a.append("div").attr("class","francy-modal-footer");return v.append("button").text("Ok").on("click",function(){return a.node().checkValidity()&&(d3.event.preventDefault(),e.options.callbackHandler(e.data.callback),n.remove(),e.element.remove(),r.remove()),!1}),v.append("button").text("Cancel").on("click",function(){return n.remove(),e.element.remove(),r.remove(),d3.event.preventDefault(),!1}),(0,l.RegisterJupyterKeyboardEvents)([".francy",".francy-arg",".francy-overlay",".francy-modal"]),i.selectAll(".francy-arg").node().focus(),this.logger.debug("Callback Modal updated ["+t+"]..."),this}},{key:"unrender",value:function(){}}]),t}();n.default=c},{"../util/component":24,"./renderer":22}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./base"),i=(r=o)&&r.__esModule?r:{default:r};var l=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}));if(new.target===t)throw new TypeError("Cannot construct [Renderer] instances directly!");if(void 0===i.render||"function"!=typeof i.render)throw new TypeError("Must override [render()] method!");return void 0===i.unrender&&i.logger.debug("No [unrender()] method specified..."),i.element=void 0,i.transitionDuration=750,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),a(t,[{key:"HTMLParent",get:function(){return"svg"===this.options.appendTo.element.node().tagName.toLowerCase()?d3.select(this.options.appendTo.element.node().parentNode):this.options.appendTo.element}},{key:"SVGParent",get:function(){return"div"===this.options.appendTo.element.node().tagName.toLowerCase()?this.options.appendTo.element.select("svg"):this.options.appendTo.element}}]),t}();n.default=l},{"./base":4}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./renderer"),c=(o=l)&&o.__esModule?o:{default:o};var s,u,d,f,p,h,y=(r=(0,e("../decorator/data").requires)(),a=function(e){function t(e){var n=e.verbose,r=void 0!==n&&n,a=e.appendTo,o=e.callbackHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{verbose:r,appendTo:a,callbackHandler:o}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default),i(t,[{key:"render",value:function(){if(this.element=this.HTMLParent.select("div.francy-tooltip-holder"),this.element.node()||(this.element=this.HTMLParent.append("div").attr("class","francy-tooltip-holder")),!this.element.selectAll("*").node()){var e=d3.mouse(this.SVGParent.node());this.element.style("left",e[0]+5+"px").style("top",e[1]-5+"px");var t=this.element.append("div").attr("class","francy-tooltip").append("div").attr("class","francy-table").append("div").attr("class","francy-table-body"),n=this;Object.keys(this.data).map(function(e){var r=t.append("div").attr("class","francy-table-row");r.append("div").attr("class","francy-table-cell").text(n.data[e].title),r.append("div").attr("class","francy-table-cell").text(n.data[e].text)}),this.element.style("display","block")}}},{key:"unrender",value:function(){this.element&&(this.element.selectAll("*").remove(),this.element.style("display",null))}}]),t}(),s=a.prototype,u="render",d=[r],f=Object.getOwnPropertyDescriptor(a.prototype,"render"),p=a.prototype,h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=d.slice().reverse().reduce(function(e,t){return t(s,u,e)||e},h),p&&void 0!==h.initializer&&(h.value=h.initializer?h.initializer.call(p):void 0,h.initializer=void 0),void 0===h.initializer&&(Object.defineProperty(s,u,h),h=null),a);n.default=y},{"../decorator/data":2,"./renderer":22}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RegisterMathJax=function(e){if(!e)return;setTimeout(function(){try{MathJax.Hub.Config({extensions:["tex2jax.js"],jax:["input/TeX","output/SVG"],tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0},skipStartupTypeset:!0}),MathJax.Hub.Register.StartupHook("End",function(){setTimeout(function(){e.selectAll(".francy-label").each(function(){var e=d3.select(this),t=e.select("text>span>svg");t.node()&&setTimeout(function(){t.attr("x",e.attr("x")),t.attr("y",-15),d3.select(e.node().parentNode).append(function(){return t.node()}),e.selectAll("*").remove()},10)})},250)}),MathJax.Hub.Queue(["setRenderer",MathJax.Hub,"SVG"],["Typeset",MathJax.Hub,e.node()]),MathJax.Hub.Configured()}catch(e){"ReferenceError"==e.name&&(new o.default).info("It seems MathJax is not loaded...",e)}},10)},n.RegisterJupyterKeyboardEvents=function(e){if(!e)return;try{e.map(function(e){Jupyter.keyboard_manager.register_events(e)})}catch(e){"ReferenceError"==e.name&&(new o.default).info("It seems we're not running on Jupyter...",e)}};var r,a=e("../util/logger"),o=(r=a)&&r.__esModule?r:{default:r}},{"../util/logger":26}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"parse",value:function(t,n){if(t){t=(t="string"!=typeof t?JSON.stringify(t):t).replace(/[\n\r\b\\]+|(gap>)/g,"");var r=/{(?:[^])*}/g.exec(t);if(r){t=r[0];try{var a=JSON.parse(t);return a.mime===e.MIME||n?a:void 0}catch(e){console.error(e)}}}}},{key:"MIME",get:function(){return"application/vnd.francy+json"}}]),e}();n.default=a},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).verbose,n=void 0!==t&&t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.verbose=n,this.console=console}return r(e,[{key:"debug",value:function(e){this.verbose&&this.console.debug(this._format("DEBUG",e))}},{key:"info",value:function(e){this.console.info(this._format("INFO",e))}},{key:"error",value:function(e,t){this.console.error(this._format("ERROR",e),t)}},{key:"warn",value:function(e,t){t=t||{},this.console.error(this._format("WARN",e),t)}},{key:"_format",value:function(e,t){return"["+e+"] - "+(new Date).toISOString()+" - "+t}}]),e}();n.default=a},{}]},{},[3]);
//# sourceMappingURL=maps/francy.bundle.js.map
