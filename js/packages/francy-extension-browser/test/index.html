<html lang="en">

<head>
    <meta charset="utf-8" content="text/html" property="GAP,francy,d3.v7,graphviz,vis,vis">
    <script src="../dist/main.js"></script>
    <title>Francy Test</title>
</head>

<body>
<div id="francy-drawing-div" style="visibility:hidden;"></div>
</body>

<script>

  function resolvePromise(data) {
    let Francy = new FrancyApp({
      appendTo: '#francy-drawing-div',
      callbackHandler: (json) => {
        console.log(`Input from callback: ${json}`);
      }
    });

    // register available renderers
    Francy.RenderingManager.register(new D3Renderer());
    Francy.RenderingManager.register(new GraphvizRenderer());
    Francy.RenderingManager.register(new VisRenderer());
    Francy.load(data).render().catch(error => Logger.error(error)).then(element => {
      // NOTE: we're using a visible div to append the object so no need to do anything here
      // document.getElementsByTagName('body')[0].appendChild(element);
      if (element) {
        document.body.appendChild(element);
        console.log('Object rendered...', element);
      }
    });
  }

  fetch('../../francy-core/src/__test__/data/json1.json')
    .then(response => response.json())
    .then(resolvePromise);

  fetch('../../francy-core/src/__test__/data/json2.json')
    .then(response => response.json())
    .then(resolvePromise);

  fetch('../../francy-core/src/__test__/data/json3.json')
    .then(response => response.json())
    .then(resolvePromise);

  fetch('../../francy-core/src/__test__/data/json4.json')
    .then(response => response.json())
    .then(resolvePromise);

  fetch('../../francy-core/src/__test__/data/json5.json')
    .then(response => response.json())
    .then(resolvePromise);

  fetch('../../francy-core/src/__test__/data/json6.json')
    .then(response => response.json())
    .then(resolvePromise);

  fetch('../../francy-core/src/__test__/data/json7.json')
    .then(response => response.json())
    .then(resolvePromise);
</script>

</html>
